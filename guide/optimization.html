<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Using NEURON’s Optimization Tools &mdash; NEURON  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=6933245a" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/design-tabs.js?v=36754332"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Tutorial 1 : Fitting a function to data" href="optimization1.html" />
    <link rel="prev" title="How to move the labels" href="how_to_move_labels.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            NEURON
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Building:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cmake_doc/index.html">CMake Build Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/developer.html">Developer Builds</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User documentation:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../videos/index.html">Training videos</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="what_is_neuron.html">What is NEURON</a></li>
<li class="toctree-l2"><a class="reference internal" href="how_to_get_started.html">How to get started with NEURON</a></li>
<li class="toctree-l2"><a class="reference internal" href="bio_faq.html">Biology Modeling FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="units.html">Units used in NEURON</a></li>
<li class="toctree-l2"><a class="reference internal" href="saveses.html">Using Session Files for Saving and Retrieving Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="cellbuilder.html">Using the Cell Builder GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="import3d.html">Using the Import3D GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="network_builder_tutorials.html">Network Builder tutorials</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Using NEURON’s Optimization Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#why-is-it-called-multiple-run-fitter-and-what-does-it-really-do">Why is it called “Multiple Run Fitter,” and what does it really do?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="optimization1.html">Tutorial 1 : Fitting a function to data</a></li>
<li class="toctree-l4"><a class="reference internal" href="optimization2.html">Tutorial 2 : Fitting a model to data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#other-optimization-tools-that-work-with-neuron">Other optimization tools that work with NEURON</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="modelview_compact_display.html">ModelView: Compact display of parameters for NEURON models</a></li>
<li class="toctree-l2"><a class="reference internal" href="randomness.html">Randomness in NEURON models</a></li>
<li class="toctree-l2"><a class="reference internal" href="porting_mechanisms_to_cpp.html">Adapting MOD files for C++ with NEURON 9.0[.dev]</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html">Frequently asked questions (FAQ)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../courses/exercises2018.html">NEURON Course Exercises</a></li>
<li class="toctree-l1"><a class="reference external" href="https://neuron.yale.edu/phpBB">The NEURON forum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publications.html">Publications about NEURON</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publications-using-neuron.html">Publications using NEURON</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">NEURON scripting:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scripting.html">Running Python and HOC scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/index.html">NEURON Python documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hoc/index.html">NEURON HOC documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../otherscripting.html">Other scripting languages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Python tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rxd-tutorials/index.html">Python RXD tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreneuron/index.html">CoreNEURON</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">NMODLanguage:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../nmodl/index.html">NMODLanguage</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scm/index.html">NEURON SCM and Release</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/index.html">NEURON Development topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doxygen.html">C/C++ API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Removed Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../removed_features.html">Removed Features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Changelog</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">NEURON 8.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html#neuron-8-1">NEURON 8.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html#neuron-8-0">NEURON 8.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html#contributors">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html#feedback-help">Feedback / Help</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">NEURON</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Guides</a></li>
      <li class="breadcrumb-item active">Using NEURON’s Optimization Tools</li>
<li class="wy-breadcrumbs-aside">
    
    
</li>

      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/guide/optimization.rst.txt" rel="nofollow"> View page source</a>
      </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="using-neuron-s-optimization-tools">
<h1>Using NEURON’s Optimization Tools<a class="headerlink" href="#using-neuron-s-optimization-tools" title="Link to this heading"></a></h1>
<p>This collection of tutorials shows how to use NEURON’s optimization tools. Before working through these tutorials, most readers should probably examine the on-line “Introduction to Optimization” <a class="reference external" href="http://neos-guide.org/content/optimization-introduction">http://neos-guide.org/content/optimization-introduction</a></p>
<blockquote>
<div><p>Those who have a special interest in the topic of optimization may wish to browse the NEOS Guide more extensively <a class="reference external" href="http://neos-guide.org/">http://neos-guide.org/</a>.</p>
</div></blockquote>
<p>The general idea is that we want to adjust the parameters of a function or computational model so that its performance satisfies a set of criteria. These tutorials show how to accomplish this task by using the Multiple Run Fitter to</p>
<ul class="simple">
<li><p>specify the function or model that we want to optimize</p></li>
<li><p>specify the criteria that we want it to satisfy</p></li>
<li><p>specify the parameters that will be adjusted and any constraints on those parameters</p></li>
<li><p>perform the optimization</p></li>
</ul>
<section id="why-is-it-called-multiple-run-fitter-and-what-does-it-really-do">
<h2>Why is it called “Multiple Run Fitter,” and what does it really do?<a class="headerlink" href="#why-is-it-called-multiple-run-fitter-and-what-does-it-really-do" title="Link to this heading"></a></h2>
<p>The simplest optimization task in computational modeling is to adjust model parameters so that the results of a simulated experiment (a “simulation run”) fit measurements that were obtained under a particular experimental protocol.</p>
<p>However, experimental techniques have advanced to the point where it is now possible to carry out several protocols on the same cell, often involving simultaneous recording from multiple sites. The availability of this kind of data raises the possibility of tighter constraint of model parameters. NEURON’s Multiple Run Fitter can be used to perform optimizations that involve fitting many simulation runs, each generated with a different protocol and involving several recordings, to the corresponding data. The Multiple Run Fitter is much more powerful than the old Run Fitter and Function Fitter, and it is recommended for all optimization problems.</p>
<p>A Multiple Run Fitter uses the results from one or more “Generators” to compute the total error that will be minimized during optimization. A Generator is similar to a RunFitter, in that it specifies a simulation protocol (the computational modeling equivalent of an experimental protocol) and computes an error by calculating the difference between simulation results and data. Every Generator can have its own simulation protocol, data, and criteria for goodness of fit. Each Generator can be turned on or off; a Generator that is off is not used (does not result in a run and does not contribute to the total error value).</p>
<p>At present, the optimization algorithm used by the Multiple Run Fitter is the PRAXIS (principal axis) method described by Brent (1976).</p>
<blockquote>
<div><p>Brent, R. A new algorithm for minimizing a function of several variables without calculating derivatives. In: Algorithms for Minimization without Derivatives. Englewood Cliffs, NJ : Prentice Hall, 1976, p. 200-248.</p>
</div></blockquote>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">The tutorials:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="optimization1.html">Tutorial 1 : Fitting a function to data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="optimization1.html#step-0-download-the-data">Step 0. Download the data</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimization1.html#step-1-bring-up-a-multiple-run-fitter">Step 1. Bring up a Multiple Run Fitter</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimization1.html#step-2-load-the-experimental-data-into-the-multiple-run-fitter">Step 2. Load the Experimental Data into the Multiple Run Fitter</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimization1.html#step-3-specify-the-function-we-want-to-optimize">Step 3. Specify the function we want to optimize</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimization1.html#step-4-specify-the-parameters-that-will-be-adjusted">Step 4. Specify the parameters that will be adjusted</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimization1.html#step-5-specify-the-criteria-we-want-the-function-to-satisfy">Step 5. Specify the criteria we want the function to satisfy</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimization1.html#step-6-perform-the-optimization">Step 6. Perform the optimization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="optimization2.html">Tutorial 2 : Fitting a model to data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="optimization2.html#the-problem">The problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimization2.html#the-cell-and-the-electrical-measurements">The cell and the electrical measurements</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimization2.html#step-1-create-an-unoptimized-model">Step 1. Create an “unoptimized” model</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimization2.html#step-2-set-up-a-current-clamp-experiment-on-this-model">Step 2. Set up a current clamp experiment on this model</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimization2.html#step-3-configure-a-multiplerunfitter-to-do-a-run-fitness-optimization">Step 3. Configure a MultipleRunFitter to do a “run fitness” optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimization2.html#step-4-load-the-experimental-data-into-the-iclamp-run-fitness-generator">Step 4. Load the Experimental Data into the iclamp Run Fitness Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimization2.html#step-5-specify-the-parameters-that-will-be-adjusted">Step 5. Specify the parameters that will be adjusted</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimization2.html#step-6-perform-the-optimization">Step 6. Perform the optimization</a></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="other-optimization-tools-that-work-with-neuron">
<h2>Other optimization tools that work with NEURON<a class="headerlink" href="#other-optimization-tools-that-work-with-neuron" title="Link to this heading"></a></h2>
<p>You may also be interested in <a class="reference external" href="https://github.com/BlueBrain/BluePyOpt">BluePyOpt</a>.</p>
<blockquote>
<div><p>Van Geit W, Gevaert M, Chindemi G, Rössert C, Courcol J, Muller EB, Schürmann F, Segev I and Markram H (2016). BluePyOpt: Leveraging open source software and cloud infrastructure to optimise model parameters in neuroscience. <em>Front. Neuroinform.</em> 10:17. <a class="reference external" href="https://doi.org/10.3389/fninf.2016.00017">doi:10.3389/fninf.2016.00017</a>.</p>
</div></blockquote>
<p>After installing it via</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pip install bluepyopt
</pre></div>
</div>
</div></blockquote>
<p>See their <a class="reference external" href="https://github.com/BlueBrain/BluePyOpt#quick-start">quick start guide</a> for more examples of usage.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="how_to_move_labels.html" class="btn btn-neutral float-left" title="How to move the labels" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="optimization1.html" class="btn btn-neutral float-right" title="Tutorial 1 : Fitting a function to data" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Duke, Yale and the Blue Brain Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>