<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UNITS Tutorial &mdash; NEURON  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=6933245a" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/design-tabs.js?v=36754332"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="FIinitializeHandler" href="finitialize_handler.html" />
    <link rel="prev" title="NMODL’s built-in functions" href="nmodls_built_in_functions.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            NEURON
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Building:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cmake_doc/index.html">CMake Build Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/developer.html">Developer Builds</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User documentation:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../videos/index.html">Training videos</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="what_is_neuron.html">What is NEURON</a></li>
<li class="toctree-l2"><a class="reference internal" href="how_to_get_started.html">How to get started with NEURON</a></li>
<li class="toctree-l2"><a class="reference internal" href="bio_faq.html">Biology Modeling FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="units.html">Units used in NEURON</a></li>
<li class="toctree-l2"><a class="reference internal" href="saveses.html">Using Session Files for Saving and Retrieving Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="cellbuilder.html">Using the Cell Builder GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="import3d.html">Using the Import3D GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="network_builder_tutorials.html">Network Builder tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimization.html">Using NEURON’s Optimization Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="modelview_compact_display.html">ModelView: Compact display of parameters for NEURON models</a></li>
<li class="toctree-l2"><a class="reference internal" href="randomness.html">Randomness in NEURON models</a></li>
<li class="toctree-l2"><a class="reference internal" href="porting_mechanisms_to_cpp.html">Adapting MOD files for C++ with NEURON 9.0[.dev]</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="faq.html">Frequently asked questions (FAQ)</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="faq.html#now-that-i-ve-installed-neuron-how-do-i-run-it">Now that I’ve installed NEURON, how do I run it?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#what-s-the-best-way-to-learn-how-to-use-neuron">What’s the best way to learn how to use NEURON?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#how-do-i-create-a-neuron-model">How do I create a NEURON model?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#help-i-m-having-a-hard-time-implementing-models">Help! I’m having a hard time implementing models!</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#why-can-t-neuron-read-the-text-file-or-hoc-file-that-i-created">Why can’t NEURON read the text file (or <code class="docutils literal notranslate"><span class="pre">hoc</span></code> file) that I created?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#how-do-i-print-a-hard-copy-of-a-neuron-window">How do I print a hard copy of a NEURON window?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#how-do-i-plot-something-other-than-membrane-potential">How do I plot something other than membrane potential?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#how-do-i-save-and-edit-figures">How do I save and edit figures?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#i-ve-used-the-neuron-main-menu-to-construct-and-manage-models-how-can-i-save-what-i-have-done">I’ve used the NEURON Main Menu to construct and manage models. How can I save what I have done?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#what-is-a-ses-session-file-can-i-edit-it">What is a ses (session) file? Can I edit it?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#how-do-i-use-neuron-s-tools-for-electrotonic-analysis">How do I use NEURON’s tools for electrotonic analysis?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#why-should-i-use-an-odd-value-for-nseg">Why should I use an odd value for nseg?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#what-s-a-good-stretegy-for-specifying-nseg">What’s a good stretegy for specifying nseg?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#how-do-i-change-the-background-color-used-in-neuron-s-shape-plots-and-other-graphs">How do I change the background color used in NEURON’s shape plots and other graphs?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#how-do-i-change-the-color-scale-used-in-shape-plots">How do I change the color scale used in shape plots?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#i-see-an-error-message-that-says-procedure-too-big-in-foo-hoc">I see an error message that says … procedure too big in ./foo.hoc …</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#where-can-i-find-examples-of-mod-files">Where can I find examples of mod files?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#how-do-i-compile-mod-files">How do I compile mod files?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#i-can-t-get-mod-files-to-compile">I can’t get mod files to compile.</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#i-installed-a-new-version-of-neuron-and-now-i-see-error-messages-like-this-mecanisms-fooba-needs-to-be-re-translated-its-version-5-2-c-code-is-incompatible-with-this-neuron-version">I installed a new version of NEURON, and now I see error messages like this: ‘mecanisms fooba needs to be re-translated. its version 5.2 “c” code is incompatible with this neuron version’.</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#is-there-a-list-of-functions-that-are-built-into-nmodl">Is there a list of functions that are built into NMODL?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#is-there-a-list-of-functions-that-are-built-into-hoc">Is there a list of functions that are built into hoc?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#what-units-does-neuron-use-for-current-concentration-etc">What units does NEURON use for current, concentration, etc.?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#when-i-type-a-new-value-into-a-numeric-field-it-doesn-t-seem-to-have-any-effect">When I type a new value into a numeric field, it doesn’t seem to have any effect.</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#what-is-the-difference-between-seclamp-and-vclamp-and-which-should-i-use">What is the difference between SEClamp and VClamp, and which should I use?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#seclamp-and-iclamp-just-deliver-rectangular-step-waveforms-how-can-i-make-them-produce-an-arbitrary-waveform-e-g-something-that-i-calculated-or-recorded-from-a-real-cell">SEClamp and IClamp just deliver rectangular step waveforms. How can I make them produce an arbitrary waveform, e.g. something that I calculated or recorded from a real cell?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#i-just-want-a-current-clamp-that-will-deliver-a-sequence-of-current-pulses-at-regular-intervals-vector-play-seems-like-overkill-for-this">I just want a current clamp that will deliver a sequence of current pulses at regular intervals. Vector play seems like overkill for this.</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#i-want-a-current-clamp-that-will-generate-a-pulse-when-i-send-it-an-event-or-that-i-can-use-to-produce-pulses-at-precalculated-times">I want a current clamp that will generate a pulse when I send it an event, or that I can use to produce pulses at precalculated times.</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#i-have-a-set-of-recorded-or-calculated-spike-times-how-can-i-use-these-to-drive-a-postsynaptic-mechanism">I have a set of recorded or calculated spike times. How can I use these to drive a postsynaptic mechanism?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#how-can-i-read-data-from-a-binary-pclamp-file">How can I read data from a binary PClamp file?</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#how-do-i-exit-neuron-i-m-not-using-the-gui-and-when-i-enter-d-at-the-oc-prompt-it-doesn-t-do-anything">How do I exit NEURON? I’m not using the GUI, and when I enter ^D at the oc&gt; prompt it doesn’t do anything?</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="faq.html#is-there-a-list-of-functions-that-are-built-into-neuron">Is there a list of functions that are built into NEURON?</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="using_plotwhat_to_specify_a_variable.html">Using “Plot what?” to Specify a Variable to be plotted</a></li>
<li class="toctree-l4"><a class="reference internal" href="working_with_postscript_and_idraw.html">Working with PostScript and idraw figures</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_session_files_for_saving.html">Using Session Files for Saving and Retrieving Windows</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_the_d_lambda_rule.html">Using the d_lambda Rule</a></li>
<li class="toctree-l4"><a class="reference internal" href="nrn_defaults.html">How to change the background color used in shape plots and other graphs</a></li>
<li class="toctree-l4"><a class="reference internal" href="nrn_defaults.html#how-create-a-custom-colormap">How create a custom colormap</a></li>
<li class="toctree-l4"><a class="reference internal" href="how_to_get_started_with_neuron.html">How to get started with NEURON</a></li>
<li class="toctree-l4"><a class="reference internal" href="nmodls_built_in_functions.html">NMODL’s built-in functions</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">UNITS Tutorial</a></li>
<li class="toctree-l4"><a class="reference internal" href="#definition-of-new-units">Definition of new units</a></li>
<li class="toctree-l4"><a class="reference internal" href="#function-and-argument-units">Function and Argument units</a></li>
<li class="toctree-l4"><a class="reference internal" href="#units-for-kinetic-blocks">Units for KINETIC blocks</a></li>
<li class="toctree-l4"><a class="reference internal" href="#units-in-neuron-models">Units in NEURON models</a></li>
<li class="toctree-l4"><a class="reference internal" href="finitialize_handler.html">FIinitializeHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_neuron_on_the_mac.html">Using NEURON on the Mac</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../courses/exercises2018.html">NEURON Course Exercises</a></li>
<li class="toctree-l1"><a class="reference external" href="https://neuron.yale.edu/phpBB">The NEURON forum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publications.html">Publications about NEURON</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publications-using-neuron.html">Publications using NEURON</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">NEURON scripting:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scripting.html">Running Python and HOC scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/index.html">NEURON Python documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hoc/index.html">NEURON HOC documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../otherscripting.html">Other scripting languages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Python tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rxd-tutorials/index.html">Python RXD tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreneuron/index.html">CoreNEURON</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">NMODLanguage:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../nmodl/index.html">NMODLanguage</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scm/index.html">NEURON SCM and Release</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/index.html">NEURON Development topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doxygen.html">C/C++ API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Removed Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../removed_features.html">Removed Features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Changelog</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">NEURON 8.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html#neuron-8-1">NEURON 8.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html#neuron-8-0">NEURON 8.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html#contributors">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html#feedback-help">Feedback / Help</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">NEURON</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Guides</a></li>
          <li class="breadcrumb-item"><a href="faq.html">Frequently asked questions (FAQ)</a></li>
      <li class="breadcrumb-item active">UNITS Tutorial</li>
<li class="wy-breadcrumbs-aside">
    
    
</li>

      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/guide/units_tutorial.rst.txt" rel="nofollow"> View page source</a>
      </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="units-tutorial">
<span id="id1"></span><h1>UNITS Tutorial<a class="headerlink" href="#units-tutorial" title="Link to this heading"></a></h1>
<p>Units in models are checked for consistency with</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>modlunit<span class="w"> </span>file
</pre></div>
</div>
<p>where <em>file</em> is the prefix to a model description file (having a <code class="docutils literal notranslate"><span class="pre">.mod</span></code> suffix).</p>
<blockquote>
<div><p>Units are understood at the level of the unix units command. The syntax for units is any string understood by the unix units command and enclosed in parentheses. In particular, scientific notation is expressed as 1.111-5 or 1.111+5 instead of the more usual 1.111e-4, etc. Also an integer following a name is the power of that dimension, e.g. cm4 is centimeter to the fourth power. Lastly, all units in the numerator must come first followed by a slash character followed by all the units in the denominator. e.g a volt can be expressed either as (volt), (m2-kg/sec2-coul), or as (m m kg/sec sec coul). ie. one cannot have two slashes in a units expression.</p>
</div></blockquote>
<p>Consider the model description language fragment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ASSIGNED</span> <span class="p">{</span>
    <span class="n">i</span>   <span class="p">(</span><span class="n">milliamp</span><span class="p">)</span>
    <span class="n">v</span>   <span class="p">(</span><span class="n">volt</span><span class="p">)</span>
    <span class="n">r</span>   <span class="p">(</span><span class="n">ohm</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">EQUATION</span> <span class="p">{</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">i</span>
<span class="p">}</span>
</pre></div>
</div>
<p>will produce the error message</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="n">i</span>
<span class="n">units</span><span class="p">:</span>  <span class="mf">0.001</span> <span class="n">coul</span><span class="o">/</span><span class="n">sec</span>
 <span class="n">v</span>
<span class="n">units</span><span class="p">:</span>  <span class="mi">1</span> <span class="n">m2</span><span class="o">-</span><span class="n">kg</span><span class="o">/</span><span class="n">sec2</span><span class="o">-</span><span class="n">coul</span>
<span class="n">The</span> <span class="n">units</span> <span class="n">of</span> <span class="n">the</span> <span class="n">previous</span> <span class="n">two</span> <span class="n">expressions</span> <span class="n">are</span> <span class="ow">not</span> <span class="n">conformable</span>
<span class="n">at</span> <span class="n">line</span> <span class="mi">8</span> <span class="ow">in</span> <span class="n">file</span> <span class="n">utest1</span><span class="o">.</span><span class="n">mod</span>
   <span class="n">v</span> <span class="o">=</span> <span class="n">i</span><span class="o">&lt;&lt;</span><span class="n">ERROR</span><span class="o">&gt;&gt;</span>
</pre></div>
</div>
<p>It is an error to equate milliamps and volts. The last two lines of the error message show where the error was found and the first two lines show what is inconsistent about the expressions in terms of fundamental units. In this case, the statement has a serious error due to a missing term.</p>
<p>Replacing the offending statement with “<code class="docutils literal notranslate"><span class="pre">v</span> <span class="pre">=</span> <span class="pre">i*r</span></code>” and retranslating the model gives</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">The</span> <span class="n">previous</span> <span class="n">primary</span> <span class="n">expression</span> <span class="k">with</span> <span class="n">units</span><span class="p">:</span> <span class="mf">0.001</span> <span class="n">m2</span><span class="o">-</span><span class="n">kg</span><span class="o">/</span><span class="n">sec2</span><span class="o">-</span><span class="n">coul</span>
<span class="ow">is</span> <span class="n">missing</span> <span class="n">a</span> <span class="n">conversion</span> <span class="n">factor</span> <span class="ow">and</span> <span class="n">should</span> <span class="n">read</span><span class="p">:</span>
    <span class="p">(</span><span class="mf">0.001</span><span class="p">)</span><span class="o">*</span><span class="p">(</span> <span class="n">i</span><span class="o">*</span><span class="n">r</span><span class="p">)</span>
<span class="n">at</span> <span class="n">line</span> <span class="mi">8</span> <span class="ow">in</span> <span class="n">file</span> <span class="n">utest1</span><span class="o">.</span><span class="n">mod</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">i</span><span class="o">*</span><span class="n">r</span><span class="o">&lt;&lt;</span><span class="n">ERROR</span><span class="o">&gt;&gt;</span>
</pre></div>
</div>
<p>Now, the units are conformable but the statement is still in error since we are trying to equate volts and millivolts. One way to correct the error is to choose at the outset a completely consistent set of units, e.g. replace the ASSIGNED statement for v with “<code class="docutils literal notranslate"><span class="pre">v</span> <span class="pre">(millivolt)</span></code>”. A second way is indicated in the error message.</p>
<p>A third obvious method, replacing the offending statement by</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="mf">.001</span><span class="o">*</span><span class="n">i</span><span class="o">*</span><span class="n">r</span>
</pre></div>
</div>
<p>WILL NOT WORK. Although an error message for such a natural and obviously correct statement is very annoying (after all, the <em>numbers</em> come out right), we do not allow you to do unit conversion in this way for one overpowering reason. It is error prone for you, and impossible for the computer, to determine whether a number refers to a conversion factor or whether a number refers to “how many” units we are talking about.</p>
<p>The syntactic feature that we use to distinguish conversion factors from quantity is to enclose conversion factors within parentheses. The benefits of this convention are: 1) it is unlikely and certainly unnecessary for single numbers with the semantic meaning of quantity to be enclosed within parentheses. 2) Single numbers enclosed in parentheses still produce well formed expressions that are arithmetically meaningful and correct in the absence of unit consistency checks. 3) If parentheses are ommitted, an error message will result since the unit factors will be inconsistent. 4) If parentheses surround a number which the user intended to be a quantity, an error message will result since the unit factors will be inconsistent. Note that the requirement that a conversion factor be a single number is important and that “(1 + 1)” is NOT a conversion factor but the quantity 2.</p>
<p>To see the necessity of disambiguating “quantity” and “conversion” Suppose we have variables x and y where x has the units of feet and a value of 2 (i.e. x is 2 feet) and y has the units of inches. Now consider the statement: <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">5*x</span></code>. The most likely intended meaning is that y is 5 times longer than x, i.e. y has the value 120 (inches). But to silently assign a value of 120 to y would take a lot of nerve since that kind of computation is very different from the way computers normally do things. Instead, the computer would print an error message suggesting the form <code class="docutils literal notranslate"><span class="pre">(12)*5*x</span></code>. Now, imagine that the user wrote <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">(5)*x</span></code>. Then the computer would print an error message suggesting another conversion factor of the form (2.4)*(5)*x. At this, the user should see his mistake – although the computer misinterpreted the exact nature of the mistake which was writing a quantity in the conversion format.</p>
<p>There is one case in which a strict formal conformability is not required. This happens in primary expressions that contain no variables within any of its sub-expressions. numbersfootnote{ A primary expression is a product of terms in which each term is a general expression enclosed in parentheses, a variable, or a number.} such as</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="mi">10</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">10</span><span class="p">)</span>

<span class="n">v</span> <span class="o">=</span> <span class="p">(</span><span class="mf">.001</span><span class="p">)</span><span class="o">*</span><span class="n">i</span><span class="o">*</span><span class="n">r</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="mi">3</span>
<span class="n">v</span> <span class="o">=</span> <span class="p">(</span><span class="mf">.001</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">i</span><span class="o">*</span><span class="n">r</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>in which the primary expression certainly means 10 volts, 10 feet, 10 inches, 1 volt, and 1 millivolt respectively. Thus primary expressions containing only numbers take units consistent with their position in the general expression. Numbers within an expression can also be given explicit units as in</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">exp</span><span class="p">(</span><span class="n">v</span><span class="o">/</span><span class="mi">18</span><span class="p">(</span><span class="n">mV</span><span class="p">))</span>
    <span class="n">exp</span><span class="p">(</span><span class="n">v</span><span class="o">/</span><span class="mi">18</span><span class="p">(</span><span class="mf">.001</span> <span class="n">volt</span><span class="p">))</span>
</pre></div>
</div>
<p>The units follow the number. Note that the two expressions above evaluate to the same number — the (<code class="docutils literal notranslate"><span class="pre">.001</span> <span class="pre">volt</span></code>) is not a conversion factor in the second expression but the units for the number 18.</p>
<p>Local variables inherit units through the assignment statement. Thus, consider,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BREAKPOINT</span> <span class="p">{</span>
   <span class="n">LOCAL</span> <span class="n">temp</span>
  <span class="n">temp</span> <span class="o">=</span> <span class="n">i</span><span class="o">*</span><span class="n">r</span>
  <span class="n">v</span> <span class="o">=</span> <span class="n">temp</span>
  <span class="n">temp</span> <span class="o">=</span> <span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">*</span><span class="mi">5</span><span class="o">*</span><span class="n">x</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">temp</span>
  <span class="n">temp</span> <span class="o">=</span> <span class="mi">10</span>
  <span class="n">v</span> <span class="o">=</span> <span class="n">temp</span>
<span class="p">}</span>
</pre></div>
</div>
<p>“Millivolts’ is assigned to temp in its first assignment (v = temp will produce an error message), “feet” is assigned to temp in its second assignment (the units are correct in y = temp), and temp is dimensionless in its third assignment (v = temp will produce an error message).</p>
</section>
<section id="definition-of-new-units">
<h1>Definition of new units<a class="headerlink" href="#definition-of-new-units" title="Link to this heading"></a></h1>
<p>New units can be defined in terms of default units and previously defined units by placing definitions in the UNITS block. eg.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UNITS</span> <span class="p">{</span>
    <span class="p">(</span><span class="n">uF</span><span class="p">)</span>    <span class="o">=</span>  <span class="p">(</span><span class="n">microfarad</span><span class="p">)</span>
    <span class="p">(</span><span class="n">Mohms</span><span class="p">)</span> <span class="o">=</span>  <span class="p">(</span><span class="n">megohms</span><span class="p">)</span>
    <span class="p">(</span><span class="n">V</span><span class="p">)</span>     <span class="o">=</span>  <span class="p">(</span><span class="n">volt</span><span class="p">)</span>
    <span class="p">(</span><span class="n">molar</span><span class="p">)</span> <span class="o">=</span>  <span class="p">(</span><span class="o">/</span><span class="n">liter</span><span class="p">)</span>
    <span class="p">(</span><span class="n">mM</span><span class="p">)</span>    <span class="o">=</span>  <span class="p">(</span><span class="n">millimolar</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A UNITS block can appear anywhere within a file but units used in definitions must be previously defined. Notice that molar is not moles/liter since mole has the default definition of 6.022169e+23. Default definitions can not be redefined within a model description file since that may invalidate other unit definitions appearing in the units database. There is no reason why the user cannot change the database although it is not recommended.</p>
<p>The units database knows about a lot of physical constants in addition to mole, e.g.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">faraday</span> \<span class="o">=</span> <span class="mf">9.652</span><span class="o">+</span><span class="mi">4</span> <span class="n">coul</span>\\
<span class="n">e</span> \<span class="o">&gt;</span> <span class="mf">1.602192</span><span class="o">-</span><span class="mi">19</span> <span class="n">coul</span>\\
<span class="n">rydberg</span> \<span class="o">&gt;</span> <span class="mf">2.179846</span><span class="o">-</span><span class="mi">18</span> <span class="n">m2</span><span class="o">-</span><span class="n">kg</span><span class="o">/</span><span class="n">sec2</span>\\
<span class="n">pi</span> \<span class="o">&gt;</span> <span class="mf">3.141593</span>\\
<span class="n">lambert</span> \<span class="o">&gt;</span> <span class="mf">3.183099</span><span class="o">+</span><span class="mi">3</span> <span class="n">candela</span><span class="o">/</span><span class="n">m2</span>
</pre></div>
</div>
<p>and it is more convenient to define <em>constant</em> constants in the UNITS block rather than in the CONSTANTS block — there is less chance of a typo, and they do not appear in SCoP where they can be inadvertently changed. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UNITS</span> <span class="p">{</span>
    <span class="n">F</span>      <span class="o">=</span> <span class="p">(</span><span class="n">faraday</span><span class="p">)</span> <span class="p">(</span><span class="n">coulomb</span><span class="p">)</span>
    <span class="n">PI</span>     <span class="o">=</span> <span class="p">(</span><span class="n">pi</span><span class="p">)</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">e</span>      <span class="o">=</span> <span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="p">(</span><span class="n">coulomb</span><span class="p">)</span>
    <span class="n">R</span>      <span class="o">=</span> <span class="p">(</span><span class="n">k</span><span class="o">-</span><span class="n">mole</span><span class="p">)</span> <span class="p">(</span><span class="n">joule</span><span class="o">/</span><span class="n">degC</span><span class="p">)</span>
    <span class="n">C</span>      <span class="o">=</span> <span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="p">(</span><span class="n">cm</span><span class="o">/</span><span class="n">sec</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Here, <code class="docutils literal notranslate"><span class="pre">C</span></code> is the speed of light in cm/sec and <code class="docutils literal notranslate"><span class="pre">R</span></code> is the Gas constant.</p>
<p>Constant factors are defined in the UNITS block in the following manner.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UNITS</span> <span class="p">{</span>
    <span class="n">F</span>   <span class="o">=</span> <span class="mi">96520</span>    <span class="p">(</span><span class="n">coul</span><span class="p">)</span>
    <span class="n">PI</span>  <span class="o">=</span> <span class="mf">3.14159</span>  <span class="p">()</span>
    <span class="n">foot2inch</span> <span class="o">=</span> <span class="mi">12</span> <span class="p">(</span><span class="n">inch</span><span class="o">/</span><span class="n">foot</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note that one could also write the last example as</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">foot2inch</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">inch</span><span class="o">/</span><span class="n">foot</span><span class="p">)</span>
</pre></div>
</div>
<p>This shows that it can sometimes take too much clear thinking to specify dimensionless conversion factors. To avoid misunderstanding, conversion factors ( dimensionless factors used to convert between conformable units) can most clearly be written</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UNITS</span> <span class="p">{</span>
    <span class="n">foot2inch</span> <span class="o">=</span> <span class="p">(</span><span class="n">foot</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="n">inch</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
<p>With the above, a statement such as</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="mi">5</span><span class="o">*</span><span class="n">foot2inch</span><span class="o">*</span><span class="n">f</span>
</pre></div>
</div>
<p>makes sense. ie. if f=2 then i should end up as 120 and there is no complaint by the units checker.</p>
</section>
<section id="function-and-argument-units">
<h1>Function and Argument units<a class="headerlink" href="#function-and-argument-units" title="Link to this heading"></a></h1>
<p>Standard mathematical functions are dimensionless and take dimensionless arguments. In those special circumstances (such as printf()) where dimensions don’t matter or where there is some overreaching reason why units should not be checked, one can turn off all unit checking with the statement, <code class="docutils literal notranslate"><span class="pre">UNITSOFF</span></code>. Unit checking is turned back on with UNITSON. An example of this last case are Hodgkin-Huxley rates which involve terms like <code class="docutils literal notranslate"><span class="pre">exp(-v/18)</span></code>. In the model description the argument has the dimensions of mV and it may seem like too much trouble to give all the numbers explicit units as in <code class="docutils literal notranslate"><span class="pre">exp(-v/18(mV))</span></code>.</p>
<p>User declared functions and arguments can be given units with the syntax</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">FUNCTION</span> <span class="n">f</span><span class="p">(</span><span class="n">a1</span> <span class="p">(</span><span class="n">u1</span><span class="p">),</span> <span class="n">a2</span> <span class="p">(</span><span class="n">u2</span><span class="p">),</span> <span class="o">...</span><span class="p">)</span> <span class="p">(</span><span class="n">uf</span><span class="p">)</span> <span class="p">{</span> <span class="n">statements</span> <span class="p">}</span>
<span class="n">PROCEDURE</span> <span class="n">p</span><span class="p">(</span><span class="n">a1</span> <span class="p">(</span><span class="n">u1</span><span class="p">),</span> <span class="n">a2</span> <span class="p">(</span><span class="n">u2</span><span class="p">),</span> <span class="o">...</span><span class="p">)</span> <span class="p">{</span> <span class="n">statements</span> <span class="p">}</span>
</pre></div>
</div>
<p>In every instance, the absence of units implies that the argument or function is dimensionless.</p>
</section>
<section id="units-for-kinetic-blocks">
<h1>Units for KINETIC blocks<a class="headerlink" href="#units-for-kinetic-blocks" title="Link to this heading"></a></h1>
<p>First, it is ascertained that the quantity units are the same for each reactant. Quantity units are the reactant units times that reactant’s COMPARTMENT size. Then the flux units are determined (quantity units / independent units) and it is ascertained that the rate units are consistent.</p>
</section>
<section id="units-in-neuron-models">
<h1>Units in NEURON models<a class="headerlink" href="#units-in-neuron-models" title="Link to this heading"></a></h1>
<p>If a NEURON block exists in the model description the following variables are checked for compatible units</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">name</span>                        <span class="n">units</span>

<span class="n">v</span>                       <span class="n">millivolt</span>
<span class="n">t</span>                       <span class="n">ms</span>
<span class="n">dt</span>                      <span class="n">ms</span>
<span class="n">celsius</span>                     <span class="n">degC</span>
<span class="n">diam</span>                        <span class="n">micron</span>

<span class="n">concentration</span>           <span class="n">milli</span><span class="o">/</span><span class="n">liter</span>
<span class="n">potential</span>               <span class="n">millivolt</span>
<span class="n">current</span> <span class="n">density</span>         <span class="n">milliamp</span><span class="o">/</span><span class="n">cm2</span>
<span class="n">point</span> <span class="n">current</span>           <span class="n">nanoamp</span>
</pre></div>
</div>
<p>Here’s another resource for <a class="reference internal" href="units.html#units-used-in-neuron"><span class="std std-ref">units used in NEURON</span></a>.</p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="nmodls_built_in_functions.html" class="btn btn-neutral float-left" title="NMODL’s built-in functions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="finitialize_handler.html" class="btn btn-neutral float-right" title="FIinitializeHandler" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Duke, Yale and the Blue Brain Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>