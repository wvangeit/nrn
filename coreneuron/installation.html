<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getting CoreNEURON &mdash; NEURON  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=6933245a" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/design-tabs.js?v=36754332"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Running a simulation" href="running-a-simulation.html" />
    <link rel="prev" title="CoreNEURON Compatibility" href="compatibility.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            NEURON
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Building:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cmake_doc/index.html">CMake Build Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/developer.html">Developer Builds</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../videos/index.html">Training videos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../courses/exercises2018.html">NEURON Course Exercises</a></li>
<li class="toctree-l1"><a class="reference external" href="https://neuron.yale.edu/phpBB">The NEURON forum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publications.html">Publications about NEURON</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publications-using-neuron.html">Publications using NEURON</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">NEURON scripting:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../scripting.html">Running Python and HOC scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/index.html">NEURON Python documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hoc/index.html">NEURON HOC documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../otherscripting.html">Other scripting languages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Python tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rxd-tutorials/index.html">Python RXD tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">CoreNEURON</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="compatibility.html">CoreNEURON Compatibility</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Getting CoreNEURON</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installing-with-pip">Installing with <code class="docutils literal notranslate"><span class="pre">pip</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-from-source">Installing from source</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#compiler-selection">Compiler Selection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-by-step-instructions">Step-by-step instructions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="running-a-simulation.html">Running a simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html">Examples</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">NMODLanguage:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../nmodl/index.html">NMODLanguage</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scm/index.html">NEURON SCM and Release</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/index.html">NEURON Development topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doxygen.html">C/C++ API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Removed Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../removed_features.html">Removed Features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Changelog</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">NEURON 8.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html#neuron-8-1">NEURON 8.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html#neuron-8-0">NEURON 8.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html#contributors">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html#feedback-help">Feedback / Help</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">NEURON</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">CoreNEURON</a></li>
      <li class="breadcrumb-item active">Getting CoreNEURON</li>
<li class="wy-breadcrumbs-aside">
    
    
</li>

      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/coreneuron/installation.rst.txt" rel="nofollow"> View page source</a>
      </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="getting-coreneuron">
<span id="id1"></span><h1>Getting CoreNEURON<a class="headerlink" href="#getting-coreneuron" title="Link to this heading"></a></h1>
<p>CoreNEURON is integrated into the NEURON repository, and it is straightforward to enable it when compiling from source using CMake as described in <a class="reference internal" href="../install/install_instructions.html#installing-source-distributions"><span class="std std-ref">Installing Source Distributions</span></a>.</p>
<p>Starting with version 8.1, NEURON also provides Python wheels that include CoreNEURON and, optionally, GPU support. These binary distributions are described in <a class="reference internal" href="../install/install_instructions.html#installing-binary-distribution"><span class="std std-ref">Installing Binary Distribution</span></a>.</p>
<section id="installing-with-pip">
<h2>Installing with <code class="docutils literal notranslate"><span class="pre">pip</span></code><a class="headerlink" href="#installing-with-pip" title="Link to this heading"></a></h2>
<p>This should be as simple as <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">neuron</span></code>, for the latest
release, or <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">neuron-nightly</span></code> to install a snapshot of the
development branch.
You may want to use <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code> to manage your Python package installations.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Between versions 8.1 and 8.2.2 a GPU-enabled wheel was available via <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">neuron-gpu</span></code>
and <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">neuron-gpu-nightly</span></code>.
Due to ease-of-use and maintainability concerns, this has been removed in <a class="reference external" href="https://github.com/neuronsimulator/nrn/pull/2378">#2378</a> until person-power is available to pursue a
more robust solution.
Using the released GPU wheels with custom mechanism files (<code class="docutils literal notranslate"><span class="pre">nrnivmodl</span></code>) requires that you have
the same version of the <a class="reference external" href="https://developer.nvidia.com/hpc-sdk">NVIDIA HPC SDK</a> installed on
your system as was used to build the wheels.
For example, in 8.2.2 this was version 22.1, as can be seen <a class="reference external" href="https://github.com/neuronsimulator/nrn/blob/8.2.2/packaging/python/Dockerfile_gpu#L14">in this file</a>.</p>
</div>
</section>
<section id="installing-from-source">
<h2>Installing from source<a class="headerlink" href="#installing-from-source" title="Link to this heading"></a></h2>
<p>To enable CoreNEURON when building NEURON, simply pass the <code class="docutils literal notranslate"><span class="pre">-DNRN_ENABLE_CORENEURON=ON</span></code> option to CMake.</p>
<p>By default, CoreNEURON will use the <a class="reference external" href="https://github.com/BlueBrain/mod2c">mod2c</a> source-to-source compiler to translate MOD files into C++ code.
To use the more modern <a class="reference external" href="https://github.com/BlueBrain/nmodl">NMODL</a> source-to-source compiler, you should additionally pass <code class="docutils literal notranslate"><span class="pre">-DCORENRN_ENABLE_NMODL=ON</span></code> to CMake.</p>
<p>Most of CoreNEURON’s build dependencies (Bison, Flex, CMake, Python, MPI (optional), …) are already dependencies of NEURON, but you may want to use a specialised compiler to get optimal performance.
To enable GPU support the <a class="reference external" href="https://developer.nvidia.com/hpc-sdk">NVIDIA HPC SDK</a>. is also required.</p>
<section id="compiler-selection">
<h3>Compiler Selection<a class="headerlink" href="#compiler-selection" title="Link to this heading"></a></h3>
<p>CoreNEURON relies on compiler <a class="reference external" href="https://en.wikipedia.org/wiki/Automatic_vectorization">auto-vectorisation</a> to achieve better performance on modern CPUs.
With this release we recommend compilers from <strong>Intel</strong>, <strong>Cray</strong> and, for GPU support, <strong>NVIDIA</strong> (formerly <strong>PGI</strong>).
These compilers are often able to vectorise the code better than
<strong>GCC</strong> or <strong>Clang</strong>, achieving the best possible performance gains.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To benefit from auto-vectorisation it is important to ensure that
your compiler flags allow the compiler to assume that vector CPU
instructions are available. See the discussion of compiler flags
below.</p>
</div>
<p>Computer clusters will typically provide the Intel and/or Cray compilers as modules.
You can also install the Intel compiler by downloading the <a class="reference external" href="https://software.intel.com/content/www/us/en/develop/tools/oneapi/hpc-toolkit.html">oneAPI HPC Toolkit</a>.</p>
<p>CoreNEURON supports also GPU execution based on an <a class="reference external" href="https://en.wikipedia.org/wiki/OpenACC">OpenACC</a> backend.
Currently, the best supported compiler for the OpenACC backend is NVIDIA’s <code class="docutils literal notranslate"><span class="pre">nvc++</span></code>, which is available in the <a class="reference external" href="https://developer.nvidia.com/hpc-sdk">NVIDIA HPC SDK</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental GPU support using OpenMP target offload is also available.
This is the default if the NMODL source-to-source compiler is used, to use OpenACC with NMODL then you should pass <code class="docutils literal notranslate"><span class="pre">-DCORENRN_ENABLE_OPENMP_OFFLOAD=OFF</span></code> to CMake.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Support for non-NVIDIA GPUs is not currently tested.</p>
</div>
</section>
<section id="step-by-step-instructions">
<h3>Step-by-step instructions<a class="headerlink" href="#step-by-step-instructions" title="Link to this heading"></a></h3>
<p>As stated above, the simplest way to enable CoreNEURON is to build it as a git submodule of the NEURON repository.
This section outlines how to do that on a typical system, using the <code class="docutils literal notranslate"><span class="pre">master</span></code> version of NEURON.</p>
<p>First, we clone the latest version of NEURON:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">neuronsimulator</span><span class="o">/</span><span class="n">nrn</span>
<span class="n">cd</span> <span class="n">nrn</span>
</pre></div>
</div>
<p>Then we create a build directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">build</span>
<span class="n">cd</span> <span class="n">build</span>
</pre></div>
</div>
<p>In order to configure NEURON, we need to load the required software dependencies.
If compilers and necessary dependencies are already available in the default paths then you do not need to do anything.
In a cluster or HPC environment a module system is often used to select software.
For example, you might be able to load the compiler, cmake, and python dependencies using <code class="docutils literal notranslate"><span class="pre">module</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">load</span> <span class="n">intel</span> <span class="n">openmpi</span> <span class="n">python</span> <span class="n">cmake</span>
</pre></div>
</div>
<p>And to enable GPU support then you might additionally load NVIDIA HPC SDK and CUDA modules:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">load</span> <span class="n">nvidia</span><span class="o">-</span><span class="n">hpc</span><span class="o">-</span><span class="n">sdk</span> <span class="n">cuda</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Module names are not standardised across different systems, and you will almost certainly need to adjust these names for your system
<code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">avail</span></code> and <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">spider</span></code> may help you to discover the module names that you need to use.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The NVIDIA HPC SDK bundles up to four different versions of CUDA.
You should make sure that the version of CUDA in your environment is compatible with the CUDA driver on your system, otherwise you may encounter errors like
<code class="docutils literal notranslate"><span class="pre">nvlink</span> <span class="pre">fatal:</span> <span class="pre">Input</span> <span class="pre">file</span> <span class="pre">'[snip]'</span> <span class="pre">newer</span> <span class="pre">than</span> <span class="pre">toolkit</span> <span class="pre">(112</span> <span class="pre">vs</span> <span class="pre">110)</span> <span class="pre">(target:</span> <span class="pre">sm_60)</span></code></p>
</div>
<p>Once the required dependencies are loaded, you are ready to run CMake. See <a class="reference internal" href="../install/install_instructions.html#install-neuron-using-cmake"><span class="std std-ref">Install NEURON using CMake</span></a> for more information.
To enable CoreNEURON, don’t forget to add the <code class="docutils literal notranslate"><span class="pre">-DNRN_ENABLE_CORENEURON=ON</span></code> option.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cmake .. \
  -DNRN_ENABLE_CORENEURON=ON \
  -DNRN_ENABLE_INTERVIEWS=OFF \
  -DNRN_ENABLE_RX3D=OFF \
  -DCMAKE_INSTALL_PREFIX=$HOME/install \
  -DCMAKE_C_COMPILER=icc \
  -DCMAKE_CXX_COMPILER=icpc
</pre></div>
</div>
<p>Make sure to replace <code class="docutils literal notranslate"><span class="pre">icc</span></code> and <code class="docutils literal notranslate"><span class="pre">icpc</span></code> with the C/C++ compiler that you are using.
Also change <cite>$HOME/install</cite> to desired installation directory.
CMake tries to find MPI libraries automatically but if needed you can set MPI compiler options <code class="docutils literal notranslate"><span class="pre">-DMPI_C_COMPILER=&lt;mpi</span> <span class="pre">C</span> <span class="pre">compiler&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">-DMPI_CXX_COMPILER=&lt;mpi</span> <span class="pre">CXX</span> <span class="pre">compiler&gt;</span></code>.</p>
<p>If you would like to enable GPU support with OpenACC, make sure to use <code class="docutils literal notranslate"><span class="pre">-DCORENRN_ENABLE_GPU=ON</span></code> option and to use the PGI/NVIDIA HPC SDK compilers with CUDA.
For example,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cmake .. \
  -DNRN_ENABLE_CORENEURON=ON \
  -DCORENRN_ENABLE_GPU=ON \
  -DNRN_ENABLE_INTERVIEWS=OFF \
  -DNRN_ENABLE_RX3D=OFF \
  -DCMAKE_INSTALL_PREFIX=$HOME/install \
  -DCMAKE_C_COMPILER=nvc \
  -DCMAKE_CUDA_COMPILER=nvcc \
  -DCMAKE_CXX_COMPILER=nvc++
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">nvcc</span></code> is provided both by the NVIDIA HPC SDK and by CUDA toolkit
installations, which can lead to fragile and surprising behaviour.
See, for example, <a class="reference external" href="https://forums.developer.nvidia.com/t/nvcc-only-partially-respects-cuda-home-input-file-newer-than-toolkit/182599">this issue</a>.
On some systems it is necessary to load the <code class="docutils literal notranslate"><span class="pre">nvhpc</span></code> module before
the <code class="docutils literal notranslate"><span class="pre">cuda</span></code> module, thereby ensuring that <code class="docutils literal notranslate"><span class="pre">nvcc</span></code> comes from a
CUDA toolkit installation, but your mileage may vary.</p>
</div>
<p>By default the GPU code will be compiled for NVIDIA devices with
compute capability 7.0 (Volta) or 8.0 (Ampere).
This can be steered by passing, for example,
<code class="docutils literal notranslate"><span class="pre">-DCMAKE_CUDA_ARCHITECTURES:STRING=60;70;80</span></code> to CMake.</p>
<p>You can change C/C++ optimisation flags using the  <code class="docutils literal notranslate"><span class="pre">-DCMAKE_C_FLAGS</span></code>,
<code class="docutils literal notranslate"><span class="pre">-DCMAKE_CUDA_FLAGS</span></code> and <code class="docutils literal notranslate"><span class="pre">-DCMAKE_CXX_FLAGS</span></code> options.
These will be appended to the default flags for the CMake build type.
If you need to override the default flags, you can also set
<code class="docutils literal notranslate"><span class="pre">-DCMAKE_BUILD_TYPE=Custom</span></code>, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">DCMAKE_C_FLAGS</span><span class="o">=</span><span class="s2">&quot;-O3 -g&quot;</span> \
<span class="o">-</span><span class="n">DCMAKE_CUDA_FLAGS</span><span class="o">=</span><span class="s2">&quot;-O3&quot;</span> \
<span class="o">-</span><span class="n">DCMAKE_CXX_FLAGS</span><span class="o">=</span><span class="s2">&quot;-O3 -g&quot;</span> \
<span class="o">-</span><span class="n">DCMAKE_BUILD_TYPE</span><span class="o">=</span><span class="n">Custom</span> \
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If the CMake command fails, make sure to delete temporary CMake cache files (<code class="docutils literal notranslate"><span class="pre">CMakeCache.txt</span></code> and <code class="docutils literal notranslate"><span class="pre">CMakeFiles</span></code>, or the entire build directory) before re-running CMake.</p>
</div>
<p>To enable support for the vector instructions available on modern CPUs
and auto-vectorisation optimisations, you may need to pass additional
flags to your compiler.</p>
<p>For compilers that accept GCC-like options, this often involves setting
the <code class="docutils literal notranslate"><span class="pre">-march</span></code> and <code class="docutils literal notranslate"><span class="pre">-mtune</span></code> options.
Other compilers may vary.
If you are building on the same machine that you will be running NEURON
on, you may be able to use <code class="docutils literal notranslate"><span class="pre">-march=native</span></code> and <code class="docutils literal notranslate"><span class="pre">-mtune=native</span></code>, in
which case many compilers will detect the CPU features that are
available on the machine that is compiling NEURON.
Alternatively, you may need to set this explictly, for example:
<code class="docutils literal notranslate"><span class="pre">-march=skylake-avx512</span> <span class="pre">-mtune=skylake-avx512</span></code>.
Note that compute clusters may contain a mix of CPU types.</p>
<p>Please also note the following observations about different compilers,
but ultimately refer to the documentation of the compiler version that
you are using:</p>
<ul class="simple">
<li><p>The handling of <code class="docutils literal notranslate"><span class="pre">-march=native</span></code> in GCC <a class="reference external" href="https://lemire.me/blog/2018/07/25/it-is-more-complicated-than-i-thought-mtune-march-in-gcc/">can be surprising</a>.</p></li>
<li><p>The NVIDIA HPC compiler <code class="docutils literal notranslate"><span class="pre">nvc++</span></code> uses the equivalent of
<code class="docutils literal notranslate"><span class="pre">-march=native</span></code> by default
(<a class="reference external" href="https://docs.nvidia.com/hpc-sdk/compilers/hpc-compilers-ref-guide/index.html#tp">nvc++ documentation</a>).</p></li>
<li><p>The Intel C++ compilers <code class="docutils literal notranslate"><span class="pre">icpc</span></code> and <code class="docutils literal notranslate"><span class="pre">icpx</span></code> support an <code class="docutils literal notranslate"><span class="pre">-x</span></code>
option that enables even more specialised optimisations for Intel
CPUs
(<a class="reference external" href="https://www.intel.com/content/www/us/en/docs/cpp-compiler/developer-guide-reference/2021-8/x-qx.html">icpc documentation</a>,
<a class="reference external" href="https://www.intel.com/content/www/us/en/docs/dpcpp-cpp-compiler/developer-guide-reference/2023-0/x-qx.html">icpx documentation</a>),
this has been seen to give modest performance improvements when using
the <code class="docutils literal notranslate"><span class="pre">mod2c</span></code>, but not <code class="docutils literal notranslate"><span class="pre">NMODL</span></code>, transpiler.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you tell the compiler to target a more modern CPU than you have
available, your NEURON installation may crash with illegal
instruction errors and/or <code class="docutils literal notranslate"><span class="pre">SIGILL</span></code> signals.</p>
</div>
<p>Once the configure step is done, you can build and install the project by running</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">--</span><span class="n">build</span> <span class="o">.</span> <span class="o">--</span><span class="n">parallel</span>
<span class="n">cmake</span> <span class="o">--</span><span class="n">build</span> <span class="o">.</span> <span class="o">--</span><span class="n">target</span> <span class="n">install</span>
</pre></div>
</div>
<p>To use your new installation, you need to modify the <code class="docutils literal notranslate"><span class="pre">PATH</span></code> and <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> environment varaibles:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export PATH=$HOME/install/bin:$PATH
export PYTHONPATH=$HOME/install/lib/python:$PYTHONPATH
</pre></div>
</div>
<p>Now you should be able to import neuron module as</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;from neuron import h; from neuron import coreneuron&quot;</span>
</pre></div>
</div>
<p>If you get <code class="docutils literal notranslate"><span class="pre">ImportError</span></code> then make sure <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> is set correctly, and that <code class="docutils literal notranslate"><span class="pre">python</span></code> is the same version that CMake was configured to use.
You can use <code class="docutils literal notranslate"><span class="pre">-DPYTHON_EXECUTABLE=/path/to/python</span></code> to force CMake to use a particular version.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="compatibility.html" class="btn btn-neutral float-left" title="CoreNEURON Compatibility" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="running-a-simulation.html" class="btn btn-neutral float-right" title="Running a simulation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Duke, Yale and the Blue Brain Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>