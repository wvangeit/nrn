<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BBSaveState &mdash; NEURON  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=6933245a" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/design-tabs.js?v=36754332"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Session Printing and Saving" href="sessionsave.html" />
    <link rel="prev" title="SaveState" href="savstate.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            NEURON
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Building:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../install/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cmake_doc/index.html">CMake Build Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/developer.html">Developer Builds</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../videos/index.html">Training videos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../courses/exercises2018.html">NEURON Course Exercises</a></li>
<li class="toctree-l1"><a class="reference external" href="https://neuron.yale.edu/phpBB">The NEURON forum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../publications.html">Publications about NEURON</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../publications-using-neuron.html">Publications using NEURON</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">NEURON scripting:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../scripting.html">Running Python and HOC scripts</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">NEURON Python documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#quick-links">Quick Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#basic-programming">Basic Programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#model-specification">Model Specification</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#simulation-control">Simulation Control</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="programmatic.html">Programmatic Simulation Control</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="cvode.html">CVode</a></li>
<li class="toctree-l4"><a class="reference internal" href="batch.html">Running and Saving Batch Jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="savstate.html">SaveState</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">BBSaveState</a></li>
<li class="toctree-l4"><a class="reference internal" href="sessionsave.html">Session Printing and Saving</a></li>
<li class="toctree-l4"><a class="reference internal" href="programmatic.html#functions">Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="programmatic.html#finitializehandler">FInitializeHandler</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="stdrun.html">Standard Run Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../compilationoptions.html">Rarely Used Compilation Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../envvariables.html">Environment Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="interpretermanagement.html">Interpreter Management</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#visualization">Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#analysis">Analysis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../hoc/index.html">NEURON HOC documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../otherscripting.html">Other scripting languages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Python tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rxd-tutorials/index.html">Python RXD tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../coreneuron/index.html">CoreNEURON</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">NMODLanguage:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../nmodl/index.html">NMODLanguage</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../scm/index.html">NEURON SCM and Release</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/index.html">NEURON Development topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doxygen.html">C/C++ API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Removed Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../removed_features.html">Removed Features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Changelog</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">NEURON 8.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html#neuron-8-1">NEURON 8.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html#neuron-8-0">NEURON 8.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html#contributors">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html#feedback-help">Feedback / Help</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">NEURON</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">NEURON Python documentation</a></li>
          <li class="breadcrumb-item"><a href="programmatic.html">Programmatic Simulation Control</a></li>
      <li class="breadcrumb-item active">BBSaveState</li>
<li class="wy-breadcrumbs-aside">
    
    
        
        <a href="../../..html/../hoc/simctrl/bbsavestate.html" >  Switch to HOC</a>
    
</li>

      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/python/simctrl/bbsavestate.rst.txt" rel="nofollow"> View page source</a>
      </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p><dl class="docutils"><dt><a href="#BBSaveState" title="Link to this definition">BBSaveState</a></dt><dd><a href="#BBSaveState.ignore" title="Link to this definition">ignore</a> &middot; <a href="#BBSaveState.restore" title="Link to this definition">restore</a> &middot; <a href="#BBSaveState.restore_test" title="Link to this definition">restore_test</a> &middot; <a href="#BBSaveState.save" title="Link to this definition">save</a> &middot; <a href="#BBSaveState.save_test" title="Link to this definition">save_test</a> &middot; <a href="#BBSaveState.vector_play_init" title="Link to this definition">vector_play_init</a></dd></dl></p><section id="bbsavestate">
<span id="id1"></span><h1>BBSaveState<a class="headerlink" href="#bbsavestate" title="Link to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="BBSaveState">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">BBSaveState</span></span><a class="headerlink" href="#BBSaveState" title="Link to this definition"></a></dt>
<dd><p>A more flexible, cell centered version of <a class="reference internal" href="savstate.html#SaveState" title="SaveState"><code class="xref py py-class docutils literal notranslate"><span class="pre">SaveState</span></code></a></p>
<p>The goal is to be able to save state to a file and restore state when the
save and restore contexts have different numbers of processors, different
distribution of gids, and different splitting. It needs to work efficiently
in the context of many GByte file sizes and many thousands of processors.</p>
<p>The class was originally developed with the needs of the BlueBrain
neocortical model in mind.</p>
<p>The following code fragment illustrates a basic test. When ‘restore’
is False, the simulation run stops half way and saves the state and then
continues. When ‘restore’ is True, the simulation begins at the previous
save time and continues to tstop.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="k">def</span> <span class="nf">prun</span><span class="p">(</span><span class="n">tstop</span><span class="p">,</span> <span class="n">restore</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
   <span class="n">pc</span><span class="o">.</span><span class="n">set_maxstep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
   <span class="n">h</span><span class="o">.</span><span class="n">stdinit</span><span class="p">()</span>
   <span class="n">bbss</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">BBSaveState</span><span class="p">()</span>
   <span class="k">if</span> <span class="n">restore</span><span class="p">:</span>
     <span class="n">bbss</span><span class="o">.</span><span class="n">restore</span><span class="p">(</span><span class="s2">&quot;temp.dat&quot;</span><span class="p">)</span>
     <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;after restore t=</span><span class="si">{</span><span class="n">h</span><span class="o">.</span><span class="n">t</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
   <span class="k">else</span><span class="p">:</span>
     <span class="n">pc</span><span class="o">.</span><span class="n">psolve</span><span class="p">(</span><span class="n">tstop</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
     <span class="n">bbss</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;temp.dat&quot;</span><span class="p">)</span>
   <span class="n">pc</span><span class="o">.</span><span class="n">psolve</span><span class="p">(</span><span class="n">tstop</span><span class="p">)</span>
</pre></div>
</div>
<p>In this case, the entire model state for this MPI rank is in the filename for save and restore.</p>
<p>If multisplit is involved, or it is desired to reassemble the model cells on a different set of MPI ranks,
one instead must use <a class="reference internal" href="#BBSaveState.save_test" title="BBSaveState.save_test"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BBSaveState.save_test()</span></code></a>
and <a class="reference internal" href="#BBSaveState.restore_test" title="BBSaveState.restore_test"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BBSaveState.restore_test()</span></code></a>. This allows reassembly of the multisplit subtrees back into
their complete cells to allow different multisplitting and different cell distribution on different ranks.
In this case
files are saved in a subdirectory called “bbss_out” and restored
from a subdirectory called “bbss_in”. A script filter
(see <a class="reference internal" href="#BBSaveState.save_test" title="BBSaveState.save_test"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BBSaveState.save_test()</span></code></a>) is needed to copy and sometimes
concatenate files from the bbss_out to the bbss_in subfolders. These files have
an ascii format.</p>
<p>BBSaveState has a c++ API that allows one to replace the file reader and
writer. See <a class="reference external" href="https://github.com/neuronsimulator/nrn/blob/master/src/nrniv/bbsavestate.cpp">nrn/src/nrniv/bbsavestate.cpp</a>
for a description of this API.
The undocumented methods, <code class="docutils literal notranslate"><span class="pre">save_test_bin</span></code> and <code class="docutils literal notranslate"><span class="pre">restore_test_bin</span></code> demonstrate
the use of this API.</p>
<p>The user can mark a point process IGNORE by calling the method
bbss.ignore(point_process_object)
on all the point processes to be ignored.
The internal list of ignored point processes can be cleared by calling
bbss.ignore()</p>
<p>Because a restore clears the event queue and because one cannot call
finitialize from hoc without vitiating the restore, <a class="reference internal" href="../programming/math/vector.html#Vector.play" title="Vector.play"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Vector.play()</span></code></a> will
not work unless one calls <a class="reference internal" href="#BBSaveState.vector_play_init" title="BBSaveState.vector_play_init"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BBSaveState.vector_play_init()</span></code></a> after a
restore (similarly <a class="reference internal" href="programmatic.html#frecord_init" title="frecord_init"><code class="xref py py-func docutils literal notranslate"><span class="pre">frecord_init()</span></code></a> must be called for <a class="reference internal" href="../programming/math/vector.html#Vector.record" title="Vector.record"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Vector.record()</span></code></a> to work.
Note that it is necessary that Vector.play use a tvec argument with
a first element greater than or equal to the restore time.</p>
<p>Some model restrictions:</p>
<ol class="arabic simple">
<li><p>“Real” cells must have gids.</p></li>
<li><p>Artificial cells can have gids. If not they must be directly connected
to just one synapse (e.g. NetStim -&gt; NetCon -&gt; synapse).</p></li>
<li><p>There is only one spike output port per cell and that is associated
with a base gid.</p></li>
<li><p>NetCon.event in Hoc can be used only with NetCon’s with a None source.</p></li>
</ol>
<p>RANDOM variables declared in a mod file NEURON block have their sequence value saved
automatically.</p>
<p>To allow extra state to be saved, eg. when POINTER and BBCOREPOINTER are used to manage objects,
declare  FUNCTION bbsavestate() within the mechanism.
That function is called when the
mechanism instance is saved and restored.
FUNCTION bbsavestate takes two pointers to double arrays
xdir and xval.
The first double array, xdir, has length 1 and xdir[0] is -1.0, 0.0, or 1.0
If xdir[0] == -1.0, then replace the xdir[0] with the proper number of elements
of xval and return 0.0.  If xdir[0] == 0.0, then save double values into
the xval array (which will be sized correctly from a previous call with
xdir[0] == -1.0). If xdir[0] == 1.0, then the saved double values are in
xval and should be restored to their original values.
The number of elements saved/restored has to be apriori known by the instance
since the size of the xval that was saved is not sent to the instance on
restore.</p>
<p>For example</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="w">   </span><span class="n">FUNCTION</span><span class="w"> </span><span class="nf">bbsavestate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="n">bbsavestate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">   </span><span class="n">VERBATIM</span>
<span class="w">     </span><span class="kt">double</span><span class="w"> </span><span class="o">*</span><span class="n">xdir</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">xval</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">hoc_pgetarg</span><span class="p">();</span>
<span class="w">     </span><span class="n">xdir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hoc_pgetarg</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">     </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">xdir</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">-1.</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">*</span><span class="n">xdir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">     </span><span class="n">xval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hoc_pgetarg</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="w">     </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">xdir</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">0.</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">xval</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">20.</span><span class="p">;</span><span class="w"> </span><span class="n">xval</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">21.</span><span class="p">;}</span>
<span class="w">     </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">xdir</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">xval</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="mf">20.0</span><span class="p">,</span><span class="w"> </span><span class="n">xval</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">21.0</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">   </span><span class="n">ENDVERBATIM</span>
<span class="w">   </span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py method">
<dt class="sig sig-object py" id="BBSaveState.save_test">
<span class="sig-prename descclassname"><span class="pre">BBSaveState.</span></span><span class="sig-name descname"><span class="pre">save_test</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#BBSaveState.save_test" title="Link to this definition"></a></dt>
<dd><dl>
<dt>Syntax:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">.save_test()</span></code></p>
</dd>
<dt>Description:</dt><dd><p>State of the model is saved in files within the subdirectory, <cite>bbss_out</cite>.
The file <cite>bbss_out/tmp</cite> contains the value of t. Other files have the
filename format tmp.&lt;gid&gt;.&lt;rank&gt; . Only in the case of multisplit
is it possible to have the same gid in more than one filename. Note
that the out folder needs to be created by the user prior to a call
to save_test().</p>
<p>To prepare for a restore, the tmp.&lt;gid&gt;.&lt;rank&gt; files should be copied
from the <cite>bbss_out</cite> subfolder to a subfolder called <cite>bbss_in</cite>, with the filename
bbss_in/tmp.&lt;gid&gt; . Each file should begin with a first line that specifies
the number of files in the <cite>out</cite> folder that had the same gid.</p>
<p>The following out2in.sh script shows how to do this (not particularly
efficiently).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env bash</span>
rm<span class="w"> </span>-f<span class="w"> </span>bbss_in/*
cat<span class="w"> </span>bbss_out/tmp<span class="w"> </span>&gt;<span class="w"> </span>bbss_in/tmp
<span class="k">for</span><span class="w"> </span>f<span class="w"> </span><span class="k">in</span><span class="w"> </span>bbss_out/tmp.*.*<span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$f</span>
<span class="w">  </span><span class="nv">i</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$f</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span><span class="s1">&#39;s/.*tmp\.\([0-9]*\)\..*/\1/&#39;</span><span class="sb">`</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$i</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>!<span class="w"> </span>-f<span class="w"> </span>bbss_in/tmp.<span class="nv">$i</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nv">cnt</span><span class="o">=</span><span class="sb">`</span>ls<span class="w"> </span>bbss_out/tmp.<span class="nv">$i</span>.*<span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l<span class="sb">`</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$cnt</span><span class="w"> </span>&gt;<span class="w"> </span>bbss_in/tmp.<span class="nv">$i</span>
<span class="w">    </span>cat<span class="w"> </span>bbss_out/tmp.<span class="nv">$i</span>.*<span class="w"> </span>&gt;&gt;<span class="w"> </span>bbss_in/tmp.<span class="nv">$i</span>
<span class="w">  </span><span class="k">fi</span>
<span class="k">done</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<hr class="docutils" />
<dl class="py method">
<dt class="sig sig-object py" id="BBSaveState.restore_test">
<span class="sig-prename descclassname"><span class="pre">BBSaveState.</span></span><span class="sig-name descname"><span class="pre">restore_test</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#BBSaveState.restore_test" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>Syntax:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">.restore_test()</span></code></p>
</dd>
<dt>Description:</dt><dd><p>State of the model is restored from files within the
subdirectory, “bbss_in”. The file “bbss_in/tmp” supplies the value of t.
Other files have the filename format tmp.&lt;gid&gt; and are read when
that gid is restored. Note that in a multisplit context, the same
“bbss_in/tmp.&lt;gid&gt;” file will be read by multiple ranks, but only the state
assocated with sections that exist on a rank will be restored.</p>
</dd>
</dl>
</dd></dl>

<hr class="docutils" />
<dl class="py method">
<dt class="sig sig-object py" id="BBSaveState.save">
<span class="sig-prename descclassname"><span class="pre">BBSaveState.</span></span><span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#BBSaveState.save" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>Syntax:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">.save(&quot;filename&quot;)</span></code></p>
</dd>
<dt>Description:</dt><dd><p>Saves the state of the entire model (on this rank). This is simpler to use than the <code class="docutils literal notranslate"><span class="pre">save_test</span></code>, <code class="docutils literal notranslate"><span class="pre">restore_test</span></code>
pattern but does not work if one has multisplit cells or desires a different distribution of cells on a different
number of ranks.</p>
</dd>
</dl>
</dd></dl>

<hr class="docutils" />
<dl class="py method">
<dt class="sig sig-object py" id="BBSaveState.restore">
<span class="sig-prename descclassname"><span class="pre">BBSaveState.</span></span><span class="sig-name descname"><span class="pre">restore</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#BBSaveState.restore" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>Syntax:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">.restore(&quot;filename&quot;)</span></code></p>
</dd>
<dt>Description:</dt><dd><p>Restores the state of the entire model (on this rank). This is simpler to use than the <code class="docutils literal notranslate"><span class="pre">save_test</span></code>, <code class="docutils literal notranslate"><span class="pre">restore_test</span></code>
pattern but does not work if one has multisplit cells or desires a different distribution of cells on a different
number of ranks.</p>
</dd>
</dl>
</dd></dl>

<hr class="docutils" />
<dl class="py method">
<dt class="sig sig-object py" id="BBSaveState.ignore">
<span class="sig-prename descclassname"><span class="pre">BBSaveState.</span></span><span class="sig-name descname"><span class="pre">ignore</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#BBSaveState.ignore" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>Syntax:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">.ignore(ppobj)</span></code></p>
</dd>
</dl>
<p>Description:</p>
<blockquote>
<div><p>Point processes can be marked IGNORE
which will skip them on save/restore.
The internal list of these ignored point processes must be the same
on save and restore.</p>
</div></blockquote>
</dd></dl>

<hr class="docutils" />
<dl class="py method">
<dt class="sig sig-object py" id="BBSaveState.vector_play_init">
<span class="sig-prename descclassname"><span class="pre">BBSaveState.</span></span><span class="sig-name descname"><span class="pre">vector_play_init</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#BBSaveState.vector_play_init" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>Syntax:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">.vector_play_init()</span></code></p>
</dd>
<dt>Description:</dt><dd><p>Allow <a class="reference internal" href="../programming/math/vector.html#Vector.play" title="Vector.play"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Vector.play()</span></code></a> to work. Call this method after a restore
if there are any Vector.play in the model.</p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="savstate.html" class="btn btn-neutral float-left" title="SaveState" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="sessionsave.html" class="btn btn-neutral float-right" title="Session Printing and Saving" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Duke, Yale and the Blue Brain Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>