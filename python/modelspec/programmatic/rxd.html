<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Basic Reaction-Diffusion &mdash; NEURON  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=6933245a" />

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/design-tabs.js?v=36754332"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Mathematical functions for rate expressions" href="rxdmath.html" />
    <link rel="prev" title="NEURON Extension to NMODL" href="mechanisms/nmodl2.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            NEURON
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Building:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../install/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cmake_doc/index.html">CMake Build Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install/developer.html">Developer Builds</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../videos/index.html">Training videos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guide/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../courses/exercises2018.html">NEURON Course Exercises</a></li>
<li class="toctree-l1"><a class="reference external" href="https://neuron.yale.edu/phpBB">The NEURON forum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../publications.html">Publications about NEURON</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../publications-using-neuron.html">Publications using NEURON</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">NEURON scripting:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../scripting.html">Running Python and HOC scripts</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">NEURON Python documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../index.html#quick-links">Quick Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#basic-programming">Basic Programming</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html#model-specification">Model Specification</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../guitools.html">Model Specification GUI Tools</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../programmatic.html">Programmatic Model Specification</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="topology.html">Topology</a></li>
<li class="toctree-l4"><a class="reference internal" href="ions.html">Ions</a></li>
<li class="toctree-l4"><a class="reference internal" href="mechanisms.html">Dynamics (Channels, etc…)</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Basic Reaction-Diffusion</a></li>
<li class="toctree-l4"><a class="reference internal" href="network.html">Networks</a></li>
<li class="toctree-l4"><a class="reference internal" href="electrod.html">Electrode</a></li>
<li class="toctree-l4"><a class="reference internal" href="mechtype.html">MechanismType</a></li>
<li class="toctree-l4"><a class="reference internal" href="ste.html">StateTransitionEvent</a></li>
<li class="toctree-l4"><a class="reference internal" href="obsoletestimuli.html">Obsolete Stimuli</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#simulation-control">Simulation Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#visualization">Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#analysis">Analysis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../hoc/index.html">NEURON HOC documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../otherscripting.html">Other scripting languages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/index.html">Python tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rxd-tutorials/index.html">Python RXD tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../coreneuron/index.html">CoreNEURON</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">NMODLanguage:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../nmodl/index.html">NMODLanguage</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../scm/index.html">NEURON SCM and Release</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev/index.html">NEURON Development topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doxygen.html">C/C++ API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Removed Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../removed_features.html">Removed Features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Changelog</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html">NEURON 8.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html#neuron-8-1">NEURON 8.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html#neuron-8-0">NEURON 8.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html#contributors">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html#feedback-help">Feedback / Help</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">NEURON</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">NEURON Python documentation</a></li>
          <li class="breadcrumb-item"><a href="../programmatic.html">Programmatic Model Specification</a></li>
      <li class="breadcrumb-item active">Basic Reaction-Diffusion</li>
<li class="wy-breadcrumbs-aside">
    
    
        
        <a href="../../../..html/../hoc/modelspec/programmatic/rxd.html" >  Switch to HOC</a>
    
</li>

      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/python/modelspec/programmatic/rxd.rst.txt" rel="nofollow"> View page source</a>
      </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p><a href="#rxd.export.sbml" title="Link to this definition">rxd.export.sbml</a> &middot; <a href="#rxd.nthread" title="Link to this definition">rxd.nthread</a> &middot; <a href="#rxd.re_init" title="Link to this definition">rxd.re_init</a> &middot; <a href="#rxd.set_solve_type" title="Link to this definition">rxd.set_solve_type</a></p><p><dl class="docutils"><dt><a href="#rxd.DistributedBoundary" title="Link to this definition">rxd.DistributedBoundary</a></dt><dd></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.Extracellular" title="Link to this definition">rxd.Extracellular</a></dt><dd></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.FixedCrossSection" title="Link to this definition">rxd.FixedCrossSection</a></dt><dd></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.FixedPerimeter" title="Link to this definition">rxd.FixedPerimeter</a></dt><dd></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.FractionalVolume" title="Link to this definition">rxd.FractionalVolume</a></dt><dd></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.MultiCompartmentReaction" title="Link to this definition">rxd.MultiCompartmentReaction</a></dt><dd></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.node.Node" title="Link to this definition">rxd.node.Node</a></dt><dd><a href="#rxd.node.Node.include_flux" title="Link to this definition">include_flux</a> &middot; <a href="#rxd.node.Node.satisfies" title="Link to this definition">satisfies</a></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.node.Node1D" title="Link to this definition">rxd.node.Node1D</a></dt><dd><a href="#rxd.node.Node1D.satisfies" title="Link to this definition">satisfies</a></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.node.Node3D" title="Link to this definition">rxd.node.Node3D</a></dt><dd><a href="#rxd.node.Node3D.satisfies" title="Link to this definition">satisfies</a></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.node.NodeExtracellular" title="Link to this definition">rxd.node.NodeExtracellular</a></dt><dd><a href="#rxd.node.NodeExtracellular.satisfies" title="Link to this definition">satisfies</a></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.nodelist.NodeList" title="Link to this definition">rxd.nodelist.NodeList</a></dt><dd><a href="#rxd.nodelist.NodeList.include_flux" title="Link to this definition">include_flux</a> &middot; <a href="#rxd.nodelist.NodeList.value_to_grid" title="Link to this definition">value_to_grid</a></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.Parameter" title="Link to this definition">rxd.Parameter</a></dt><dd></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.Rate" title="Link to this definition">rxd.Rate</a></dt><dd></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.Reaction" title="Link to this definition">rxd.Reaction</a></dt><dd></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.Region" title="Link to this definition">rxd.Region</a></dt><dd></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.RxDException" title="Link to this definition">rxd.RxDException</a></dt><dd></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.ScalableBorder" title="Link to this definition">rxd.ScalableBorder</a></dt><dd></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.Shell" title="Link to this definition">rxd.Shell</a></dt><dd></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.Species" title="Link to this definition">rxd.Species</a></dt><dd><a href="#rxd.Species.concentrations" title="Link to this definition">concentrations</a> &middot; <a href="#rxd.Species.defined_on_region" title="Link to this definition">defined_on_region</a> &middot; <a href="#rxd.Species.indices" title="Link to this definition">indices</a> &middot; <a href="#rxd.Species.re_init" title="Link to this definition">re_init</a></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.State" title="Link to this definition">rxd.State</a></dt><dd></dd></dl></p><section id="basic-reaction-diffusion">
<span id="neuron-rxd"></span><h1>Basic Reaction-Diffusion<a class="headerlink" href="#basic-reaction-diffusion" title="Link to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>NEURON provides the <code class="docutils literal notranslate"><span class="pre">rxd</span></code> submodule to simplify and standardize the specification of
models incorporating reaction-diffusion dynamics, including ion accumulation. To load
this module, use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">neuron</span> <span class="kn">import</span> <span class="n">rxd</span>
</pre></div>
</div>
<p>Note: In older code, you may find <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">neuron</span> <span class="pre">import</span> <span class="pre">crxd</span> <span class="pre">as</span> <span class="pre">rxd</span></code> but this is equivalent to the above as <code class="docutils literal notranslate"><span class="pre">crxd</span></code> has been an alias for <code class="docutils literal notranslate"><span class="pre">rxd</span></code> for several years.</p>
<p>In general, a reaction-diffusion model specification involves answering three conceptual questions:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#rxd-where"><span class="std std-ref">Where</span></a> the dynamics are occurring (specified using an <a class="reference internal" href="#rxd.Region" title="rxd.Region"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Region</span></code></a> or <a class="reference internal" href="#rxd.Extracellular" title="rxd.Extracellular"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Extracellular</span></code></a>)</p></li>
<li><p><a class="reference internal" href="#rxd-who"><span class="std std-ref">Who</span></a> is involved (specified using an <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a> or <a class="reference internal" href="#rxd.State" title="rxd.State"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.State</span></code></a>)</p></li>
<li><p><a class="reference internal" href="#rxd-what"><span class="std std-ref">What</span></a> the reactions are (specified using <a class="reference internal" href="#rxd.Reaction" title="rxd.Reaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Reaction</span></code></a>, <a class="reference internal" href="#rxd.Rate" title="rxd.Rate"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Rate</span></code></a>, or <a class="reference internal" href="#rxd.MultiCompartmentReaction" title="rxd.MultiCompartmentReaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.MultiCompartmentReaction</span></code></a>)</p></li>
</ol>
<p>Another key class is <a class="reference internal" href="#rxd.Parameter" title="rxd.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Parameter</span></code></a> for defining spatially varying parameters.
Integration options may be specified using <a class="reference internal" href="#rxd.set_solve_type" title="rxd.set_solve_type"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxd.set_solve_type()</span></code></a>.</p>
<section id="related-resources">
<h3>Related resources<a class="headerlink" href="#related-resources" title="Link to this heading"></a></h3>
<p>See also our <a class="reference external" href="../../../rxd-tutorials/index.html">reaction-diffusion tutorials</a>,
the discussion about <a class="reference internal" href="../../../guide/bio_faq.html#ion-channel-accumulation-bio-faq"><span class="std std-ref">ion accumulation</span></a> and
<a class="reference internal" href="../../../guide/bio_faq.html#ion-diffusion-bio-faq"><span class="std std-ref">ion diffusion</span></a>, and the 2021 NetPyNE course
<a class="reference internal" href="../../../videos/netpyne-course-2021.html#netpyne-neuron-rxd-video"><span class="std std-ref">lecture and exercise</span></a> videos on reaction-diffusion in NEURON.</p>
</section>
</section>
<section id="specifying-the-domain">
<span id="rxd-where"></span><h2>Specifying the domain<a class="headerlink" href="#specifying-the-domain" title="Link to this heading"></a></h2>
<p>NEURON provides two main classes for defining the domain where a given set of reaction-diffusion rules
applies: <a class="reference internal" href="#rxd.Region" title="rxd.Region"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Region</span></code></a> and <a class="reference internal" href="#rxd.Extracellular" title="rxd.Extracellular"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Extracellular</span></code></a> for intra- and extracellular domains,
respectively. Once defined, they are generally interchangeable in the specification of the species involved,
the reactions, etc. The exact shape of intracellular regions may be specified using any of a number of
geometries, but the default is to include the entire intracellular space.</p>
<section id="intracellular-regions-and-regions-in-frankenhauser-hodgkin-space">
<h3>Intracellular regions and regions in Frankenhauser-Hodgkin space<a class="headerlink" href="#intracellular-regions-and-regions-in-frankenhauser-hodgkin-space" title="Link to this heading"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="rxd.Region">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">Region</span></span><a class="headerlink" href="#rxd.Region" title="Link to this definition"></a></dt>
<dd><p>Declares a conceptual intracellular region of the neuron.</p>
<p>Syntax:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">rxd</span><span class="o">.</span><span class="n">Region</span><span class="p">(</span><span class="n">secs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nrn_region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">geometry</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dimension</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dx</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>In NEURON 7.4+, <code class="docutils literal notranslate"><span class="pre">secs</span></code> is optional at initial region declaration, but it
must be specified before the reaction-diffusion model is instantiated.</p>
<p>Here:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">secs</span></code> is any Python iterable of sections (e.g. <code class="docutils literal notranslate"><span class="pre">soma.wholetree()</span></code> or <code class="docutils literal notranslate"><span class="pre">[soma,</span> <span class="pre">apical,</span> <span class="pre">basal]</span></code> or <code class="docutils literal notranslate"><span class="pre">h.allsec()</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nrn_region</span></code> specifies the classic NEURON region associated with this object and must be either <code class="docutils literal notranslate"><span class="pre">&quot;i&quot;</span></code> for the region just inside the plasma membrane, <code class="docutils literal notranslate"><span class="pre">&quot;o&quot;</span></code> for the region just outside the plasma membrane or <code class="docutils literal notranslate"><span class="pre">None</span></code> for none of the above.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> is the name of the region (e.g. <code class="docutils literal notranslate"><span class="pre">cyt</span></code> or <code class="docutils literal notranslate"><span class="pre">er</span></code>); this has no effect on the simulation results but it is helpful for debugging</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dx</span></code> specifies the 3D voxel edge length. Models in NEURON 9.0+ allow multiple values of dx per model, as long as 3D sections with different <code class="docutils literal notranslate"><span class="pre">dx</span></code> values do not connect to each other. If this condition is not true, an exception is raised during simulation. (Prior to NEURON 9.0, behavior of models with multiple values of <code class="docutils literal notranslate"><span class="pre">dx</span></code> is undefined, and no error checking was provided.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dimension</span></code> deprecated; do not use</p></li>
</ul>
</div></blockquote>
<dl class="py property">
<dt class="sig sig-object py" id="rxd.Region.nrn_region">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">nrn_region</span></span><a class="headerlink" href="#rxd.Region.nrn_region" title="Link to this definition"></a></dt>
<dd><p>Get or set the classic NEURON region associated with this object.</p>
<p>There are three possible values:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'i'</span></code> – just inside the plasma membrane</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'o'</span></code> – just outside the plasma membrane</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">None</span></code> – none of the above</p></li>
</ul>
</div></blockquote>
<p><em>Setting requires NEURON 7.4+, and then only before the reaction-diffusion model is instantiated.</em></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.Region.secs">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">secs</span></span><a class="headerlink" href="#rxd.Region.secs" title="Link to this definition"></a></dt>
<dd><p>Get or set the sections associated with this region.</p>
<p>The sections may be expressed as a NEURON <a class="reference internal" href="topology/seclist.html#SectionList" title="SectionList"><code class="xref py py-class docutils literal notranslate"><span class="pre">SectionList</span></code></a> or as any Python
iterable of sections.</p>
<dl class="simple">
<dt>Note: The return value is a copy of the internal section list; modifying</dt><dd><p>it will not change the Region.</p>
</dd>
</dl>
<p><em>Setting requires NEURON 7.4+ and allowed only before the reaction-diffusion model is instantiated.</em></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.Region.geometry">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">geometry</span></span><a class="headerlink" href="#rxd.Region.geometry" title="Link to this definition"></a></dt>
<dd><p>Get or set the geometry associated with this region.</p>
<p>Setting the geometry to <code class="docutils literal notranslate"><span class="pre">None</span></code> will cause it to default to <code class="docutils literal notranslate"><span class="pre">rxd.geometry.inside</span></code>.</p>
<p><em>Added in NEURON 7.4. Setting allowed only before the reaction-diffusion model is instantiated.</em></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.Region.name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#rxd.Region.name" title="Link to this definition"></a></dt>
<dd><p>Get or set the Region’s name.</p>
<p><em>Added in NEURON 7.4.</em></p>
</dd></dl>

</dd></dl>

<section id="for-specifying-the-geometry">
<h4>For specifying the geometry<a class="headerlink" href="#for-specifying-the-geometry" title="Link to this heading"></a></h4>
<p>NEURON provides several built-in geometries for intracellular simulation that may be specified
by passing a <code class="docutils literal notranslate"><span class="pre">geometry</span></code> argument to the <a class="reference internal" href="#rxd.Region" title="rxd.Region"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Region</span></code></a> constructor. New region shapes may
be defined by deriving from <code class="docutils literal notranslate"><span class="pre">neuron.rxd.geometry.RxDGeometry</span></code>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="rxd.inside">
<span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">inside</span></span><a class="headerlink" href="#rxd.inside" title="Link to this definition"></a></dt>
<dd><p>The entire region inside the cytosol. This is the default. Use via e.g.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cyt</span> <span class="o">=</span> <span class="n">rxd</span><span class="o">.</span><span class="n">Region</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">allsec</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;cyt&quot;</span><span class="p">,</span> <span class="n">nrn_region</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="n">geometry</span><span class="o">=</span><span class="n">rxd</span><span class="o">.</span><span class="n">inside</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="rxd.membrane">
<span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">membrane</span></span><a class="headerlink" href="#rxd.membrane" title="Link to this definition"></a></dt>
<dd><p>The entire plasma membrane.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cyt</span> <span class="o">=</span> <span class="n">rxd</span><span class="o">.</span><span class="n">Region</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">allsec</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;cyt&quot;</span><span class="p">,</span> <span class="n">nrn_region</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="n">geometry</span><span class="o">=</span><span class="n">rxd</span><span class="o">.</span><span class="n">membrane</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="rxd.DistributedBoundary">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">DistributedBoundary</span></span><a class="headerlink" href="#rxd.DistributedBoundary" title="Link to this definition"></a></dt>
<dd><p>Boundary that scales with area.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">rxd</span><span class="o">.</span><span class="n">DistributedBoundary</span><span class="p">(</span><span class="n">area_per_vol</span><span class="p">,</span> <span class="n">perim_per_area</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>area_per_vol is the area of the boundary as a function of the volume
containing it. e.g.</p>
<p><code class="docutils literal notranslate"><span class="pre">g</span> <span class="pre">=</span> <span class="pre">rxd.DistributedBoundary(2)</span></code> defines a geometry with 2 um^2 of area per
every um^3 of volume.</p>
<p>perim_per_area is the perimeter (in µm) per 1 µm^2 cross section of the
volume. For use in reaction-diffusion problems, it may be safely omitted
if and only if no species in the corresponding region diffuses.</p>
<p>This is often useful for separating <a class="reference internal" href="#rxd.FractionalVolume" title="rxd.FractionalVolume"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.FractionalVolume</span></code></a> objects.</p>
<p>It is assumed that the area is always strictly on the interior.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="rxd.FractionalVolume">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">FractionalVolume</span></span><a class="headerlink" href="#rxd.FractionalVolume" title="Link to this definition"></a></dt>
<dd><p>Defines a geometry occupying a set fraction of the cross-sectional area.
e.g. perhaps the cytosol would occupy 0.83 of the cross-section (and all the surface)
but the ER would only occupy 0.17 of the cross-section and none of the surface.</p>
<p>Syntax:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">rxd</span><span class="o">.</span><span class="n">FractionalVolume</span><span class="p">(</span><span class="n">volume_fraction</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">surface_fraction</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">neighbor_areas_fraction</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="rxd.Shell">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">Shell</span></span><a class="headerlink" href="#rxd.Shell" title="Link to this definition"></a></dt>
<dd><p>Defines a radial shell inside or outside of the plasma membrane. This is sometimes used to simulate
a 2D-style diffusion where molecules move both longitudinally and into/out of the center of the dendrite.
Consider using 3D simulation instead, which is better able to represent branch point dynamics.</p>
<p>Syntax:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">rxd</span><span class="o">.</span><span class="n">Shell</span><span class="p">(</span><span class="n">lo</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">hi</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>Example:</p>
<blockquote>
<div><p>See the <a class="reference external" href="https://neuron.yale.edu/neuron/docs/radial-diffusion">radial diffusion</a> tutorial.</p>
</div></blockquote>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="rxd.FixedCrossSection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">FixedCrossSection</span></span><a class="headerlink" href="#rxd.FixedCrossSection" title="Link to this definition"></a></dt>
<dd><p>Syntax:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">rxd</span><span class="o">.</span><span class="n">FixedCrossSection</span><span class="p">(</span><span class="n">cross_area</span><span class="p">,</span> <span class="n">surface_area</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="rxd.FixedPerimeter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">FixedPerimeter</span></span><a class="headerlink" href="#rxd.FixedPerimeter" title="Link to this definition"></a></dt>
<dd><p>Syntax:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">rxd</span><span class="o">.</span><span class="n">FixedPerimeter</span><span class="p">(</span><span class="n">perimeter</span><span class="p">,</span> <span class="n">on_cell_surface</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="rxd.ScalableBorder">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">ScalableBorder</span></span><a class="headerlink" href="#rxd.ScalableBorder" title="Link to this definition"></a></dt>
<dd><p>A membrane that scales proportionally with the diameter</p>
<p>Example use:</p>
<ul class="simple">
<li><p>the boundary between radial shells</p></li>
</ul>
<p>Sometimes useful for the boundary between <a class="reference internal" href="#rxd.FractionalVolume" title="rxd.FractionalVolume"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.FractionalVolume</span></code></a> objects, but
see also <a class="reference internal" href="#rxd.DistributedBoundary" title="rxd.DistributedBoundary"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.DistributedBoundary</span></code></a> which scales with area.</p>
</dd></dl>

</section>
</section>
</section>
<section id="extracellular-regions">
<h2>Extracellular regions<a class="headerlink" href="#extracellular-regions" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="rxd.Extracellular">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">Extracellular</span></span><a class="headerlink" href="#rxd.Extracellular" title="Link to this definition"></a></dt>
<dd><p>Declare a extracellular region to be simulated in 3D;
unlike <a class="reference internal" href="#rxd.Region" title="rxd.Region"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Region</span></code></a>, this <em>always</em> describes the extracellular region.</p>
<p>Syntax:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">rxd</span><span class="o">.</span><span class="n">Extracellular</span><span class="p">(</span><span class="n">xlo</span><span class="p">,</span> <span class="n">ylo</span><span class="p">,</span> <span class="n">zlo</span><span class="p">,</span> <span class="n">xhi</span><span class="p">,</span> <span class="n">yhi</span><span class="p">,</span> <span class="n">zhi</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span>
                      <span class="n">volume_fraction</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tortuosity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">permeability</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>Here:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">xlo</span></code>, …, <code class="docutils literal notranslate"><span class="pre">zhi</span></code> – define the bounding box of the domain; it should typically contain the entire morphology… by default NEURON assumes reflective (Neumann) boundary conditions, so you may want the box to extend well beyond the cell morphology depending on your use case</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dx</span></code> – voxel edge size in µm</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tortuosity</span></code> – increase factor in path length due to obstacles, effective diffusion coefficient d/tortuosity^2; either a single value for the whole region or a Vector giving a value for each voxel. Default is 1 (no change).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">volume_fraction</span></code> – the free fraction of extracellular space; a volume_fraction of 1 assumes no cells; lower values are probably warranted for most simulations</p></li>
</ul>
</div></blockquote>
</div></blockquote>
<p>Example:</p>
<blockquote>
<div><p>A tutorial demonstrating extracellular diffusion
is available <a class="reference external" href="../../../rxd-tutorials/extracellular.html">here</a>.</p>
</div></blockquote>
</dd></dl>

<hr class="docutils" />
</section>
<section id="defining-proteins-ions-etc">
<span id="rxd-who"></span><h2>Defining proteins, ions, etc<a class="headerlink" href="#defining-proteins-ions-etc" title="Link to this heading"></a></h2>
<p>Values that are distributed spatially on an <a class="reference internal" href="#rxd.Region" title="rxd.Region"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Region</span></code></a> or <a class="reference internal" href="#rxd.Extracellular" title="rxd.Extracellular"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Extracellular</span></code></a> may be defined using
an <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a> if they represent things that change and diffuse, an <a class="reference internal" href="#rxd.State" title="rxd.State"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.State</span></code></a> if they’re in fixed locations but changeable
(e.g. gates in an IP3R), or an <a class="reference internal" href="#rxd.Parameter" title="rxd.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Parameter</span></code></a> if
they are just fixed values.</p>
<dl class="py class">
<dt class="sig sig-object py" id="rxd.Species">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">Species</span></span><a class="headerlink" href="#rxd.Species" title="Link to this definition"></a></dt>
<dd><p>Declare an ion/protein/etc that can react and diffuse.</p>
<p>Syntax:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">rxd</span><span class="o">.</span><span class="n">Species</span><span class="p">(</span><span class="n">regions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">d</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">charge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="n">initial</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">atolscale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">ecs_boundary_conditions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">represents</span><span class="o">=</span><span class="kc">None</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Parameters:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">regions</span></code> – a Region or list of Region objects containing the species</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">d</span></code> – the diffusion constant of the species (optional; default is 0, i.e. non-diffusing)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> – the name of the Species; used for syncing with NMODL and HOC (optional; default is none)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">charge</span></code> – the charge of the Species (optional; default is 0)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">initial</span></code> – the initial concentration or None (if None, then imports from HOC if the species is defined at finitialize, else 0); can be specified as a constant or as a function of an <code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Node</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">atolscale</span></code> – scale factor for absolute tolerance in variable step integrations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ecs_boundary_conditions</span></code> – if Extracellular rxd is used ecs_boundary_conditions=None for zero flux boundaries or if ecs_boundary_conditions=the concentration at the boundary.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">represents</span></code> – optionally provide CURIE (Compact URI) to annotate what the species represents e.g. CHEBI:29101 for sodium(1+)</p></li>
</ul>
</div></blockquote>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Charge must match the charges specified in NMODL files for the same ion, if any. Common species charges include: sodium (+1), potassium (+1), calcium (+2), magnesium (+2), chloride (-1).</p>
<p>You probably want to adjust atolscale for species present at low concentrations (e.g. calcium).</p>
<p>NEURON does not require any specific ontology for identifiers, however CHEBI contains identifiers for many substances of interest in reaction-diffusion modeling. A number of ontology search providers are available on the internet, including <a class="reference external" href="https://bioportal.bioontology.org/search">BioPortal</a>.</p>
<p>To refer to a given Species restricted to a certain region, specify the region in square brackets. e.g. <code class="docutils literal notranslate"><span class="pre">er_calcium</span> <span class="pre">=</span> <span class="pre">ca[er]</span></code>.</p>
</div>
<dl class="py property">
<dt class="sig sig-object py" id="rxd.Species.nodes">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">nodes</span></span><a class="headerlink" href="#rxd.Species.nodes" title="Link to this definition"></a></dt>
<dd><p>An <a class="reference internal" href="#rxd.nodelist.NodeList" title="rxd.nodelist.NodeList"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.nodelist.NodeList</span></code></a> of all the nodes corresponding to the species.</p>
<p>This can then be further restricted using the callable property of NodeList objects.</p>
<p>Example: All nodes from <code class="docutils literal notranslate"><span class="pre">sp</span></code> on the Section <code class="docutils literal notranslate"><span class="pre">dend</span></code>:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nodes_on_dend</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">nodes</span><span class="p">(</span><span class="n">dend</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>Example: All nodes from <code class="docutils literal notranslate"><span class="pre">sp</span></code> on the Segment <code class="docutils literal notranslate"><span class="pre">dend(0.5)</span></code>:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nodes_on_dend_center</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">nodes</span><span class="p">(</span><span class="n">dend</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span>
</pre></div>
</div>
<p>For 1D simulation with a species defined on 1 region, this will be a <a class="reference internal" href="#rxd.nodelist.NodeList" title="rxd.nodelist.NodeList"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.nodelist.NodeList</span></code></a> of length 1 (or 0 if the species is not defined on the segment); for 3D simulation or with multiple regions, the list may be longer and further filtering may be required.</p>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The code</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">node_list</span> <span class="o">=</span> <span class="n">ca</span><span class="p">[</span><span class="n">cyt</span><span class="p">]</span><span class="o">.</span><span class="n">nodes</span>
</pre></div>
</div>
<p>is more efficient than the otherwise equivalent</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">node_list</span> <span class="o">=</span> <span class="n">ca</span><span class="o">.</span><span class="n">nodes</span><span class="p">(</span><span class="n">cyt</span><span class="p">)</span>
</pre></div>
</div>
<p>because the former only creates the <code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Node</span></code> objects belonging to the restriction <code class="docutils literal notranslate"><span class="pre">ca[cyt]</span></code> whereas the second option constructs all <code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Node</span></code> objects belonging to the <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a> <code class="docutils literal notranslate"><span class="pre">ca</span></code> and then culls the list to only include those also belonging to the <a class="reference internal" href="#rxd.Region" title="rxd.Region"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Region</span></code></a> cyt.</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.Species.states">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">states</span></span><a class="headerlink" href="#rxd.Species.states" title="Link to this definition"></a></dt>
<dd><p>A list of a copy of the state values corresponding to this species; modifying the values in the list will not change the values used in the simulation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rxd.Species.re_init">
<span class="sig-name descname"><span class="pre">re_init</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rxd.Species.re_init" title="Link to this definition"></a></dt>
<dd><p>Syntax:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sp</span><span class="o">.</span><span class="n">re_init</span><span class="p">()</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">sp</span></code> is an instance of an <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a>.</p>
</div></blockquote>
<p>Reinitialize the rxd concentration of this species to match the NEURON grid. Used when e.g. <code class="docutils literal notranslate"><span class="pre">cai</span></code> is modified directly instead of through a corresponding <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rxd.Species.concentrations">
<span class="sig-name descname"><span class="pre">concentrations</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rxd.Species.concentrations" title="Link to this definition"></a></dt>
<dd><p>Deprecated. Do not use.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.Species.charge">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">charge</span></span><a class="headerlink" href="#rxd.Species.charge" title="Link to this definition"></a></dt>
<dd><p>Get or set the charge of the Species.</p>
<p>Setting was added in NEURON 7.4 and is allowed only before the reaction-diffusion model is instantiated.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.Species.regions">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">regions</span></span><a class="headerlink" href="#rxd.Species.regions" title="Link to this definition"></a></dt>
<dd><p>Get or set the regions where the Species is present.</p>
<p>Setting was added in NEURON 7.4 and is allowed only before the reaction-diffusion model is instantiated.
Getting was added in NEURON 7.5.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rxd.Species.indices">
<span class="sig-name descname"><span class="pre">indices</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rxd.Species.indices" title="Link to this definition"></a></dt>
<dd><p>Return the indices corresponding to this species in the given region.</p>
<p>This is occasionally useful, but it’s generally best to avoid explicit indexing when developing models.</p>
<p>Syntax:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sp</span><span class="o">.</span><span class="n">indices</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">secs</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>where <code class="docutils literal notranslate"><span class="pre">sp</span></code> is an instance of an <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">r</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>, then returns all species indices.
If <code class="docutils literal notranslate"><span class="pre">r</span></code> is a list of regions return indices for only those sections that are on all the regions.
If <code class="docutils literal notranslate"><span class="pre">secs</span></code> is a set return all indices on the regions for those sections.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rxd.Species.defined_on_region">
<span class="sig-name descname"><span class="pre">defined_on_region</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rxd.Species.defined_on_region" title="Link to this definition"></a></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if the <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a> <code class="docutils literal notranslate"><span class="pre">sp</span></code> is present on <code class="docutils literal notranslate"><span class="pre">r</span></code>, else <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p>Syntax:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">defined_on_region</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.Species.name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#rxd.Species.name" title="Link to this definition"></a></dt>
<dd><p>Get or set the name of the Species.</p>
<p>This is used only for syncing with the non-reaction-diffusion parts of NEURON (NMODL, HOC).</p>
<p><em>Setting requires NEURON 7.4+, and then only before the reaction-diffusion model is instantiated.</em></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="rxd.State">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">State</span></span><a class="headerlink" href="#rxd.State" title="Link to this definition"></a></dt>
<dd><p>Like an <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a> but indicates the semantics
of something that is not intended to diffuse.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="rxd.Parameter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">Parameter</span></span><a class="headerlink" href="#rxd.Parameter" title="Link to this definition"></a></dt>
<dd><p>Declares a parameter, that can be used in place of a <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a>, but unlike <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a> a parameter will not change.</p>
<p>Syntax:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">rxd</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="n">regions</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">charge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                  <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">represents</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>Parameters:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">regions</span></code> – a <a class="reference internal" href="#rxd.Region" title="rxd.Region"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Region</span></code></a> or list of <a class="reference internal" href="#rxd.Region" title="rxd.Region"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Region</span></code></a> objects containing the parameter</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> – the name of the parameter; used for syncing with NMODL and HOC (optional; default is none)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">charge</span></code> – the charge of the Parameter (optional, probably only rarely needed; default is 0)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code> – the value or None (if None, then imports from HOC if the parameter is defined at <a class="reference internal" href="../../simctrl/programmatic.html#finitialize" title="finitialize"><code class="xref py py-func docutils literal notranslate"><span class="pre">finitialize()</span></code></a>, else 0)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">represents</span></code> – optionally provide CURIE (Compact URI) to annotate what the parameter represents e.g. CHEBI:29101 for sodium(1+)</p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Charge must match the charges specified in NMODL files for the same ion, if any.</p>
<p>Attempting to specify a non-zero diffusion rate for an <a class="reference internal" href="#rxd.Parameter" title="rxd.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Parameter</span></code></a> will raise an <a class="reference internal" href="#rxd.RxDException" title="rxd.RxDException"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.RxDException</span></code></a>.</p>
</div>
</dd></dl>

</section>
<section id="defining-reactions">
<span id="rxd-what"></span><h2>Defining reactions<a class="headerlink" href="#defining-reactions" title="Link to this heading"></a></h2>
<p>NEURON provides three classes for specifying reaction dynamics: <a class="reference internal" href="#rxd.Reaction" title="rxd.Reaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Reaction</span></code></a> for single-compartment (local)
reactions; <a class="reference internal" href="#rxd.MultiCompartmentReaction" title="rxd.MultiCompartmentReaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.MultiCompartmentReaction</span></code></a> for reactions spanning multiple compartments (e.g. a pump that
moves calcium from the cytosol into the ER changes concentration in two regions), and <a class="reference internal" href="#rxd.Rate" title="rxd.Rate"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Rate</span></code></a> for
specifying changes to a state variable directly by an expression to be added to a differential equation.
Developers may introduce new forms of reaction specification by subclassing
<code class="docutils literal notranslate"><span class="pre">neuron.rxd.generalizedReaction.GeneralizedReaction</span></code>, but this is not necessary for typical modeling usage.</p>
<p>It is sometimes necessary to build rate expressions including mathematical functions. To do so, use the
functions defined in <code class="docutils literal notranslate"><span class="pre">neuron.rxd.rxdmath</span></code> as listed <a class="reference internal" href="rxdmath.html#rxdmath-prog-ref"><span class="std std-ref">below</span></a>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="rxd.Reaction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">Reaction</span></span><a class="headerlink" href="#rxd.Reaction" title="Link to this definition"></a></dt>
<dd><p>Syntax:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">r1</span> <span class="o">=</span> <span class="n">rxd</span><span class="o">.</span><span class="n">Reaction</span><span class="p">(</span><span class="n">reactant_sum</span><span class="p">,</span> <span class="n">product_sum</span><span class="p">,</span> <span class="n">forward_rate</span><span class="p">,</span>
                  <span class="n">backward_rate</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">regions</span><span class="o">=</span><span class="n">region_list</span><span class="p">,</span> <span class="n">custom_dynamics</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>Here:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">reactant_sum</span></code> is a combination of <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a>, <a class="reference internal" href="#rxd.State" title="rxd.State"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.State</span></code></a>,
<a class="reference internal" href="#rxd.Parameter" title="rxd.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Parameter</span></code></a>, e.g. <code class="docutils literal notranslate"><span class="pre">ca</span> <span class="pre">+</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">cl</span></code> representing the left-hand-side of
the reaction.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">product_sum</span></code> is like <code class="docutils literal notranslate"><span class="pre">reactant_sum</span></code> but represdenting the right-hand-side.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">forward_rate</span></code> and <code class="docutils literal notranslate"><span class="pre">backward_rate</span></code> represent the reaction rates; reactions are assumed to be governed by mass-action kinetics with these as the rate constants unless <code class="docutils literal notranslate"><span class="pre">custom_dynamics</span></code> is true, in which case these are expressions fully defining the rate of change. In particular, these can be constants or expressions combining <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a> etc with constants, arithmetic, and <a class="reference internal" href="../../../hoc/modelspec/programmatic/rxd.html#rxd.v" title="rxd.v"><code class="xref py py-attr docutils literal notranslate"><span class="pre">rxd.v</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">region_list</span></code> is a list of regions on which this reaction occurs. If ommitted or <code class="docutils literal notranslate"><span class="pre">None</span></code>, the reaction occurs on all regions where all involved species are defined.</p></li>
</ul>
</div></blockquote>
</div></blockquote>
<p>Examples:</p>
<blockquote>
<div><p>For the following, we assume that <code class="docutils literal notranslate"><span class="pre">H</span></code>, <code class="docutils literal notranslate"><span class="pre">O</span></code>, <code class="docutils literal notranslate"><span class="pre">H2O</span></code>, <code class="docutils literal notranslate"><span class="pre">dimer</span></code>, and
<code class="docutils literal notranslate"><span class="pre">decomposed</span></code> are instances of <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a>.</p>
<p>For 2 * H + O &gt; H2O in a mass action reaction at rate k:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">rxd</span><span class="o">.</span><span class="n">Reaction</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">H</span> <span class="o">+</span> <span class="n">O</span><span class="p">,</span> <span class="n">H2O</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>To constrain the reaction to a specified list of regions,
say to just the extracellular space (ext) and the cytosol (cyt),
use the regions keyword, e.g.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">rxd</span><span class="o">.</span><span class="n">Reaction</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">H</span> <span class="o">+</span> <span class="n">O</span><span class="p">,</span> <span class="n">H2O</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">regions</span><span class="o">=</span><span class="p">[</span><span class="n">ext</span><span class="p">,</span> <span class="n">cyt</span><span class="p">])</span>
</pre></div>
</div>
</div></blockquote>
<p>For a bi-directional reaction, specify a backward reaction rate.
e.g. if kf is the forward rate and kb is the backward rate, then:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">rxd</span><span class="o">.</span><span class="n">Reaction</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">H</span> <span class="o">+</span> <span class="n">O</span><span class="p">,</span> <span class="n">H2O</span><span class="p">,</span> <span class="n">kf</span><span class="p">,</span> <span class="n">kb</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>To use dynamics other than mass-action, add that mass_action=False
flag and put the full formula instead of a mass-action rate for
kf (and kb). E.g. Michaelis-Menten degradation</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">rxd</span><span class="o">.</span><span class="n">Reaction</span><span class="p">(</span>
    <span class="n">dimer</span><span class="p">,</span> <span class="n">decomposed</span><span class="p">,</span> <span class="n">dimer</span> <span class="o">/</span> <span class="p">(</span><span class="n">k</span> <span class="o">+</span> <span class="n">diamer</span><span class="p">),</span> <span class="n">mass_action</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
<dl class="py property">
<dt class="sig sig-object py" id="rxd.Reaction.f_rate">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">f_rate</span></span><a class="headerlink" href="#rxd.Reaction.f_rate" title="Link to this definition"></a></dt>
<dd><p>Get or set the forward reaction rate.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.Reaction.b_rate">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">b_rate</span></span><a class="headerlink" href="#rxd.Reaction.b_rate" title="Link to this definition"></a></dt>
<dd><p>Get or set the backward reaction rate.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="rxd.Rate">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">Rate</span></span><a class="headerlink" href="#rxd.Rate" title="Link to this definition"></a></dt>
<dd><p>Declare a contribution to the rate of change of a species or other state variable.</p>
<p>Syntax:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">rxd</span><span class="o">.</span><span class="n">Rate</span><span class="p">(</span><span class="n">species</span><span class="p">,</span> <span class="n">rate</span><span class="p">,</span> <span class="n">regions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">membrane_flux</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">regions</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>, then the rate applies on all regions.</p>
</div></blockquote>
<p>Example:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">constant_production</span> <span class="o">=</span> <span class="n">rxd</span><span class="o">.</span><span class="n">Rate</span><span class="p">(</span><span class="n">protein</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>If this was the only contribution to protein dynamics and there was no
diffusion, the above would be equivalent to:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dprotein</span><span class="o">/</span><span class="n">dt</span> <span class="o">=</span> <span class="n">k</span>
</pre></div>
</div>
</div></blockquote>
<p>If there are multiple rxd.Rate objects (or an rxd.Reaction, etc) acting on
the same species, then their effects are summed.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="rxd.MultiCompartmentReaction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">MultiCompartmentReaction</span></span><a class="headerlink" href="#rxd.MultiCompartmentReaction" title="Link to this definition"></a></dt>
<dd><p>Specify a reaction spanning multiple regions to be added to the system.
Use this for, for example, pumps and channels, or interactions between
species living in a volume (e.g. the cytosol) and species on a
membrane (e.g. the plasma membrane).
For each species/state/parameter, you must specify what region you are
referring to, as it could be present in multiple regions. You must
also specify a <cite>membrane</cite> or a <cite>border</cite> (these are treated as synonyms)
that separates the regions involved in your reaction. This is necessary
because the default behavior is to scale the reaction rate by the
border area, as would be expected if one of the species involved is a
pump that is binding to a species in the volume. If this is not the
desired behavior, pass the keyword argument <code class="docutils literal notranslate"><span class="pre">scale_by_area=False</span></code>.
Pass in <code class="docutils literal notranslate"><span class="pre">membrane_flux=True</span></code> if the reaction produces a current across
the plasma membrane that should affect the membrane potential.
Unlike <a class="reference internal" href="#rxd.Reaction" title="rxd.Reaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Reaction</span></code></a> objects, the base units for the rates are in terms of
molecules per square micron per ms.</p>
</dd></dl>

<section id="mathematical-functions-for-rate-expressions">
<h3>Mathematical functions for rate expressions<a class="headerlink" href="#mathematical-functions-for-rate-expressions" title="Link to this heading"></a></h3>
<p>NEURON’s <code class="docutils literal notranslate"><span class="pre">neuron.rxd.rxdmath</span></code> module provides a number of mathematical functions that
can be used to define reaction rates. These generally mirror the functions available
through Python’s <code class="docutils literal notranslate"><span class="pre">math</span></code> module but support <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a> objects.</p>
<p>To use any of these, first do:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">neuron.rxd</span> <span class="kn">import</span> <span class="n">rxdmath</span>
</pre></div>
</div>
</div></blockquote>
<p>Example:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">degradation_switch</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">rxdmath</span><span class="o">.</span><span class="n">tanh</span><span class="p">((</span><span class="n">ip3</span> <span class="o">-</span> <span class="n">threshold</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">m</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span>
<span class="n">degradation</span> <span class="o">=</span> <span class="n">rxd</span><span class="o">.</span><span class="n">Rate</span><span class="p">(</span><span class="n">ip3</span><span class="p">,</span> <span class="o">-</span><span class="n">k</span> <span class="o">*</span> <span class="n">ip3</span> <span class="o">*</span> <span class="n">degradation_switch</span><span class="p">)</span>
</pre></div>
</div>
<p>For a full runnable example, see <a class="reference external" href="../../../rxd-tutorials/thresholds.html">this tutorial</a>
which as here uses the hyperbolic tangent as an approximate on/off switch for the reaction.</p>
</div></blockquote>
<p>Full documentation on this submodule is available <a class="reference internal" href="rxdmath.html#rxdmath-prog-ref"><span class="std std-ref">here</span></a> or you may go
directly to the documentation for any of its specific functions:
<a class="reference internal" href="rxdmath.html#rxdmath.acos" title="rxdmath.acos"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.acos()</span></code></a>, <a class="reference internal" href="rxdmath.html#rxdmath.acosh" title="rxdmath.acosh"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.acosh()</span></code></a>, <a class="reference internal" href="rxdmath.html#rxdmath.asin" title="rxdmath.asin"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.asin()</span></code></a>,
<a class="reference internal" href="rxdmath.html#rxdmath.asinh" title="rxdmath.asinh"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.asinh()</span></code></a>, <a class="reference internal" href="rxdmath.html#rxdmath.atan" title="rxdmath.atan"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.atan()</span></code></a>, <a class="reference internal" href="rxdmath.html#rxdmath.atan2" title="rxdmath.atan2"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.atan2()</span></code></a>,
<a class="reference internal" href="rxdmath.html#rxdmath.ceil" title="rxdmath.ceil"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.ceil()</span></code></a>, <a class="reference internal" href="rxdmath.html#rxdmath.copysign" title="rxdmath.copysign"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.copysign()</span></code></a>,
<a class="reference internal" href="rxdmath.html#rxdmath.cos" title="rxdmath.cos"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.cos()</span></code></a>, <a class="reference internal" href="rxdmath.html#rxdmath.cosh" title="rxdmath.cosh"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.cosh()</span></code></a>,
<a class="reference internal" href="rxdmath.html#rxdmath.degrees" title="rxdmath.degrees"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.degrees()</span></code></a>, <a class="reference internal" href="rxdmath.html#rxdmath.erf" title="rxdmath.erf"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.erf()</span></code></a>,
<a class="reference internal" href="rxdmath.html#rxdmath.erfc" title="rxdmath.erfc"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.erfc()</span></code></a>, <a class="reference internal" href="rxdmath.html#rxdmath.exp" title="rxdmath.exp"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.exp()</span></code></a>,
<a class="reference internal" href="rxdmath.html#rxdmath.expm1" title="rxdmath.expm1"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.expm1()</span></code></a>, <a class="reference internal" href="rxdmath.html#rxdmath.fabs" title="rxdmath.fabs"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.fabs()</span></code></a>,
<a class="reference internal" href="rxdmath.html#rxdmath.factorial" title="rxdmath.factorial"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.factorial()</span></code></a>, <a class="reference internal" href="rxdmath.html#rxdmath.floor" title="rxdmath.floor"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.floor()</span></code></a>,
<a class="reference internal" href="rxdmath.html#rxdmath.fmod" title="rxdmath.fmod"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.fmod()</span></code></a>, <a class="reference internal" href="rxdmath.html#rxdmath.gamma" title="rxdmath.gamma"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.gamma()</span></code></a>,
<a class="reference internal" href="rxdmath.html#rxdmath.lgamma" title="rxdmath.lgamma"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.lgamma()</span></code></a>, <a class="reference internal" href="rxdmath.html#rxdmath.log" title="rxdmath.log"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.log()</span></code></a>,
<a class="reference internal" href="rxdmath.html#rxdmath.log10" title="rxdmath.log10"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.log10()</span></code></a>, <a class="reference internal" href="rxdmath.html#rxdmath.log1p" title="rxdmath.log1p"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.log1p()</span></code></a>,
<a class="reference internal" href="rxdmath.html#rxdmath.pow" title="rxdmath.pow"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.pow()</span></code></a>, <a class="reference internal" href="rxdmath.html#rxdmath.pow" title="rxdmath.pow"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.pow()</span></code></a>,
<a class="reference internal" href="rxdmath.html#rxdmath.sin" title="rxdmath.sin"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.sin()</span></code></a>, <a class="reference internal" href="rxdmath.html#rxdmath.sinh" title="rxdmath.sinh"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.sinh()</span></code></a>,
<a class="reference internal" href="rxdmath.html#rxdmath.sqrt" title="rxdmath.sqrt"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.sqrt()</span></code></a>, <a class="reference internal" href="rxdmath.html#rxdmath.tan" title="rxdmath.tan"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.tan()</span></code></a>,
<a class="reference internal" href="rxdmath.html#rxdmath.tanh" title="rxdmath.tanh"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.tanh()</span></code></a>, <a class="reference internal" href="rxdmath.html#rxdmath.trunc" title="rxdmath.trunc"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.trunc()</span></code></a>,
<a class="reference internal" href="rxdmath.html#rxdmath.vtrap" title="rxdmath.vtrap"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.vtrap()</span></code></a></p>
<div class="toctree-wrapper compound">
</div>
</section>
</section>
<section id="manipulating-nodes">
<h2>Manipulating nodes<a class="headerlink" href="#manipulating-nodes" title="Link to this heading"></a></h2>
<p>A <a class="reference internal" href="#rxd.node.Node" title="rxd.node.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.node.Node</span></code></a> represents a particular state value or <a class="reference internal" href="#rxd.Parameter" title="rxd.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Parameter</span></code></a> in a particular location. Individual <a class="reference internal" href="#rxd.node.Node" title="rxd.node.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.node.Node</span></code></a> objects are typically obtained either from being passed to an initialization function or by filtering or selecting from an <a class="reference internal" href="#rxd.nodelist.NodeList" title="rxd.nodelist.NodeList"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.nodelist.NodeList</span></code></a> returned by <a class="reference internal" href="#rxd.Species.nodes" title="rxd.Species.nodes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">rxd.Species.nodes</span></code></a>. Node objects are often used for recording concentration using <a class="reference internal" href="#rxd.node.Node._ref_concentration" title="rxd.node.Node._ref_concentration"><code class="xref py py-attr docutils literal notranslate"><span class="pre">rxd.node.Node._ref_concentration</span></code></a>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="rxd.nodelist.NodeList">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.nodelist.</span></span><span class="sig-name descname"><span class="pre">NodeList</span></span><a class="headerlink" href="#rxd.nodelist.NodeList" title="Link to this definition"></a></dt>
<dd><p>An <a class="reference internal" href="#rxd.nodelist.NodeList" title="rxd.nodelist.NodeList"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.nodelist.NodeList</span></code></a> is a subclass of a Python <a class="reference external" href="https://docs.python.org/3/tutorial/datastructures.html#more-on-lists">list</a>
containing <a class="reference internal" href="#rxd.node.Node" title="rxd.node.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.node.Node</span></code></a> objects. It is not intended to be created directly in a model, but rather is returned by
<a class="reference internal" href="#rxd.Species.nodes" title="rxd.Species.nodes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">rxd.Species.nodes</span></code></a>.</p>
<p>Standard Python list methods are supported, including <code class="docutils literal notranslate"><span class="pre">.append(node)</span></code>, <code class="docutils literal notranslate"><span class="pre">.extend(node_list)</span></code>,
<code class="docutils literal notranslate"><span class="pre">.insert(i,</span> <span class="pre">node)</span></code>, <code class="docutils literal notranslate"><span class="pre">.index(node)</span></code>, and manipulation of lists like <code class="docutils literal notranslate"><span class="pre">len(node_list)</span></code>, <code class="docutils literal notranslate"><span class="pre">node_list[0]</span></code>, or <code class="docutils literal notranslate"><span class="pre">node_list[5:12]</span></code>. Additionally one may iterate over a NodeList as in:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">ca</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
</div></blockquote>
<p>(Here <code class="docutils literal notranslate"><span class="pre">ca</span></code> is assumed to be an <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a> and thus <code class="docutils literal notranslate"><span class="pre">ca.nodes</span></code> is an
<a class="reference internal" href="#rxd.nodelist.NodeList" title="rxd.nodelist.NodeList"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.nodelist.NodeList</span></code></a>.)</p>
<p>A key added functionality is the ability to filter the
nodes by rxd property (returning a new
<a class="reference internal" href="#rxd.nodelist.NodeList" title="rxd.nodelist.NodeList"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.nodelist.NodeList</span></code></a>). Any filter object supported
by the <code class="docutils literal notranslate"><span class="pre">.satifies</span></code> method of the node types present in the
<a class="reference internal" href="#rxd.nodelist.NodeList" title="rxd.nodelist.NodeList"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.nodelist.NodeList</span></code></a> may be passed in parentheses;
e.g.</p>
<blockquote>
<div><p>To filter the <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a> <code class="docutils literal notranslate"><span class="pre">ca</span></code>’s nodes for
just the ones present on the <code class="xref py py-class docutils literal notranslate"><span class="pre">nrn.Segment</span></code>
<code class="docutils literal notranslate"><span class="pre">dend(0.5)</span></code>, use:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">new_node_list</span> <span class="o">=</span> <span class="n">ca</span><span class="o">.</span><span class="n">nodes</span><span class="p">(</span><span class="n">dend</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span>
</pre></div>
</div>
</div></blockquote>
<p>To filter the <code class="docutils literal notranslate"><span class="pre">new_node_list</span></code> to only contain nodes
present in the <a class="reference internal" href="#rxd.Region" title="rxd.Region"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Region</span></code></a> <code class="docutils literal notranslate"><span class="pre">er</span></code>:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">just_er</span> <span class="o">=</span> <span class="n">new_node_list</span><span class="p">(</span><span class="n">er</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
<p>In addition, the following methods and properties are supported:</p>
<dl class="py property">
<dt class="sig sig-object py" id="rxd.nodelist.NodeList.value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#rxd.nodelist.NodeList.value" title="Link to this definition"></a></dt>
<dd><p>Gets or sets the values associated with the stored nodes.
Getting always returns a list, even if the <a class="reference internal" href="#rxd.nodelist.NodeList" title="rxd.nodelist.NodeList"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.nodelist.NodeList</span></code></a> has
length 0 or 1. Setting may be to a constant (in which case all nodes are set to
the same value) or to a list (in which case the list values are assigned in order
to the nodes). In the latter case, if the length of the list does not match the length
of the node list, an <a class="reference internal" href="#rxd.RxDException" title="rxd.RxDException"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.RxDException</span></code></a> is raised.</p>
<p>The list that is returned by reading this property is a copy of the underlying data;
that is, changing it will have no effect on the values stored.</p>
<p>This currently has the same behavior as <a class="reference internal" href="#rxd.nodelist.NodeList.concentration" title="rxd.nodelist.NodeList.concentration"><code class="xref py py-attr docutils literal notranslate"><span class="pre">rxd.nodelist.NodeList.concentration</span></code></a>
however in the future these are intended to be different for stochastic simulation.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.nodelist.NodeList.concentration">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">concentration</span></span><a class="headerlink" href="#rxd.nodelist.NodeList.concentration" title="Link to this definition"></a></dt>
<dd><p>Gets or sets the concentration associated with the stored nodes.
Getting always returns a list, even if the <a class="reference internal" href="#rxd.nodelist.NodeList" title="rxd.nodelist.NodeList"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.nodelist.NodeList</span></code></a> has
length 0 or 1. Setting may be to a constant (in which case all nodes are set to
the same value) or to a list (in which case the list values are assigned in order
to the nodes). In the latter case, if the length of the list does not match the length
of the node list, an <a class="reference internal" href="#rxd.RxDException" title="rxd.RxDException"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.RxDException</span></code></a> is raised.</p>
<p>The list that is returned by reading this property is a copy of the underlying data;
that is, changing it will have no effect on the values stored.</p>
<p>This currently has the same behavior as <a class="reference internal" href="#rxd.nodelist.NodeList.value" title="rxd.nodelist.NodeList.value"><code class="xref py py-attr docutils literal notranslate"><span class="pre">rxd.nodelist.NodeList.value</span></code></a>
however in the future these are intended to be different for stochastic simulation.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.nodelist.NodeList.segment">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">segment</span></span><a class="headerlink" href="#rxd.nodelist.NodeList.segment" title="Link to this definition"></a></dt>
<dd><p>Returns a list of the <code class="xref py py-class docutils literal notranslate"><span class="pre">nrn.Segment</span></code> objects associated with the nodes in the
NodeList.</p>
<p>The list that is returned by reading this property is a copy of the underlying data;
that is, changing it will have no effect on the values stored.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.nodelist.NodeList._ref_value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_ref_value</span></span><a class="headerlink" href="#rxd.nodelist.NodeList._ref_value" title="Link to this definition"></a></dt>
<dd><p>A pointer to the memory location storing the <a class="reference internal" href="#rxd.node.Node.value" title="rxd.node.Node.value"><code class="xref py py-attr docutils literal notranslate"><span class="pre">rxd.node.Node.value</span></code></a> when
the NodeList has length 1; otherwise an <a class="reference internal" href="#rxd.RxDException" title="rxd.RxDException"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.RxDException</span></code></a> is raised.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.nodelist.NodeList._ref_concentration">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_ref_concentration</span></span><a class="headerlink" href="#rxd.nodelist.NodeList._ref_concentration" title="Link to this definition"></a></dt>
<dd><p>A pointer to the memory location storing the <a class="reference internal" href="#rxd.node.Node.concentration" title="rxd.node.Node.concentration"><code class="xref py py-attr docutils literal notranslate"><span class="pre">rxd.node.Node.concentration</span></code></a> when
the NodeList has length 1; otherwise an <a class="reference internal" href="#rxd.RxDException" title="rxd.RxDException"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.RxDException</span></code></a> is raised.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.nodelist.NodeList.diff">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">diff</span></span><a class="headerlink" href="#rxd.nodelist.NodeList.diff" title="Link to this definition"></a></dt>
<dd><p>Get or set the diffusion constants of the contained Node objects.
Getting returns a list that is a copy of the underlying data. Setting accepts either
a constant or a list of matching length; passing a list of a different length raises
an <a class="reference internal" href="#rxd.RxDException" title="rxd.RxDException"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.RxDException</span></code></a>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.nodelist.NodeList.volume">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">volume</span></span><a class="headerlink" href="#rxd.nodelist.NodeList.volume" title="Link to this definition"></a></dt>
<dd><p>An iterable of the volumes of the Node objects in the NodeList.</p>
<p>Read only.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.nodelist.NodeList.surface_area">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">surface_area</span></span><a class="headerlink" href="#rxd.nodelist.NodeList.surface_area" title="Link to this definition"></a></dt>
<dd><p>An iterable of the surface areas of the Node objects in the NodeList.</p>
<p>Read only.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.nodelist.NodeList.region">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">region</span></span><a class="headerlink" href="#rxd.nodelist.NodeList.region" title="Link to this definition"></a></dt>
<dd><p>An iterable of the <a class="reference internal" href="#rxd.Region" title="rxd.Region"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Region</span></code></a> (or <a class="reference internal" href="#rxd.Extracellular" title="rxd.Extracellular"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Extracellular</span></code></a>) objects of the Node objects in the NodeList.</p>
<p>Read only.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.nodelist.NodeList.species">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">species</span></span><a class="headerlink" href="#rxd.nodelist.NodeList.species" title="Link to this definition"></a></dt>
<dd><p>An iterable of the <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a> (or <a class="reference internal" href="#rxd.State" title="rxd.State"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.State</span></code></a> or <a class="reference internal" href="#rxd.Parameter" title="rxd.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Parameter</span></code></a>, as appropriate) objects of the Node objects in the NodeList.</p>
<p>Read only.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.nodelist.NodeList.x">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">x</span></span><a class="headerlink" href="#rxd.nodelist.NodeList.x" title="Link to this definition"></a></dt>
<dd><p>An iterable of the normalized positions of the Node objects in the NodeList.
Note: these values are always between 0 and 1 and represent positions within
the corresponding <a class="reference internal" href="topology.html#Section" title="Section"><code class="xref py py-class docutils literal notranslate"><span class="pre">Section</span></code></a>. For 3D position, query the <code class="docutils literal notranslate"><span class="pre">x3d</span></code> property
of the <a class="reference internal" href="#rxd.node.Node" title="rxd.node.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.node.Node</span></code></a> objects themselves.</p>
<p>Read only.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rxd.nodelist.NodeList.include_flux">
<span class="sig-name descname"><span class="pre">include_flux</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rxd.nodelist.NodeList.include_flux" title="Link to this definition"></a></dt>
<dd><p>Includes the specified flux on all nodes in the NodeList. All arguments are passed
directly to the underlying <a class="reference internal" href="#rxd.node.Node" title="rxd.node.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.node.Node</span></code></a> objects.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rxd.nodelist.NodeList.value_to_grid">
<span class="sig-name descname"><span class="pre">value_to_grid</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rxd.nodelist.NodeList.value_to_grid" title="Link to this definition"></a></dt>
<dd><p>Returns a regular grid with the values of the 3D nodes in the list. This is
sometimes useful for volumetric visualization however the generated array
may be large in certain models.</p>
<p>The grid is a copy only.</p>
<p>Grid points not belonging to the object are assigned a value of NaN.</p>
<p>Nodes that are not 3d will be ignored. If there are no 3D nodes, returns
a 0x0x0 numpy array.</p>
<p>Warning: Currently only supports nodelists over 1 region.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="rxd.node.Node">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.node.</span></span><span class="sig-name descname"><span class="pre">Node</span></span><a class="headerlink" href="#rxd.node.Node" title="Link to this definition"></a></dt>
<dd><p>The combination of a single <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a> etc and a unique spatial location
at whatever resolution (i.e. could be a segment and a region, or could be a 3D voxel
and a region).</p>
<p>These objects are passed to an initialization function for rxd Species, States, and
Parameters as ways of identifying a location.
They are also useful for specifying localized fluxes or to record state variables.</p>
<p>There are three subtypes: <a class="reference internal" href="#rxd.node.Node1D" title="rxd.node.Node1D"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.node.Node1D</span></code></a>, <a class="reference internal" href="#rxd.node.Node3D" title="rxd.node.Node3D"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.node.Node3D</span></code></a>, and
<a class="reference internal" href="#rxd.node.NodeExtracellular" title="rxd.node.NodeExtracellular"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.node.NodeExtracellular</span></code></a>.
They all support the methods and properties described here
as well as some unique to their case features.</p>
<dl class="py method">
<dt class="sig sig-object py" id="rxd.node.Node.include_flux">
<span class="sig-name descname"><span class="pre">include_flux</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rxd.node.Node.include_flux" title="Link to this definition"></a></dt>
<dd><p>Include a flux contribution to a specific node.</p>
<p>The flux can be described as a NEURON reference, a point process and a
property, a Python function, or something that evaluates to a constant
Python float.</p>
<p>Supported units: molecule/ms, mol/ms, mmol/ms == millimol/ms == mol/s</p>
<p>Examples:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">include_flux</span><span class="p">(</span><span class="n">mglur</span><span class="p">,</span> <span class="s1">&#39;ip3flux&#39;</span><span class="p">)</span>           <span class="c1"># default units: molecule/ms</span>
<span class="n">node</span><span class="o">.</span><span class="n">include_flux</span><span class="p">(</span><span class="n">mglur</span><span class="p">,</span> <span class="s1">&#39;ip3flux&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;mol/ms&#39;</span><span class="p">)</span> <span class="c1"># units: moles/ms</span>
<span class="n">node</span><span class="o">.</span><span class="n">include_flux</span><span class="p">(</span><span class="n">mglur</span><span class="o">.</span><span class="n">_ref_ip3flux</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;molecule/ms&#39;</span><span class="p">)</span>
<span class="n">node</span><span class="o">.</span><span class="n">include_flux</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">mglur</span><span class="o">.</span><span class="n">ip3flux</span><span class="p">)</span>
<span class="n">node</span><span class="o">.</span><span class="n">include_flux</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">t</span><span class="p">))</span>
<span class="n">node</span><span class="o">.</span><span class="n">include_flux</span><span class="p">(</span><span class="mi">47</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>Warning:</p>
<blockquote>
<div><p>Flux denotes a change in <em>mass</em> not a change in concentration.
For example, a metabotropic synapse produces a certain amount of
substance when activated. The corresponding effect on the node’s
concentration depends on the volume of the node. (This scaling is
handled automatically by NEURON’s rxd module.)</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="rxd.node.Node.satisfies">
<span class="sig-name descname"><span class="pre">satisfies</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rxd.node.Node.satisfies" title="Link to this definition"></a></dt>
<dd><p>Tests if a Node satisfies a given condition.</p>
<p>Syntax:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">satisfies</span><span class="p">(</span><span class="n">condition</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>If a <a class="reference internal" href="topology.html#Section" title="Section"><code class="xref py py-class docutils literal notranslate"><span class="pre">Section</span></code></a> object or RxDSection is provided, returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if the Node lies in the section; else <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p>If a <a class="reference internal" href="#rxd.Region" title="rxd.Region"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Region</span></code></a> object is provided, returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if the Node lies in the Region; else <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p>Additional options are supported by specific subclasses, see
<a class="reference internal" href="#rxd.node.Node1D.satisfies" title="rxd.node.Node1D.satisfies"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rxd.node.Node1D.satisfies()</span></code></a>, <a class="reference internal" href="#rxd.node.Node3D.satisfies" title="rxd.node.Node3D.satisfies"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rxd.node.Node3D.satisfies()</span></code></a>, and
<a class="reference internal" href="#rxd.node.NodeExtracellular.satisfies" title="rxd.node.NodeExtracellular.satisfies"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rxd.node.NodeExtracellular.satisfies()</span></code></a>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.node.Node._ref_concentration">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_ref_concentration</span></span><a class="headerlink" href="#rxd.node.Node._ref_concentration" title="Link to this definition"></a></dt>
<dd><p>Returns a NEURON reference to the Node’s concentration.
This result is typically passed to <a class="reference internal" href="../../programming/math/vector.html#Vector.record" title="Vector.record"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Vector.record()</span></code></a> to record the concentration
changes at a location over time.</p>
<p>(The node must store concentration data. Use <a class="reference internal" href="#rxd.node.Node._ref_molecules" title="rxd.node.Node._ref_molecules"><code class="xref py py-attr docutils literal notranslate"><span class="pre">rxd.node.Node._ref_molecules</span></code></a> for nodes
storing molecule counts.)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.node.Node._ref_molecules">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_ref_molecules</span></span><a class="headerlink" href="#rxd.node.Node._ref_molecules" title="Link to this definition"></a></dt>
<dd><p>Returns a NEURON reference to the Node’s concentration</p>
<p>(The node must store molecule counts. Use _ref_concentrations for nodes
storing concentration.)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.node.Node._ref_value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_ref_value</span></span><a class="headerlink" href="#rxd.node.Node._ref_value" title="Link to this definition"></a></dt>
<dd><p>Returns a NEURON reference to the Node’s value. This method always works,
regardless of if the node stores a concentration or not.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.node.Node.d">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">d</span></span><a class="headerlink" href="#rxd.node.Node.d" title="Link to this definition"></a></dt>
<dd><p>Get or set the diffusion rate within the compartment.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.node.Node.concentration">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">concentration</span></span><a class="headerlink" href="#rxd.node.Node.concentration" title="Link to this definition"></a></dt>
<dd><p>Get or set the concentration at the Node.</p>
<p>Currently does not support nodes storing molecule counts. Use <a class="reference internal" href="#rxd.node.Node.molecules" title="rxd.node.Node.molecules"><code class="xref py py-attr docutils literal notranslate"><span class="pre">rxd.node.Node.molecules</span></code></a> instead; attempting to use with a molecule count node will raise
an <a class="reference internal" href="#rxd.RxDException" title="rxd.RxDException"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.RxDException</span></code></a>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.node.Node.molecules">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">molecules</span></span><a class="headerlink" href="#rxd.node.Node.molecules" title="Link to this definition"></a></dt>
<dd><p>Get or set the number of molecules at the Node.</p>
<p>Currently does not support nodes storing concentrations. Use <a class="reference internal" href="#rxd.node.Node.concentration" title="rxd.node.Node.concentration"><code class="xref py py-attr docutils literal notranslate"><span class="pre">rxd.node.Node.concentration</span></code></a> instead; attempting to use with a concentration node will raise
an <a class="reference internal" href="#rxd.RxDException" title="rxd.RxDException"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.RxDException</span></code></a>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.node.Node.value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#rxd.node.Node.value" title="Link to this definition"></a></dt>
<dd><p>Get or set the value associated with this Node.</p>
<p>For Species nodes belonging to a deterministic simulation, this is a concentration.
For Species nodes belonging to a stochastic simulation, this is the molecule count.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.node.Node.x3d">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">x3d</span></span><a class="headerlink" href="#rxd.node.Node.x3d" title="Link to this definition"></a></dt>
<dd><p>The 3D x-coordinate of the center of this Node.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.node.Node.y3d">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">y3d</span></span><a class="headerlink" href="#rxd.node.Node.y3d" title="Link to this definition"></a></dt>
<dd><p>The 3D y-coordinate of the center of this Node.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.node.Node.z3d">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">z3d</span></span><a class="headerlink" href="#rxd.node.Node.z3d" title="Link to this definition"></a></dt>
<dd><p>The 3D z-coordinate of the center of this Node.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.node.Node.region">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">region</span></span><a class="headerlink" href="#rxd.node.Node.region" title="Link to this definition"></a></dt>
<dd><p>The <a class="reference internal" href="#rxd.Region" title="rxd.Region"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Region</span></code></a> or <a class="reference internal" href="#rxd.Extracellular" title="rxd.Extracellular"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Extracellular</span></code></a> containing the compartment.
Read only.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.node.Node.species">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">species</span></span><a class="headerlink" href="#rxd.node.Node.species" title="Link to this definition"></a></dt>
<dd><p>The <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a>, <a class="reference internal" href="#rxd.State" title="rxd.State"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.State</span></code></a>, or <a class="reference internal" href="#rxd.Parameter" title="rxd.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Parameter</span></code></a> containing the compartment. Read only.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.node.Node.volume">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">volume</span></span><a class="headerlink" href="#rxd.node.Node.volume" title="Link to this definition"></a></dt>
<dd><p>The volume of the region spanned by the Node.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="rxd.node.Node1D">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.node.</span></span><span class="sig-name descname"><span class="pre">Node1D</span></span><a class="headerlink" href="#rxd.node.Node1D" title="Link to this definition"></a></dt>
<dd><p>A subclass of <a class="reference internal" href="#rxd.node.Node" title="rxd.node.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.node.Node</span></code></a> used only for nodes being simulated in 1D.</p>
<dl class="py method">
<dt class="sig sig-object py" id="rxd.node.Node1D.satisfies">
<span class="sig-name descname"><span class="pre">satisfies</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rxd.node.Node1D.satisfies" title="Link to this definition"></a></dt>
<dd><p>Supports the options of <a class="reference internal" href="#rxd.node.Node.satisfies" title="rxd.node.Node.satisfies"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rxd.node.Node.satisfies()</span></code></a> and:</p>
<p>If a number between 0 and 1 is provided, returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if the normalized position lies within the Node; else <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.node.Node1D.sec">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sec</span></span><a class="headerlink" href="#rxd.node.Node1D.sec" title="Link to this definition"></a></dt>
<dd><p>The section containing the node. Read-only.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.node.Node1D.segment">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">segment</span></span><a class="headerlink" href="#rxd.node.Node1D.segment" title="Link to this definition"></a></dt>
<dd><p>The segment containing the node. Read-only.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.node.Node1D.x">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">x</span></span><a class="headerlink" href="#rxd.node.Node1D.x" title="Link to this definition"></a></dt>
<dd><p>The normalized position of the center of the node. Read-only.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.node.Node1D.surface_area">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">surface_area</span></span><a class="headerlink" href="#rxd.node.Node1D.surface_area" title="Link to this definition"></a></dt>
<dd><p>The surface area of the compartment in square microns.</p>
<p>This is the area (if any) of the compartment that lies on the plasma membrane
and therefore is the area used to determine the contribution of currents (e.g. ina) from
mod files or <a class="reference internal" href="kschan.html#KSChan" title="KSChan"><code class="xref py py-class docutils literal notranslate"><span class="pre">KSChan</span></code></a> to the compartment’s concentration.</p>
<p>Read only.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="rxd.node.Node3D">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.node.</span></span><span class="sig-name descname"><span class="pre">Node3D</span></span><a class="headerlink" href="#rxd.node.Node3D" title="Link to this definition"></a></dt>
<dd><p>A subclass of <a class="reference internal" href="#rxd.node.Node" title="rxd.node.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.node.Node</span></code></a> used only for intracellular nodes being simulated in 3D.</p>
<dl class="py method">
<dt class="sig sig-object py" id="rxd.node.Node3D.satisfies">
<span class="sig-name descname"><span class="pre">satisfies</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rxd.node.Node3D.satisfies" title="Link to this definition"></a></dt>
<dd><p>Supports the options of <a class="reference internal" href="#rxd.node.Node.satisfies" title="rxd.node.Node.satisfies"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rxd.node.Node.satisfies()</span></code></a> and:</p>
<p>If a tuple is provided of length 3, return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the Node contains the <code class="docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y,</span> <span class="pre">z)</span></code> point; else <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.node.Node3D.sec">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sec</span></span><a class="headerlink" href="#rxd.node.Node3D.sec" title="Link to this definition"></a></dt>
<dd><p>The section containing the node. Read-only.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.node.Node3D.segment">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">segment</span></span><a class="headerlink" href="#rxd.node.Node3D.segment" title="Link to this definition"></a></dt>
<dd><p>The segment containing the node. Read-only.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.node.Node3D.surface_area">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">surface_area</span></span><a class="headerlink" href="#rxd.node.Node3D.surface_area" title="Link to this definition"></a></dt>
<dd><p>The surface area of the compartment in square microns.</p>
<p>This is the area (if any) of the compartment that lies on the plasma membrane
and therefore is the area used to determine the contribution of currents (e.g. ina) from
mod files or <a class="reference internal" href="kschan.html#KSChan" title="KSChan"><code class="xref py py-class docutils literal notranslate"><span class="pre">KSChan</span></code></a> to the compartment’s concentration.</p>
<p>Read only.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="rxd.node.NodeExtracellular">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.node.</span></span><span class="sig-name descname"><span class="pre">NodeExtracellular</span></span><a class="headerlink" href="#rxd.node.NodeExtracellular" title="Link to this definition"></a></dt>
<dd><p>A subclass of <a class="reference internal" href="#rxd.node.Node" title="rxd.node.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.node.Node</span></code></a> used only for extracellular nodes being simulated in 3D.</p>
<dl class="py method">
<dt class="sig sig-object py" id="rxd.node.NodeExtracellular.satisfies">
<span class="sig-name descname"><span class="pre">satisfies</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rxd.node.NodeExtracellular.satisfies" title="Link to this definition"></a></dt>
<dd><p>Supports the options of <a class="reference internal" href="#rxd.node.Node.satisfies" title="rxd.node.Node.satisfies"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rxd.node.Node.satisfies()</span></code></a> and:</p>
<p>If a tuple is provided of length 3, return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the Node contains the <code class="docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y,</span> <span class="pre">z)</span></code> point; else <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd></dl>

</dd></dl>

</section>
<section id="membrane-potential">
<h2>Membrane potential<a class="headerlink" href="#membrane-potential" title="Link to this heading"></a></h2>
<dl class="py property">
<dt class="sig sig-object py" id="rxd.v">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">v</span></span><a class="headerlink" href="#rxd.v" title="Link to this definition"></a></dt>
<dd><p>A special object representing the local membrane potential in a reaction-rate
expression. This can be used with <a class="reference internal" href="#rxd.Rate" title="rxd.Rate"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Rate</span></code></a> and
<a class="reference internal" href="#rxd.MultiCompartmentReaction" title="rxd.MultiCompartmentReaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.MultiCompartmentReaction</span></code></a> to build ion channel models as an alternative
to using NMODL, NeuroML (and converting to NMODL via <a class="reference external" href="https://github.com/NeuroML/jNeuroML">jneuroml</a>), the ChannelBuilder,
or <a class="reference internal" href="kschan.html#KSChan" title="KSChan"><code class="xref py py-class docutils literal notranslate"><span class="pre">KSChan</span></code></a>.</p>
<p>(If you want a numeric value for the current membrane potential at a
segment <code class="docutils literal notranslate"><span class="pre">seg</span></code> use <code class="docutils literal notranslate"><span class="pre">seg.v</span></code> instead.)</p>
<p>Example (adapted from the <a class="reference external" href="https://neuron.yale.edu/neuron/docs/hodgkin-huxley-using-rxd">Hodgkin Huxley via rxd</a> tutorial)</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">neuron.rxd.rxdmath</span> <span class="kn">import</span> <span class="n">vtrap</span><span class="p">,</span> <span class="n">exp</span><span class="p">,</span> <span class="n">log</span>
<span class="kn">from</span> <span class="nn">neuron</span> <span class="kn">import</span> <span class="n">rxd</span>

<span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.01</span> <span class="o">*</span> <span class="n">vtrap</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">rxd</span><span class="o">.</span><span class="n">v</span> <span class="o">+</span> <span class="mf">55.0</span><span class="p">),</span> <span class="mf">10.0</span><span class="p">)</span>
<span class="n">beta</span> <span class="o">=</span> <span class="mf">0.125</span> <span class="o">*</span> <span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">rxd</span><span class="o">.</span><span class="n">v</span> <span class="o">+</span> <span class="mf">65.0</span><span class="p">)</span><span class="o">/</span><span class="mf">80.0</span><span class="p">)</span>
<span class="n">ntau</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="p">(</span><span class="n">alpha</span> <span class="o">+</span> <span class="n">beta</span><span class="p">)</span>
<span class="n">ninf</span> <span class="o">=</span> <span class="n">alpha</span><span class="o">/</span><span class="p">(</span><span class="n">alpha</span> <span class="o">+</span> <span class="n">beta</span><span class="p">)</span>

<span class="c1"># ... define cyt, mem, sections ...</span>

<span class="n">ngate</span> <span class="o">=</span> <span class="n">rxd</span><span class="o">.</span><span class="n">State</span><span class="p">([</span><span class="n">cyt</span><span class="p">,</span> <span class="n">mem</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;ngate&#39;</span><span class="p">,</span> <span class="n">initial</span><span class="o">=</span><span class="mf">0.24458654944007166</span><span class="p">)</span>
<span class="n">n_gate</span> <span class="o">=</span> <span class="n">rxd</span><span class="o">.</span><span class="n">Rate</span><span class="p">(</span><span class="n">ngate</span><span class="p">,</span> <span class="p">(</span><span class="n">ninf</span> <span class="o">-</span> <span class="n">ngate</span><span class="p">)</span><span class="o">/</span><span class="n">ntau</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

</section>
<section id="synchronization-with-segments">
<h2>Synchronization with segments<a class="headerlink" href="#synchronization-with-segments" title="Link to this heading"></a></h2>
<p>Changes to <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a> node concentrations are propagated to segment-level concentrations automatically no later
than the next time step. This is generally the right direction for information to flow, however NEURON also provides
a <a class="reference internal" href="#rxd.re_init" title="rxd.re_init"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxd.re_init()</span></code></a> function to transfer data from segments to <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a>.</p>
<dl class="py function">
<dt class="sig sig-object py" id="rxd.re_init">
<span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">re_init</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rxd.re_init" title="Link to this definition"></a></dt>
<dd><p>Reinitialize all <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a>, <a class="reference internal" href="#rxd.State" title="rxd.State"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.State</span></code></a>, and <a class="reference internal" href="#rxd.Parameter" title="rxd.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Parameter</span></code></a> from changes made
to NEURON segment-level concentrations. This calls the corresponding <a class="reference internal" href="#rxd.Species.re_init" title="rxd.Species.re_init"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rxd.Species.re_init()</span></code></a> methods.
Note that reaction-diffusion models may contain concentration data at a finer-resolution than that of a
<code class="xref py py-class docutils literal notranslate"><span class="pre">nrn.Segment</span></code> (e.g. for models being simulated in 3D).</p>
<p>Syntax:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rxd</span><span class="o">.</span><span class="n">re_init</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

</section>
<section id="numerical-options">
<h2>Numerical options<a class="headerlink" href="#numerical-options" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="rxd.nthread">
<span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">nthread</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rxd.nthread" title="Link to this definition"></a></dt>
<dd><p>Specify a number of threads to use for extracellular and 3D intracellular simulation. Currently has
no effect on 1D reaction-diffusion models.</p>
<p>Syntax:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rxd</span><span class="o">.</span><span class="n">nthread</span><span class="p">(</span><span class="n">num_threads</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>Example:</p>
<blockquote>
<div><p>To simulate using 4 threads:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rxd</span><span class="o">.</span><span class="n">nthread</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>Thread scaling performance is discussed in the NEURON
<a class="reference external" href="https://doi.org/10.3389/fninf.2018.00041">extracellular</a> and
<a class="reference external" href="https://doi.org/10.1101/2022.01.01.474683">3D intracellular</a> methods papers.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rxd.set_solve_type">
<span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">set_solve_type</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rxd.set_solve_type" title="Link to this definition"></a></dt>
<dd><p>Specify numerical discretization and solver options. Currently the main use is to indicate
Sections where reaction-diffusion should be simulated in 3D.</p>
<p>Syntax:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rxd</span><span class="o">.</span><span class="n">set_solve_type</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dimension</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dx</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nsubseg</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>where:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">domain</span></code> – a <a class="reference internal" href="topology.html#Section" title="Section"><code class="xref py py-class docutils literal notranslate"><span class="pre">Section</span></code></a> or Python iterable of sections. If the domain is <code class="docutils literal notranslate"><span class="pre">None</span></code> or omitted, the specification will apply to the entire model.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dimension</span></code> – 1 or 3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dx</span></code> – not implemented; specify dx for 3D models when creating the <a class="reference internal" href="#rxd.Region" title="rxd.Region"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Region</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nsubseg</span></code> – not implemented</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">method</span></code> – not implemented</p></li>
</ul>
</div></blockquote>
</div></blockquote>
<p>This function may be called multiple times; the last setting for any given field will be used.
Different sections may be simulated in different dimensions (a so-called hybrid model).</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>For 3D reaction-diffusion simulations, we recommend upgrading to at least NEURON 8.1.</p>
<p>(Calculation of 3D concentration changes from MOD file activity
in NEURON 7.8.x and 8.0.x was underestimated due to an inconsistency in surface voxel
partial volume calculations.)</p>
</div>
</dd></dl>

</section>
<section id="sbml-export">
<h2>SBML Export<a class="headerlink" href="#sbml-export" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="rxd.export.sbml">
<span class="sig-prename descclassname"><span class="pre">rxd.export.</span></span><span class="sig-name descname"><span class="pre">sbml</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rxd.export.sbml" title="Link to this definition"></a></dt>
<dd><p>Export dynamics at a segment to an SBML file.</p>
<p>Syntax:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rxd</span><span class="o">.</span><span class="n">export</span><span class="o">.</span><span class="n">sbml</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">model_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pretty</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>This does not currently support <a class="reference internal" href="#rxd.MultiCompartmentReaction" title="rxd.MultiCompartmentReaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.MultiCompartmentReaction</span></code></a>; attempting to export dynamics that
involve such reactions will raise an <a class="reference internal" href="#rxd.RxDException" title="rxd.RxDException"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.RxDException</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">rxd.export</span></code> is not available simply via <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">neuron</span> <span class="pre">import</span> <span class="pre">rxd</span></code>; you must also:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">neuron.rxd.export</span>
</pre></div>
</div>
</div>
</dd></dl>

</section>
<section id="saving-and-restoring-state">
<h2>Saving and restoring state<a class="headerlink" href="#saving-and-restoring-state" title="Link to this heading"></a></h2>
<p>Some simulations require a lengthy initialization before exploring various possible stimuli.
In these situations, it is often convenient to run the initialization once, save the state,
do an experiment, and revert back to the saved state.</p>
<p>Beginning in NEURON 8.1, reaction-diffusion states are included automatically when using
<a class="reference internal" href="../../simctrl/savstate.html#SaveState" title="SaveState"><code class="xref py py-class docutils literal notranslate"><span class="pre">SaveState</span></code></a> which additionally saves many other model states.</p>
<p>If one wants to save and restore <em>only</em> reaction-diffusion states, this can be done via the following
functions:</p>
<p>The reaction-diffusion state data returned by <code class="xref py py-func docutils literal notranslate"><span class="pre">rxd.save_state()</span></code> and expected by <code class="xref py py-func docutils literal notranslate"><span class="pre">rxd.restore_state()</span></code>
consists of 16 bytes of metadata (8 bytes for a version identifier and 8 bytes for the length of the remaining portion)
followed by gzip-compresssed state values. In particular, not every binary string of a given length is a valid
state vector, nor is every state vector for a given model necessarily the same length (as the compressability may
be different).</p>
</section>
<section id="error-handling">
<h2>Error handling<a class="headerlink" href="#error-handling" title="Link to this heading"></a></h2>
<p>Most errors in the usage of the <code class="docutils literal notranslate"><span class="pre">neuron.rxd</span></code> module should
raise a <a class="reference internal" href="#rxd.RxDException" title="rxd.RxDException"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.RxDException</span></code></a>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="rxd.RxDException">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">RxDException</span></span><a class="headerlink" href="#rxd.RxDException" title="Link to this definition"></a></dt>
<dd><p>An exception originating from the <code class="docutils literal notranslate"><span class="pre">neuron.rxd</span></code> module
due to invalid usage. This allows distinguishing such
exceptions from other errors.</p>
<p>The text message of an <a class="reference internal" href="#rxd.RxDException" title="rxd.RxDException"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.RxDException</span></code></a> <code class="docutils literal notranslate"><span class="pre">e</span></code> may be read as <code class="docutils literal notranslate"><span class="pre">str(e)</span></code>.</p>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="mechanisms/nmodl2.html" class="btn btn-neutral float-left" title="NEURON Extension to NMODL" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="rxdmath.html" class="btn btn-neutral float-right" title="Mathematical functions for rate expressions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Duke, Yale and the Blue Brain Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>