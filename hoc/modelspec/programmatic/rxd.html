<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Basic Reaction-Diffusion &mdash; NEURON  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=6933245a" />

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/design-tabs.js?v=36754332"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Networks" href="network.html" />
    <link rel="prev" title="NEURON Extension to NMODL" href="mechanisms/nmodl2.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            NEURON
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Building:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../install/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cmake_doc/index.html">CMake Build Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install/developer.html">Developer Builds</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../videos/index.html">Training videos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guide/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../courses/exercises2018.html">NEURON Course Exercises</a></li>
<li class="toctree-l1"><a class="reference external" href="https://neuron.yale.edu/phpBB">The NEURON forum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../publications.html">Publications about NEURON</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../publications-using-neuron.html">Publications using NEURON</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">NEURON scripting:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../scripting.html">Running Python and HOC scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/index.html">NEURON Python documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">NEURON HOC documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../index.html#quick-links">Quick Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#basic-programming">Basic Programming</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html#model-specification">Model Specification</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../guitools.html">Model Specification GUI Tools</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../programmatic.html">Programmatic Model Specification</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="topology.html">Topology</a></li>
<li class="toctree-l4"><a class="reference internal" href="ions.html">Ions</a></li>
<li class="toctree-l4"><a class="reference internal" href="mechanisms.html">Dynamics (Channels, etc…)</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Basic Reaction-Diffusion</a></li>
<li class="toctree-l4"><a class="reference internal" href="network.html">Networks</a></li>
<li class="toctree-l4"><a class="reference internal" href="electrod.html">Electrode</a></li>
<li class="toctree-l4"><a class="reference internal" href="mechtype.html">MechanismType</a></li>
<li class="toctree-l4"><a class="reference internal" href="obsoletestimuli.html">Obsolete Stimuli</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#simulation-control">Simulation Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#visualization">Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#analysis">Analysis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../otherscripting.html">Other scripting languages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/index.html">Python tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rxd-tutorials/index.html">Python RXD tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../coreneuron/index.html">CoreNEURON</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">NMODLanguage:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../nmodl/index.html">NMODLanguage</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../scm/index.html">NEURON SCM and Release</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev/index.html">NEURON Development topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doxygen.html">C/C++ API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Removed Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../removed_features.html">Removed Features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Changelog</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html">NEURON 8.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html#neuron-8-1">NEURON 8.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html#neuron-8-0">NEURON 8.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html#contributors">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html#feedback-help">Feedback / Help</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">NEURON</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">NEURON HOC documentation</a></li>
          <li class="breadcrumb-item"><a href="../programmatic.html">Programmatic Model Specification</a></li>
      <li class="breadcrumb-item active">Basic Reaction-Diffusion</li>
<li class="wy-breadcrumbs-aside">
    
    
        
        <a href="../../../..html/../python/modelspec/programmatic/rxd.html" > Switch to Python</a>
    
</li>

      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/hoc/modelspec/programmatic/rxd.rst.txt" rel="nofollow"> View page source</a>
      </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p><a href="#rxd.nthread" title="Link to this definition">rxd.nthread</a> &middot; <a href="#rxd.re_init" title="Link to this definition">rxd.re_init</a> &middot; <a href="#rxd.set_solve_type" title="Link to this definition">rxd.set_solve_type</a></p><p><dl class="docutils"><dt><a href="#rxd.Extracellular" title="Link to this definition">rxd.Extracellular</a></dt><dd></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.MultiCompartmentReaction" title="Link to this definition">rxd.MultiCompartmentReaction</a></dt><dd></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.nodelist.NodeList" title="Link to this definition">rxd.nodelist.NodeList</a></dt><dd></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.Parameter" title="Link to this definition">rxd.Parameter</a></dt><dd></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.Rate" title="Link to this definition">rxd.Rate</a></dt><dd></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.Reaction" title="Link to this definition">rxd.Reaction</a></dt><dd></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.Region" title="Link to this definition">rxd.Region</a></dt><dd></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.RxDException" title="Link to this definition">rxd.RxDException</a></dt><dd></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.Species" title="Link to this definition">rxd.Species</a></dt><dd></dd></dl></p><p><dl class="docutils"><dt><a href="#rxd.State" title="Link to this definition">rxd.State</a></dt><dd></dd></dl></p><section id="basic-reaction-diffusion">
<span id="hoc-neuron-rxd"></span><h1>Basic Reaction-Diffusion<a class="headerlink" href="#basic-reaction-diffusion" title="Link to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>NEURON provides the <code class="docutils literal notranslate"><span class="pre">rxd</span></code> submodule to simplify and standardize the specification of
models incorporating reaction-diffusion dynamics, including ion accumulation.
The interface is implemented using Python, however as long as Python is available to
NEURON, reaction-diffusion dynamics may be specified using HOC.</p>
<p>We can access the <code class="docutils literal notranslate"><span class="pre">rxd</span></code> module in HOC via:</p>
<div class="highlight-hoc notranslate"><div class="highlight"><pre><span></span>objref pyobj, h, rxd

{
    // load reaction-diffusion support and get convenient handles
    nrnpython(&quot;from neuron import h, rxd&quot;)
    pyobj = new PythonObject()
    rxd = pyobj.rxd
    h = pyobj.h
}
</pre></div>
</div>
<p>The above additionally provides access to an object called <code class="docutils literal notranslate"><span class="pre">h</span></code> which is traditionally
how Python accesses core NEURON functionality (e.g. in Python one would use h. <a class="reference internal" href="../../../python/programming/math/vector.html#Vector" title="Vector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vector</span></code></a>
instead of <a class="reference internal" href="../../programming/math/vector.html#Vector" title="Vector"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">Vector</span></code></a>). You might not need to use h since when working in HOC,
but it does provide certain convenient functions like <code class="xref py py-func docutils literal notranslate"><span class="pre">h.allsec()</span></code>, which returns
an iterable of all sections usable with <code class="docutils literal notranslate"><span class="pre">rxd</span></code> without  having to explicitly construct
a <a class="reference internal" href="topology/seclist.html#SectionList" title="SectionList"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">SectionList</span></code></a>.</p>
<p>The main gotchas of using rxd in HOC is that (1) <code class="docutils literal notranslate"><span class="pre">rxd</span></code> in Python uses operator overloading to
specify reactants and products; in HOC, one must use <code class="docutils literal notranslate"><span class="pre">__add__</span></code>, etc instead.
(2) rxd in Python is usually used with keyword arguments; in HOC, everything must be
specified using positional notation.</p>
<p>Here’s a full working example that simulates a calcium buffering reaction:
<code class="docutils literal notranslate"><span class="pre">Ca</span> <span class="pre">+</span> <span class="pre">Buf</span> <span class="pre">&lt;&gt;</span> <span class="pre">CaBuf</span></code>:</p>
<div class="highlight-hoc notranslate"><div class="highlight"><pre><span></span>objref pyobj, h, rxd, cyt, ca, buf, cabuf, buffering, g

{
    // load reaction-diffusion support and get convenient handles
    nrnpython(&quot;from neuron import h, rxd&quot;)
    pyobj = new PythonObject()
    rxd = pyobj.rxd
    h = pyobj.h
}

{
    // define the domain and the dynamics
    create soma

    cyt = rxd.Region(h.allsec(), &quot;i&quot;)
    ca = rxd.Species(cyt, 0, &quot;ca&quot;, 2, 1)
    buf = rxd.Species(cyt, 0, &quot;buf&quot;, 0, 1)
    cabuf = rxd.Species(cyt, 0, &quot;cabuf&quot;, 0, 0)

    buffering = rxd.Reaction(ca.__add__(buf), cabuf, 1, 0.1)
}

{
    // if launched with nrniv, we need this to get graph to update automatically
    // and to use run()
    load_file(&quot;stdrun.hoc&quot;)
}

{
    // define the graph
    g = new Graph()
    g.addvar(&quot;ca&quot;, &amp;soma.cai(0.5), 1, 1)
    g.addvar(&quot;cabuf&quot;, &amp;soma.cabufi(0.5), 2, 1)
    g.size(0, 10, 0, 1)
    graphList[0].append(g)
}

{
    // run the simulation
    tstop = 20
    run()
}
</pre></div>
</div>
<p>In particular, note that instead of <code class="docutils literal notranslate"><span class="pre">ca</span> <span class="pre">+</span> <span class="pre">buf</span></code> one must write
<code class="docutils literal notranslate"><span class="pre">ca.__add__(buf)</span></code>.</p>
<p>In general, a reaction-diffusion model specification involves answering three conceptual questions:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#hoc-rxd-where"><span class="std std-ref">Where</span></a> the dynamics are occurring (specified using an <a class="reference internal" href="#rxd.Region" title="rxd.Region"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Region</span></code></a> or <a class="reference internal" href="#rxd.Extracellular" title="rxd.Extracellular"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Extracellular</span></code></a>)</p></li>
<li><p><a class="reference internal" href="#hoc-rxd-who"><span class="std std-ref">Who</span></a> is involved (specified using an <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a> or <a class="reference internal" href="#rxd.State" title="rxd.State"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.State</span></code></a>)</p></li>
<li><p><a class="reference internal" href="#hoc-rxd-what"><span class="std std-ref">What</span></a> the reactions are (specified using <a class="reference internal" href="#rxd.Reaction" title="rxd.Reaction"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Reaction</span></code></a>, <a class="reference internal" href="#rxd.Rate" title="rxd.Rate"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Rate</span></code></a>, or <a class="reference internal" href="#rxd.MultiCompartmentReaction" title="rxd.MultiCompartmentReaction"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.MultiCompartmentReaction</span></code></a>)</p></li>
</ol>
<p>Another key class is <a class="reference internal" href="#rxd.Parameter" title="rxd.Parameter"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Parameter</span></code></a> for defining spatially varying parameters.
Integration options may be specified using <a class="reference internal" href="#rxd.set_solve_type" title="rxd.set_solve_type"><code class="xref hoc hoc-func docutils literal notranslate"><span class="pre">rxd.set_solve_type()</span></code></a>.</p>
</section>
<section id="specifying-the-domain">
<span id="hoc-rxd-where"></span><h2>Specifying the domain<a class="headerlink" href="#specifying-the-domain" title="Link to this heading"></a></h2>
<p>NEURON provides two main classes for defining the domain where a given set of reaction-diffusion rules
applies: <a class="reference internal" href="#rxd.Region" title="rxd.Region"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Region</span></code></a> and <a class="reference internal" href="#rxd.Extracellular" title="rxd.Extracellular"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Extracellular</span></code></a> for intra- and extracellular domains,
respectively. Once defined, they are generally interchangeable in the specification of the species involved,
the reactions, etc. The exact shape of intracellular regions may be specified using any of a number of
geometries, but the default is to include the entire intracellular space.</p>
<section id="intracellular-regions-and-regions-in-frankenhauser-hodgkin-space">
<h3>Intracellular regions and regions in Frankenhauser-Hodgkin space<a class="headerlink" href="#intracellular-regions-and-regions-in-frankenhauser-hodgkin-space" title="Link to this heading"></a></h3>
<dl class="hoc class">
<dt class="sig sig-object hoc" id="rxd.Region">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">Region</span></span><a class="headerlink" href="#rxd.Region" title="Link to this definition"></a></dt>
<dd><p>Declares a conceptual intracellular region of the neuron.</p>
<p>Syntax:</p>
<blockquote>
<div><div class="highlight-hoc notranslate"><div class="highlight"><pre><span></span>r = rxd.Region(secs, nrn_region, geometry, dimension, dx, name)
</pre></div>
</div>
<p>In NEURON 7.4+, <code class="docutils literal notranslate"><span class="pre">secs</span></code> is optional at initial region declaration, but it
must be specified before the reaction-diffusion model is instantiated.</p>
<p>All arguments are optional, but all prior arguments must be specified.
To use the default values for the prior arguments, specify their values as
<code class="docutils literal notranslate"><span class="pre">pyobj.None</span></code>.</p>
<p>Here:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">secs</span></code> is a <a class="reference internal" href="topology/seclist.html#SectionList" title="SectionList"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">SectionList</span></code></a> or any Python iterable of sections (e.g. <code class="docutils literal notranslate"><span class="pre">h.allsec()</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nrn_region</span></code> specifies the classic NEURON region associated with this object and must be either <code class="docutils literal notranslate"><span class="pre">&quot;i&quot;</span></code> for the region just inside the plasma membrane, <code class="docutils literal notranslate"><span class="pre">&quot;o&quot;</span></code> for the region just outside the plasma membrane or <code class="docutils literal notranslate"><span class="pre">pyobj.None</span></code> for none of the above.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> is the name of the region (e.g. <code class="docutils literal notranslate"><span class="pre">cyt</span></code> or <code class="docutils literal notranslate"><span class="pre">er</span></code>); this has no effect on the simulation results but it is helpful for debugging</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dx</span></code> deprecated; when specifying <code class="docutils literal notranslate"><span class="pre">name</span></code> pass in <code class="docutils literal notranslate"><span class="pre">pyobj.None</span></code> here</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dimension</span></code> deprecated; when specifying <code class="docutils literal notranslate"><span class="pre">name</span></code> pass in <code class="docutils literal notranslate"><span class="pre">pyobj.None</span></code> here</p></li>
</ul>
</div></blockquote>
<dl class="py property">
<dt class="sig sig-object py" id="rxd.Region.nrn_region">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.Region.</span></span><span class="sig-name descname"><span class="pre">nrn_region</span></span><a class="headerlink" href="#rxd.Region.nrn_region" title="Link to this definition"></a></dt>
<dd><p>Get or set the classic NEURON region associated with this object.</p>
<p>There are three possible values:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'i'</span></code> – just inside the plasma membrane</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'o'</span></code> – just outside the plasma membrane</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pyobj.None</span></code> – none of the above</p></li>
</ul>
</div></blockquote>
<p><em>Setting requires NEURON 7.4+, and then only before the reaction-diffusion model is instantiated.</em></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.Region.secs">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.Region.</span></span><span class="sig-name descname"><span class="pre">secs</span></span><a class="headerlink" href="#rxd.Region.secs" title="Link to this definition"></a></dt>
<dd><p>Get or set the sections associated with this region.</p>
<p>The sections may be expressed as a <a class="reference internal" href="topology/seclist.html#SectionList" title="SectionList"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">SectionList</span></code></a> or as any Python
iterable of sections.</p>
<dl class="simple">
<dt>Note: The return value is a copy of the internal section list; modifying</dt><dd><p>it will not change the Region.</p>
</dd>
</dl>
<p><em>Setting requires NEURON 7.4+ and allowed only before the reaction-diffusion model is instantiated.</em></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.Region.geometry">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.Region.</span></span><span class="sig-name descname"><span class="pre">geometry</span></span><a class="headerlink" href="#rxd.Region.geometry" title="Link to this definition"></a></dt>
<dd><p>Get or set the geometry associated with this region.</p>
<p>Setting the geometry to <code class="docutils literal notranslate"><span class="pre">None</span></code> will cause it to default to <code class="docutils literal notranslate"><span class="pre">rxd.geometry.inside</span></code>.</p>
<p><em>Added in NEURON 7.4. Setting allowed only before the reaction-diffusion model is instantiated.</em></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="rxd.Region.name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.Region.</span></span><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#rxd.Region.name" title="Link to this definition"></a></dt>
<dd><p>Get or set the Region’s name.</p>
<p><em>Added in NEURON 7.4.</em></p>
</dd></dl>

</dd></dl>

<section id="for-specifying-the-geometry">
<h4>For specifying the geometry<a class="headerlink" href="#for-specifying-the-geometry" title="Link to this heading"></a></h4>
<p>NEURON provides several built-in geometries for intracellular simulation that may be specified
by passing a <code class="docutils literal notranslate"><span class="pre">geometry</span></code> argument to the <a class="reference internal" href="../../../python/modelspec/programmatic/rxd.html#rxd.Region" title="rxd.Region"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Region</span></code></a> constructor. New region shapes may
be defined by deriving from <code class="docutils literal notranslate"><span class="pre">neuron.rxd.geometry.RxDGeometry</span></code>.</p>
<p>See the Python programmer’s reference for more on <a class="reference internal" href="../../../python/modelspec/programmatic/rxd.html#rxd.inside" title="rxd.inside"><code class="xref py py-attr docutils literal notranslate"><span class="pre">rxd.inside</span></code></a>. <a class="reference internal" href="../../../python/modelspec/programmatic/rxd.html#rxd.membrane" title="rxd.membrane"><code class="xref py py-attr docutils literal notranslate"><span class="pre">rxd.membrane</span></code></a>,
<a class="reference internal" href="../../../python/modelspec/programmatic/rxd.html#rxd.DistributedBoundary" title="rxd.DistributedBoundary"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.DistributedBoundary</span></code></a>, <a class="reference internal" href="../../../python/modelspec/programmatic/rxd.html#rxd.FractionalVolume" title="rxd.FractionalVolume"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.FractionalVolume</span></code></a>, <a class="reference internal" href="../../../python/modelspec/programmatic/rxd.html#rxd.Shell" title="rxd.Shell"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Shell</span></code></a>,
<a class="reference internal" href="../../../python/modelspec/programmatic/rxd.html#rxd.FixedCrossSection" title="rxd.FixedCrossSection"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.FixedCrossSection</span></code></a>, <a class="reference internal" href="../../../python/modelspec/programmatic/rxd.html#rxd.FixedPerimeter" title="rxd.FixedPerimeter"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.FixedPerimeter</span></code></a>, and
<a class="reference internal" href="../../../python/modelspec/programmatic/rxd.html#rxd.ScalableBorder" title="rxd.ScalableBorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.ScalableBorder</span></code></a>.</p>
</section>
</section>
</section>
<section id="extracellular-regions">
<h2>Extracellular regions<a class="headerlink" href="#extracellular-regions" title="Link to this heading"></a></h2>
<dl class="hoc class">
<dt class="sig sig-object hoc" id="rxd.Extracellular">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">Extracellular</span></span><a class="headerlink" href="#rxd.Extracellular" title="Link to this definition"></a></dt>
<dd><p>Declare a extracellular region to be simulated in 3D;
unlike <a class="reference internal" href="#rxd.Region" title="rxd.Region"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Region</span></code></a>, this <em>always</em> describes the extracellular region.</p>
<p>See the entry for <a class="reference internal" href="../../../python/modelspec/programmatic/rxd.html#rxd.Extracellular" title="rxd.Extracellular"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Extracellular</span></code></a> in the Python programmer’s reference
for more information.</p>
</dd></dl>

</section>
<section id="defining-proteins-ions-etc">
<span id="hoc-rxd-who"></span><h2>Defining proteins, ions, etc<a class="headerlink" href="#defining-proteins-ions-etc" title="Link to this heading"></a></h2>
<p>Values that are distributed spatially on an <a class="reference internal" href="#rxd.Region" title="rxd.Region"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Region</span></code></a> or <a class="reference internal" href="#rxd.Extracellular" title="rxd.Extracellular"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Extracellular</span></code></a> may be defined using
an <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a> if they represent things that change and diffuse, an <a class="reference internal" href="#rxd.State" title="rxd.State"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.State</span></code></a> if they’re in fixed locations but changeable
(e.g. gates in an IP3R), or an <a class="reference internal" href="#rxd.Parameter" title="rxd.Parameter"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Parameter</span></code></a> if
they are just fixed values.</p>
<dl class="hoc class">
<dt class="sig sig-object hoc" id="rxd.Species">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">Species</span></span><a class="headerlink" href="#rxd.Species" title="Link to this definition"></a></dt>
<dd><p>Declare an ion/protein/etc that can react and diffuse.</p>
<p>See the entry for <a class="reference internal" href="../../../python/modelspec/programmatic/rxd.html#rxd.Species" title="rxd.Species"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a> in the Python programmer’s reference
for more information.</p>
</dd></dl>

<dl class="hoc class">
<dt class="sig sig-object hoc" id="rxd.State">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">State</span></span><a class="headerlink" href="#rxd.State" title="Link to this definition"></a></dt>
<dd><p>Like an <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a> but indicates the semantics
of something that is not intended to diffuse.</p>
<p>See the entry for <a class="reference internal" href="../../../python/modelspec/programmatic/rxd.html#rxd.State" title="rxd.State"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.State</span></code></a> in the Python programmer’s reference
for more information.</p>
</dd></dl>

<dl class="hoc class">
<dt class="sig sig-object hoc" id="rxd.Parameter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">Parameter</span></span><a class="headerlink" href="#rxd.Parameter" title="Link to this definition"></a></dt>
<dd><p>Declares a parameter, that can be used in place of a <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a>, but unlike <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a> a parameter will not change.</p>
<p>See the entry for <a class="reference internal" href="../../../python/modelspec/programmatic/rxd.html#rxd.Parameter" title="rxd.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Parameter</span></code></a> in the Python programmer’s reference
for more information.</p>
</dd></dl>

</section>
<section id="defining-reactions">
<span id="hoc-rxd-what"></span><h2>Defining reactions<a class="headerlink" href="#defining-reactions" title="Link to this heading"></a></h2>
<p>NEURON provides three classes for specifying reaction dynamics: <a class="reference internal" href="#rxd.Reaction" title="rxd.Reaction"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Reaction</span></code></a> for single-compartment (local)
reactions; <a class="reference internal" href="#rxd.MultiCompartmentReaction" title="rxd.MultiCompartmentReaction"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.MultiCompartmentReaction</span></code></a> for reactions spanning multiple compartments (e.g. a pump that
moves calcium from the cytosol into the ER changes concentration in two regions), and <a class="reference internal" href="#rxd.Rate" title="rxd.Rate"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Rate</span></code></a> for
specifying changes to a state variable directly by an expression to be added to a differential equation.
Developers may introduce new forms of reaction specification by subclassing
<code class="docutils literal notranslate"><span class="pre">neuron.rxd.generalizedReaction.GeneralizedReaction</span></code>, but this is not necessary for typical modeling usage.</p>
<p>It is sometimes necessary to build rate expressions including mathematical functions. To do so, use the
functions defined in <code class="docutils literal notranslate"><span class="pre">neuron.rxd.rxdmath</span></code> as listed <span class="xref std std-ref">below</span>.</p>
<dl class="hoc class">
<dt class="sig sig-object hoc" id="rxd.Reaction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">Reaction</span></span><a class="headerlink" href="#rxd.Reaction" title="Link to this definition"></a></dt>
<dd><p>Reaction at a point. May be mass-action or defined via custom dynamics.</p>
<p>Syntax:</p>
<blockquote>
<div><div class="highlight-hoc notranslate"><div class="highlight"><pre><span></span>r1 = rxd.Reaction(reactant_sum, product_sum, forward_rate,
                  backward_rate, regions, custom_dynamics)
</pre></div>
</div>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">backward_rate</span></code>, <code class="docutils literal notranslate"><span class="pre">regions</span></code>, and <code class="docutils literal notranslate"><span class="pre">custom_dynamics</span></code> are optional, but
when used from HOC, all previous parameters must be specified. To specify
that the dynamics should be custom (i.e. fully defined by the rates) without
a <code class="docutils literal notranslate"><span class="pre">backward_rate</span></code> or restricting to specific regions, pass <code class="docutils literal notranslate"><span class="pre">0</span></code> for
<code class="docutils literal notranslate"><span class="pre">backward_rate</span></code> and <code class="docutils literal notranslate"><span class="pre">pyobj.None</span></code> for <code class="docutils literal notranslate"><span class="pre">regions</span></code>.</p>
<p>Example:</p>
<blockquote>
<div><div class="highlight-hoc notranslate"><div class="highlight"><pre><span></span>// here: ca + buf &lt;&gt; cabuf, kf = 1, kb = 0.1
buffering = rxd.Reaction(ca.__add__(buf), cabuf, 1, 0.1)
</pre></div>
</div>
</div></blockquote>
<p>Note the need to use <code class="docutils literal notranslate"><span class="pre">__add__</span></code> instead of <code class="docutils literal notranslate"><span class="pre">+</span></code>. To avoid this cumbersome
notation, consider defining the rate expression in Python via <a class="reference internal" href="../../programming/python-from-hoc.html#nrnpython" title="nrnpython"><code class="xref hoc hoc-func docutils literal notranslate"><span class="pre">nrnpython()</span></code></a>.
That is, we could write</p>
<blockquote>
<div><div class="highlight-hoc notranslate"><div class="highlight"><pre><span></span>// here: ca + buf &lt;&gt; cabuf, kf = 1, kb = 0.1
nrnpython(&quot;from neuron import h&quot;)
nrnpython(&quot;ca_plus_buf = h.ca + h.buf&quot;)
buffering = rxd.Reaction(pyobj.ca_plus_buf, cabuf, 1, 0.1)
</pre></div>
</div>
</div></blockquote>
<p>This is admittedly longer than the previous example, but it allows the creation
of relatively complicated expressions for rate constants:</p>
<blockquote>
<div><div class="highlight-hoc notranslate"><div class="highlight"><pre><span></span>nrnpython(&quot;from neuron import h&quot;)
nrnpython(&quot;kf = h.ca ** 2 / (h.ca ** 2 + (1e-3) ** 2)&quot;)
// and then work with pyobj.kf
</pre></div>
</div>
</div></blockquote>
<p>For more, see the <a class="reference internal" href="../../../python/modelspec/programmatic/rxd.html#rxd.Reaction" title="rxd.Reaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Reaction</span></code></a> entry in the Python Programmer’s reference.</p>
</dd></dl>

<dl class="hoc class">
<dt class="sig sig-object hoc" id="rxd.Rate">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">Rate</span></span><a class="headerlink" href="#rxd.Rate" title="Link to this definition"></a></dt>
<dd><p>Declare a contribution to the rate of change of a species or other state variable.</p>
<p>Syntax:</p>
<blockquote>
<div><div class="highlight-hoc notranslate"><div class="highlight"><pre><span></span>r = rxd.Rate(species, rate, regions, membrane_flux)
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">regions</span></code> and <code class="docutils literal notranslate"><span class="pre">membrane_flux</span></code> are optional, but if <code class="docutils literal notranslate"><span class="pre">membrane_flux</span></code>
is specified, then <code class="docutils literal notranslate"><span class="pre">regions</span></code> (the set of regions where the rate occurs)
must also be specified. The default behavior is that the rate applies on
all regions where all involved species are present; this region rule applies
when <code class="docutils literal notranslate"><span class="pre">regions</span></code> is ommitted or <code class="docutils literal notranslate"><span class="pre">pyobj.None</span></code>.</p>
</div></blockquote>
<p>Example:</p>
<blockquote>
<div><div class="highlight-hoc notranslate"><div class="highlight"><pre><span></span>constant_production = rxd.Rate(protein, k)
</pre></div>
</div>
</div></blockquote>
<p>If this was the only contribution to protein dynamics and there was no
diffusion, the above would be equivalent to:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dprotein</span><span class="o">/</span><span class="n">dt</span> <span class="o">=</span> <span class="n">k</span>
</pre></div>
</div>
</div></blockquote>
<p>If there are multiple <a class="reference internal" href="#rxd.Rate" title="rxd.Rate"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Rate</span></code></a> objects (or an
<a class="reference internal" href="#rxd.Reaction" title="rxd.Reaction"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Reaction</span></code></a>, etc) acting on
the same species, then their effects are summed.</p>
</dd></dl>

<dl class="hoc class">
<dt class="sig sig-object hoc" id="rxd.MultiCompartmentReaction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">MultiCompartmentReaction</span></span><a class="headerlink" href="#rxd.MultiCompartmentReaction" title="Link to this definition"></a></dt>
<dd><p>Specify a reaction spanning multiple regions to be added to the system.
Use this for, for example, pumps and channels, or interactions between
species living in a volume (e.g. the cytosol) and species on a
membrane (e.g. the plasma membrane).
For each species/state/parameter, you must specify what region you are
referring to, as it could be present in multiple regions. You must
also specify a <cite>membrane</cite> or a <cite>border</cite> (these are treated as synonyms)
that separates the regions involved in your reaction. This is necessary
because the default behavior is to scale the reaction rate by the
border area, as would be expected if one of the species involved is a
pump that is binding to a species in the volume. If this is not the
desired behavior, pass the argument <code class="docutils literal notranslate"><span class="pre">0</span></code> for the <code class="docutils literal notranslate"><span class="pre">scale_by_area</span></code> field.
Pass the argument <code class="docutils literal notranslate"><span class="pre">1</span></code> for <code class="docutils literal notranslate"><span class="pre">membrane_flux</span></code> if the reaction produces a current across
the plasma membrane that should affect the membrane potential.
Unlike <a class="reference internal" href="#rxd.Reaction" title="rxd.Reaction"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Reaction</span></code></a> objects, the base units for the rates are in terms of
molecules per square micron per ms.</p>
</dd></dl>

<section id="mathematical-functions-for-rate-expressions">
<h3>Mathematical functions for rate expressions<a class="headerlink" href="#mathematical-functions-for-rate-expressions" title="Link to this heading"></a></h3>
<p>NEURON’s <code class="docutils literal notranslate"><span class="pre">neuron.rxd.rxdmath</span></code> module provides a number of mathematical functions that
can be used to define reaction rates. These generally mirror the functions available
through Python’s <code class="docutils literal notranslate"><span class="pre">math</span></code> module but support <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a> objects.</p>
<p>To use any of these, first do:</p>
<blockquote>
<div><div class="highlight-hoc notranslate"><div class="highlight"><pre><span></span>objref pyobj, rxdmath

{
    // load rxdmath
    nrnpython(&quot;from neuron.rxd import rxdmath&quot;)
    pyobj = new PythonObject()
    rxdmath = pyobj.rxdmath
}
</pre></div>
</div>
<p>For a full runnable example, see <a class="reference external" href="../../../rxd-tutorials/thresholds.html">this Python tutorial</a>
which as here uses the hyperbolic tangent as an approximate on/off switch for the reaction.</p>
</div></blockquote>
<p>Full documentation on this submodule (under the Python programmer’s reference, but the HOC interface is identical) is available <a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath-prog-ref"><span class="std std-ref">here</span></a> or you may go
directly to the documentation for any of its specific functions:
<a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.acos" title="rxdmath.acos"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.acos()</span></code></a>, <a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.acosh" title="rxdmath.acosh"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.acosh()</span></code></a>, <a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.asin" title="rxdmath.asin"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.asin()</span></code></a>,
<a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.asinh" title="rxdmath.asinh"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.asinh()</span></code></a>, <a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.atan" title="rxdmath.atan"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.atan()</span></code></a>, <a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.atan2" title="rxdmath.atan2"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.atan2()</span></code></a>,
<a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.ceil" title="rxdmath.ceil"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.ceil()</span></code></a>, <a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.copysign" title="rxdmath.copysign"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.copysign()</span></code></a>,
<a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.cos" title="rxdmath.cos"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.cos()</span></code></a>, <a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.cosh" title="rxdmath.cosh"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.cosh()</span></code></a>,
<a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.degrees" title="rxdmath.degrees"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.degrees()</span></code></a>, <a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.erf" title="rxdmath.erf"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.erf()</span></code></a>,
<a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.erfc" title="rxdmath.erfc"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.erfc()</span></code></a>, <a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.exp" title="rxdmath.exp"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.exp()</span></code></a>,
<a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.expm1" title="rxdmath.expm1"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.expm1()</span></code></a>, <a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.fabs" title="rxdmath.fabs"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.fabs()</span></code></a>,
<a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.factorial" title="rxdmath.factorial"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.factorial()</span></code></a>, <a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.floor" title="rxdmath.floor"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.floor()</span></code></a>,
<a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.fmod" title="rxdmath.fmod"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.fmod()</span></code></a>, <a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.gamma" title="rxdmath.gamma"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.gamma()</span></code></a>,
<a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.lgamma" title="rxdmath.lgamma"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.lgamma()</span></code></a>, <a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.log" title="rxdmath.log"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.log()</span></code></a>,
<a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.log10" title="rxdmath.log10"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.log10()</span></code></a>, <a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.log1p" title="rxdmath.log1p"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.log1p()</span></code></a>,
<a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.pow" title="rxdmath.pow"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.pow()</span></code></a>, <a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.pow" title="rxdmath.pow"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.pow()</span></code></a>,
<a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.sin" title="rxdmath.sin"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.sin()</span></code></a>, <a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.sinh" title="rxdmath.sinh"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.sinh()</span></code></a>,
<a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.sqrt" title="rxdmath.sqrt"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.sqrt()</span></code></a>, <a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.tan" title="rxdmath.tan"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.tan()</span></code></a>,
<a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.tanh" title="rxdmath.tanh"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.tanh()</span></code></a>, <a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.trunc" title="rxdmath.trunc"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.trunc()</span></code></a>,
<a class="reference internal" href="../../../python/modelspec/programmatic/rxdmath.html#rxdmath.vtrap" title="rxdmath.vtrap"><code class="xref py py-func docutils literal notranslate"><span class="pre">rxdmath.vtrap()</span></code></a></p>
</section>
</section>
<section id="manipulating-nodes">
<h2>Manipulating nodes<a class="headerlink" href="#manipulating-nodes" title="Link to this heading"></a></h2>
<p>A <code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.node.Node</span></code> represents a particular state value or <a class="reference internal" href="../../../python/modelspec/programmatic/rxd.html#rxd.Parameter" title="rxd.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.Parameter</span></code></a> in a particular location. Individual <code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.node.Node</span></code> objects are typically obtained either from being passed to an initialization function or by filtering or selecting from an <a class="reference internal" href="#rxd.nodelist.NodeList" title="rxd.nodelist.NodeList"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.nodelist.NodeList</span></code></a> returned by <a class="reference internal" href="../../../python/modelspec/programmatic/rxd.html#rxd.Species.nodes" title="rxd.Species.nodes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">rxd.Species.nodes</span></code></a>. Node objects are often used for recording concentration using <a class="reference internal" href="../../../python/modelspec/programmatic/rxd.html#rxd.node.Node._ref_concentration" title="rxd.node.Node._ref_concentration"><code class="xref py py-attr docutils literal notranslate"><span class="pre">rxd.node.Node._ref_concentration</span></code></a>.</p>
<dl class="hoc class">
<dt class="sig sig-object hoc" id="rxd.nodelist.NodeList">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.nodelist.</span></span><span class="sig-name descname"><span class="pre">NodeList</span></span><a class="headerlink" href="#rxd.nodelist.NodeList" title="Link to this definition"></a></dt>
<dd><p>An <a class="reference internal" href="#rxd.nodelist.NodeList" title="rxd.nodelist.NodeList"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.nodelist.NodeList</span></code></a> is a subclass of a Python <a class="reference external" href="https://docs.python.org/3/tutorial/datastructures.html#more-on-lists">list</a>
containing <code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.node.Node</span></code> objects. It is not intended to be created directly in a model, but rather is returned by
<code class="xref hoc hoc-attr docutils literal notranslate"><span class="pre">rxd.Species.nodes</span></code>.</p>
<p>Standard Python list methods are supported, including <code class="docutils literal notranslate"><span class="pre">.append(node)</span></code>, <code class="docutils literal notranslate"><span class="pre">.extend(node_list)</span></code>,
<code class="docutils literal notranslate"><span class="pre">.insert(i,</span> <span class="pre">node)</span></code>, <code class="docutils literal notranslate"><span class="pre">.index(node)</span></code>. To access the item in the ith position (0-indexed) of a NodeList
<code class="docutils literal notranslate"><span class="pre">nl</span></code> in HOC, use <code class="docutils literal notranslate"><span class="pre">nl.__get__item(i)</span></code>. (In Python, one could say <code class="docutils literal notranslate"><span class="pre">nl[i]</span></code>, but
this notation is not supported by HOC.)</p>
<p>A key added functionality is the ability to filter the
nodes by rxd property (returning a new
<a class="reference internal" href="#rxd.nodelist.NodeList" title="rxd.nodelist.NodeList"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.nodelist.NodeList</span></code></a>). Any filter object supported
by the <code class="docutils literal notranslate"><span class="pre">.satifies</span></code> method of the node types present in the
<a class="reference internal" href="#rxd.nodelist.NodeList" title="rxd.nodelist.NodeList"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.nodelist.NodeList</span></code></a> may be passed in parentheses;
e.g.</p>
<blockquote>
<div><p>To filter a <code class="docutils literal notranslate"><span class="pre">new_node_list</span></code> to only contain nodes
present in the <a class="reference internal" href="#rxd.Region" title="rxd.Region"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Region</span></code></a> <code class="docutils literal notranslate"><span class="pre">er</span></code>:</p>
<blockquote>
<div><div class="highlight-hoc notranslate"><div class="highlight"><pre><span></span>just_er = new_node_list(er)
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
<p>See the entry for <a class="reference internal" href="../../../python/modelspec/programmatic/rxd.html#rxd.nodelist.NodeList" title="rxd.nodelist.NodeList"><code class="xref py py-class docutils literal notranslate"><span class="pre">rxd.nodelist.NodeList</span></code></a> in the Python programmer’s
reference for more information.</p>
</dd></dl>

</section>
<section id="membrane-potential">
<h2>Membrane potential<a class="headerlink" href="#membrane-potential" title="Link to this heading"></a></h2>
<dl class="py property">
<dt class="sig sig-object py" id="rxd.v">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">v</span></span><a class="headerlink" href="#rxd.v" title="Link to this definition"></a></dt>
<dd><p>A special object representing the local membrane potential in a reaction-rate
expression. This can be used with <a class="reference internal" href="#rxd.Rate" title="rxd.Rate"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Rate</span></code></a> and
<a class="reference internal" href="#rxd.MultiCompartmentReaction" title="rxd.MultiCompartmentReaction"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.MultiCompartmentReaction</span></code></a> to build ion channel models as an alternative
to using NMODL, NeuroML (and converting to NMODL via <a class="reference external" href="https://github.com/NeuroML/jNeuroML">jneuroml</a>), the ChannelBuilder,
or <a class="reference internal" href="kschan.html#KSChan" title="KSChan"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">KSChan</span></code></a>.</p>
<p>(If you want a numeric value for the current membrane potential at a
segment <code class="docutils literal notranslate"><span class="pre">sec(x)</span></code> use <code class="docutils literal notranslate"><span class="pre">sec.v(x)</span></code> instead; this syntax is slightly different
from the Python convention for accessing membrane potential.)</p>
</dd></dl>

</section>
<section id="synchronization-with-segments">
<h2>Synchronization with segments<a class="headerlink" href="#synchronization-with-segments" title="Link to this heading"></a></h2>
<p>Changes to <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a> node concentrations are propagated to segment-level concentrations automatically no later
than the next time step. This is generally the right direction for information to flow, however NEURON also provides
a <a class="reference internal" href="#rxd.re_init" title="rxd.re_init"><code class="xref hoc hoc-func docutils literal notranslate"><span class="pre">rxd.re_init()</span></code></a> function to transfer data from segments to <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a>.</p>
<dl class="hoc function">
<dt class="sig sig-object hoc" id="rxd.re_init">
<span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">re_init</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rxd.re_init" title="Link to this definition"></a></dt>
<dd><p>Reinitialize all <a class="reference internal" href="#rxd.Species" title="rxd.Species"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Species</span></code></a>, <a class="reference internal" href="#rxd.State" title="rxd.State"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.State</span></code></a>, and <a class="reference internal" href="#rxd.Parameter" title="rxd.Parameter"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.Parameter</span></code></a> from changes made
to NEURON segment-level concentrations. This calls the corresponding <code class="xref hoc hoc-meth docutils literal notranslate"><span class="pre">rxd.Species.re_init()</span></code> methods.
Note that reaction-diffusion models may contain concentration data at a finer-resolution than that of a
segment (e.g. for models being simulated in 3D).</p>
<p>Syntax:</p>
<blockquote>
<div><div class="highlight-hoc notranslate"><div class="highlight"><pre><span></span>rxd.re_init()
</pre></div>
</div>
</div></blockquote>
</dd></dl>

</section>
<section id="numerical-options">
<h2>Numerical options<a class="headerlink" href="#numerical-options" title="Link to this heading"></a></h2>
<dl class="hoc function">
<dt class="sig sig-object hoc" id="rxd.nthread">
<span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">nthread</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rxd.nthread" title="Link to this definition"></a></dt>
<dd><p>Specify a number of threads to use for extracellular and 3D intracellular simulation. Currently has
no effect on 1D reaction-diffusion models.</p>
<p>Syntax:</p>
<blockquote>
<div><div class="highlight-hoc notranslate"><div class="highlight"><pre><span></span>rxd.nthread(num_threads)
</pre></div>
</div>
</div></blockquote>
<p>Example:</p>
<blockquote>
<div><p>To simulate using 4 threads:</p>
<div class="highlight-hoc notranslate"><div class="highlight"><pre><span></span>rxd.nthread(4)
</pre></div>
</div>
</div></blockquote>
<p>Thread scaling performance is discussed in the NEURON
<a class="reference external" href="https://doi.org/10.3389/fninf.2018.00041">extracellular</a> and
<a class="reference external" href="https://doi.org/10.1101/2022.01.01.474683">3D intracellular</a> methods papers.</p>
</dd></dl>

<dl class="hoc function">
<dt class="sig sig-object hoc" id="rxd.set_solve_type">
<span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">set_solve_type</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rxd.set_solve_type" title="Link to this definition"></a></dt>
<dd><p>Specify numerical discretization and solver options. Currently the main use is to indicate
Sections where reaction-diffusion should be simulated in 3D.</p>
<p>Syntax:</p>
<blockquote>
<div><div class="highlight-hoc notranslate"><div class="highlight"><pre><span></span>rxd.set_solve_type(domain, dimension)
</pre></div>
</div>
<p>where:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">domain</span></code> – a <a class="reference internal" href="topology/seclist.html#SectionList" title="SectionList"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">SectionList</span></code></a> or other iterable of sections. Pass <code class="docutils literal notranslate"><span class="pre">pyobj.None</span></code> to apply the specification to the entire model.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dimension</span></code> – 1 or 3</p></li>
</ul>
</div></blockquote>
</div></blockquote>
<p>This function may be called multiple times; the last setting for dimension for a given section will apply.
Different sections may be simulated in different dimensions (a so-called hybrid model).</p>
</dd></dl>

</section>
<section id="error-handling">
<h2>Error handling<a class="headerlink" href="#error-handling" title="Link to this heading"></a></h2>
<p>Most errors in the usage of the <code class="docutils literal notranslate"><span class="pre">rxd</span></code> module should
raise a <a class="reference internal" href="#rxd.RxDException" title="rxd.RxDException"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.RxDException</span></code></a>.</p>
<dl class="hoc class">
<dt class="sig sig-object hoc" id="rxd.RxDException">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">rxd.</span></span><span class="sig-name descname"><span class="pre">RxDException</span></span><a class="headerlink" href="#rxd.RxDException" title="Link to this definition"></a></dt>
<dd><p>An exception originating from the <code class="docutils literal notranslate"><span class="pre">rxd</span></code> module
due to invalid usage. This allows distinguishing such
exceptions from other errors.
HOC’s support for Error Handling is limited, so it is generally difficult
to get access to these objects inside HOC, but they might be passed to HOC
via a function called in Python.</p>
<p>The text message of an <a class="reference internal" href="#rxd.RxDException" title="rxd.RxDException"><code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">rxd.RxDException</span></code></a> <code class="docutils literal notranslate"><span class="pre">e</span></code> may be read in HOC as <code class="docutils literal notranslate"><span class="pre">e.__str__()</span></code>.</p>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="mechanisms/nmodl2.html" class="btn btn-neutral float-left" title="NEURON Extension to NMODL" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="network.html" class="btn btn-neutral float-right" title="Networks" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Duke, Yale and the Blue Brain Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>