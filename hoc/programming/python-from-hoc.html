<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HOC accessing Python &mdash; NEURON  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=6933245a" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/design-tabs.js?v=36754332"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Debugging and Internals Access" href="internals.html" />
    <link rel="prev" title="MechanismStandard (Parameter Control)" href="mechstan.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            NEURON
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Building:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../install/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cmake_doc/index.html">CMake Build Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/developer.html">Developer Builds</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../videos/index.html">Training videos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../courses/exercises2018.html">NEURON Course Exercises</a></li>
<li class="toctree-l1"><a class="reference external" href="https://neuron.yale.edu/phpBB">The NEURON forum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../publications.html">Publications about NEURON</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../publications-using-neuron.html">Publications using NEURON</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">NEURON scripting:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../scripting.html">Running Python and HOC scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/index.html">NEURON Python documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">NEURON HOC documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#quick-links">Quick Links</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#basic-programming">Basic Programming</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="hoc.html">HOC Language</a></li>
<li class="toctree-l3"><a class="reference internal" href="mathematics.html">Mathematics</a></li>
<li class="toctree-l3"><a class="reference internal" href="strings.html">Strings</a></li>
<li class="toctree-l3"><a class="reference internal" href="guidesign.html">GUI Design</a></li>
<li class="toctree-l3"><a class="reference internal" href="references.html">Pointers</a></li>
<li class="toctree-l3"><a class="reference internal" href="timer.html">Timer</a></li>
<li class="toctree-l3"><a class="reference internal" href="system.html">System Calls</a></li>
<li class="toctree-l3"><a class="reference internal" href="errors.html">Error Handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamiccode.html">Dynamic Code Loading and Execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="projectmanagement.html">Project Management</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">HOC accessing Python</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#nrnpython"><code class="docutils literal notranslate"><span class="pre">nrnpython()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#PythonObject"><code class="docutils literal notranslate"><span class="pre">PythonObject</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="internals.html">Debugging and Internals Access</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#model-specification">Model Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#simulation-control">Simulation Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#visualization">Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#analysis">Analysis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../otherscripting.html">Other scripting languages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Python tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rxd-tutorials/index.html">Python RXD tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../coreneuron/index.html">CoreNEURON</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">NMODLanguage:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../nmodl/index.html">NMODLanguage</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../scm/index.html">NEURON SCM and Release</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/index.html">NEURON Development topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doxygen.html">C/C++ API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Removed Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../removed_features.html">Removed Features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Changelog</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">NEURON 8.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html#neuron-8-1">NEURON 8.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html#neuron-8-0">NEURON 8.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html#contributors">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html#feedback-help">Feedback / Help</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">NEURON</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">NEURON HOC documentation</a></li>
      <li class="breadcrumb-item active">HOC accessing Python</li>
<li class="wy-breadcrumbs-aside">
    
    
        
        <a href="../../..html/../python/programming/python-from-hoc.html" > Switch to Python</a>
    
</li>

      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/hoc/programming/python-from-hoc.rst.txt" rel="nofollow"> View page source</a>
      </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p><dl class="docutils"><dt><a href="#PythonObject" title="Link to this definition">PythonObject</a></dt><dd></dd></dl></p><section id="hoc-accessing-python">
<span id="hoc-python-accessing-hoc"></span><h1>HOC accessing Python<a class="headerlink" href="#hoc-accessing-python" title="Link to this heading"></a></h1>
<p>This section describes how one can interact with Python from HOC code.
For more information about the Python interface to NEURON, see
<a class="reference internal" href="../../python/index.html#python-prog-ref"><span class="std std-ref">the Python documentation</span></a>.</p>
<dl class="hoc function" id="hoc-function-nrnpython">
<dt class="sig sig-object hoc" id="nrnpython">
<span class="sig-name descname"><span class="pre">nrnpython</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nrnpython" title="Link to this definition"></a></dt>
<dd><dl>
<dt>Syntax:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">nrnpython(&quot;any</span> <span class="pre">python</span> <span class="pre">statement&quot;)</span></code></p>
</dd>
<dt>Description:</dt><dd><p>Executes any python statement. Returns 1 on success; 0 if an exception
was raised or if python support is not available.</p>
<p>In particular, <code class="docutils literal notranslate"><span class="pre">python_available</span> <span class="pre">=</span> <span class="pre">nrnpython(&quot;&quot;)</span></code> is 1 (true) if
python support is available and 0 (false) if python support is not
available.</p>
</dd>
</dl>
<p>Example:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nrnpython</span><span class="p">(</span><span class="s2">&quot;import sys&quot;</span><span class="p">)</span>
<span class="n">nrnpython</span><span class="p">(</span><span class="s2">&quot;print sys.path&quot;</span><span class="p">)</span>
<span class="n">nrnpython</span><span class="p">(</span><span class="s2">&quot;a = [1,2,3]&quot;</span><span class="p">)</span>
<span class="n">nrnpython</span><span class="p">(</span><span class="s2">&quot;print a&quot;</span><span class="p">)</span>
<span class="n">nrnpython</span><span class="p">(</span><span class="s2">&quot;import hoc&quot;</span><span class="p">)</span>
<span class="n">nrnpython</span><span class="p">(</span><span class="s2">&quot;hoc.execute(&#39;print PI&#39;)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

<hr class="docutils" />
<dl class="hoc class">
<dt class="sig sig-object hoc" id="PythonObject">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">PythonObject</span></span><a class="headerlink" href="#PythonObject" title="Link to this definition"></a></dt>
<dd><dl>
<dt>Syntax:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">p</span> <span class="pre">=</span> <span class="pre">new</span> <span class="pre">PythonObject()</span></code></p>
</dd>
<dt>Description:</dt><dd><p>Accesses any python object. Almost equivalent to <code class="xref hoc hoc-class docutils literal notranslate"><span class="pre">HocObject</span></code> in the
python world but because of some hoc syntax limitations, ie. hoc does not
allow an object to be a callable function, and top level indices have
different semantics, we sometimes need to use a special idiom, ie. the ‘_’
method. Strings and double numbers move back and forth between Python and
Hoc (but Python integers, etc. become double values in Hoc, and when they
get back to the Python world, they are doubles).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">objref</span> <span class="n">p</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">new</span> <span class="n">PythonObject</span><span class="p">()</span>
<span class="n">nrnpython</span><span class="p">(</span><span class="s2">&quot;ev = lambda arg : eval(arg)&quot;</span><span class="p">)</span> <span class="o">//</span> <span class="n">interprets</span> <span class="n">the</span> <span class="n">string</span> <span class="n">arg</span> <span class="k">as</span> <span class="n">an</span>
                          <span class="o">//</span><span class="n">expression</span> <span class="ow">and</span> <span class="n">returns</span> <span class="n">the</span> <span class="n">value</span>
<span class="n">objref</span> <span class="n">tup</span>
<span class="nb">print</span> <span class="n">p</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="s2">&quot;3 + 4&quot;</span><span class="p">)</span>       <span class="o">//</span> <span class="n">prints</span> <span class="mi">7</span>
<span class="nb">print</span> <span class="n">p</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="s2">&quot;&#39;hello&#39; + &#39;world&#39;&quot;</span><span class="p">)</span> <span class="o">//</span> <span class="n">prints</span> <span class="n">helloworld</span>
<span class="n">tup</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="s2">&quot;(&#39;xyz&#39;,2,3)&quot;</span><span class="p">)</span> <span class="o">//</span> <span class="n">tup</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">PythonObject</span> <span class="n">wrapping</span> <span class="n">a</span> <span class="n">Python</span> <span class="nb">tuple</span>
<span class="nb">print</span> <span class="n">tup</span>                 <span class="o">//</span> <span class="n">prints</span> <span class="n">PythonObject</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="nb">print</span> <span class="n">tup</span><span class="o">.</span><span class="n">_</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>            <span class="o">//</span> <span class="n">the</span> <span class="mi">2</span><span class="n">th</span> <span class="nb">tuple</span> <span class="n">element</span> <span class="ow">is</span> <span class="mi">3</span>
<span class="nb">print</span> <span class="n">tup</span><span class="o">.</span><span class="n">_</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>            <span class="o">//</span> <span class="n">the</span> <span class="mi">0</span><span class="n">th</span> <span class="nb">tuple</span> <span class="n">element</span> <span class="ow">is</span> <span class="n">xyz</span>

<span class="n">nrnpython</span><span class="p">(</span><span class="s2">&quot;import hoc&quot;</span><span class="p">)</span>   <span class="o">//</span> <span class="n">back</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">Python</span> <span class="n">world</span>
<span class="n">nrnpython</span><span class="p">(</span><span class="s2">&quot;h = hoc.HocObject()&quot;</span><span class="p">)</span> <span class="o">//</span> <span class="n">tup</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">Python</span> <span class="n">Tuple</span> <span class="nb">object</span>
<span class="n">nrnpython</span><span class="p">(</span><span class="s2">&quot;print h.tup&quot;</span><span class="p">)</span>   <span class="o">//</span> <span class="n">prints</span> <span class="p">(</span><span class="s1">&#39;xyz&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that one needs the ‘_’ method, equivalent to ‘this’, because trying to
get at an element through the built-in python method name via</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tup</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>gives the error “TypeError: tuple indices must be integers” since
the Hoc 0 argument is a double 0.0 when it gets into Python.
It is difficult to pass an integer to a Python function from the hoc world.
The only time Hoc doubles appear as integers in Python, is when they are
the value of an index. If the index is not an integer, e.g. a string, use
the __getitem__ idiom.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">objref</span> <span class="n">p</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">new</span> <span class="n">PythonObject</span><span class="p">()</span>
<span class="n">nrnpython</span><span class="p">(</span><span class="s2">&quot;ev = lambda arg : eval(arg)&quot;</span><span class="p">)</span>
<span class="n">objref</span> <span class="n">d</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="s2">&quot;{&#39;one&#39;:1, &#39;two&#39;:2, &#39;three&#39;:3}&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="n">d</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;two&quot;</span><span class="p">)</span>        <span class="o">//</span> <span class="n">prints</span> <span class="mi">2</span>

<span class="n">objref</span> <span class="n">dg</span>
<span class="n">dg</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="fm">__getitem__</span>
<span class="nb">print</span> <span class="n">dg</span><span class="o">.</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;two&quot;</span><span class="p">)</span>                <span class="o">//</span> <span class="n">prints</span> <span class="mi">2</span>
</pre></div>
</div>
<p>To assign a value to a python variable that exists in a module use</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nrnpython</span><span class="p">(</span><span class="s2">&quot;a = 10&quot;</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">new</span> <span class="n">PythonObject</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="mi">25</span>
<span class="n">p</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;hello&quot;</span>
<span class="n">p</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Vector</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">nrnpython</span><span class="p">(</span><span class="s2">&quot;b = []&quot;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">b</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="mechstan.html" class="btn btn-neutral float-left" title="MechanismStandard (Parameter Control)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="internals.html" class="btn btn-neutral float-right" title="Debugging and Internals Access" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Duke, Yale and the Blue Brain Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>