<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NEURON: coreneuron::nrn_partrans::TransferThreadData Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NEURON
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('structcoreneuron_1_1nrn__partrans_1_1_transfer_thread_data.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structcoreneuron_1_1nrn__partrans_1_1_transfer_thread_data-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">coreneuron::nrn_partrans::TransferThreadData Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The basic problem is to copy sources to targets.  
 <a href="structcoreneuron_1_1nrn__partrans_1_1_transfer_thread_data.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="partrans_8hpp_source.html">partrans.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:acaa26919ec0760a970cf0e33bcd45a9b"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcoreneuron_1_1nrn__partrans_1_1_transfer_thread_data.html#acaa26919ec0760a970cf0e33bcd45a9b">src_indices</a></td></tr>
<tr class="separator:acaa26919ec0760a970cf0e33bcd45a9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d6bd09068c8d2e6ad0f169a933a22c4"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcoreneuron_1_1nrn__partrans_1_1_transfer_thread_data.html#a7d6bd09068c8d2e6ad0f169a933a22c4">src_gather</a></td></tr>
<tr class="separator:a7d6bd09068c8d2e6ad0f169a933a22c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43d5cf605d9d0aef2448522a6187049a"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcoreneuron_1_1nrn__partrans_1_1_transfer_thread_data.html#a43d5cf605d9d0aef2448522a6187049a">gather2outsrc_indices</a></td></tr>
<tr class="separator:a43d5cf605d9d0aef2448522a6187049a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a662659f3277cdcefad3fe4e0c90ac230"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcoreneuron_1_1nrn__partrans_1_1_transfer_thread_data.html#a662659f3277cdcefad3fe4e0c90ac230">outsrc_indices</a></td></tr>
<tr class="separator:a662659f3277cdcefad3fe4e0c90ac230"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d3c218c9a414be33488f35dd041948e"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcoreneuron_1_1nrn__partrans_1_1_transfer_thread_data.html#a5d3c218c9a414be33488f35dd041948e">insrc_indices</a></td></tr>
<tr class="separator:a5d3c218c9a414be33488f35dd041948e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad91153a69eed3e989ada178947458e4d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcoreneuron_1_1nrn__partrans_1_1_transfer_thread_data.html#ad91153a69eed3e989ada178947458e4d">tar_indices</a></td></tr>
<tr class="separator:ad91153a69eed3e989ada178947458e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The basic problem is to copy sources to targets. </p>
<p>It may be the case that a source gets copied to several targets. Sources and targets are a set of indices in NrnThread.data. A copy may be intrathread, interthread, interprocess. Copies happen every time step so efficiency is desirable. <a class="el" href="struct_setup_transfer_info.html">SetupTransferInfo</a> gives us the source and target (sid, type, index) triples for a thread and all the global threads define what gets copied where. Need to process that info into <a class="el" href="structcoreneuron_1_1nrn__partrans_1_1_transfer_thread_data.html" title="The basic problem is to copy sources to targets.">TransferThreadData</a> for each thread and the interprocessor mpi buffers insrc_buf_ and outsrc_buf transfered with MPI_Alltoallv, hopefully with a more or less optimal ordering. The compute strategy is: 1) Each thread copies its NrnThread.data source items to outsrc_buf_. 2) MPI_Allgatherv transfers outsrc_buf_ to insrc_buf_. 3) Each thread, copies insrc_buf_ values to Nrnthread.data target.</p>
<p>Optimal ordering is probably beyond our reach but a few considerations may be useful. The typical use is for gap junctions where only voltage transferred and all instances of the HalfGap <a class="el" href="structcoreneuron_1_1_point__process.html">Point_process</a> receive a voltage. Two situations are common. Voltage transfer is sparse and one to one, i.e many compartments do not have gap junctions, and those that do have only one. The other situation is that all compartments have gap junctions (e.g. syncytium of single compartment cells in the heart) and the voltage needs to be transferred to all neighboring cells (e.g. 6-18 cells can be neighbors to the central cell). So on the target side, it might be good to copy to the target in target index order from the input_buf_. And on the source side, it is certainly simple to scatter to the outbut_buf_ in NrnThread.data order. Note that one expects a wide scatter to the outsrc_buf and also a wide scatter within the insrc_buf_. </p>

<p class="definition">Definition at line <a class="el" href="partrans_8hpp_source.html#l00078">78</a> of file <a class="el" href="partrans_8hpp_source.html">partrans.hpp</a>.</p>
</div><h2 class="groupheader">Member Data Documentation</h2>
<a id="a43d5cf605d9d0aef2448522a6187049a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43d5cf605d9d0aef2448522a6187049a">&#9670;&nbsp;</a></span>gather2outsrc_indices</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; coreneuron::nrn_partrans::TransferThreadData::gather2outsrc_indices</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="partrans_8hpp_source.html#l00081">81</a> of file <a class="el" href="partrans_8hpp_source.html">partrans.hpp</a>.</p>

</div>
</div>
<a id="a5d3c218c9a414be33488f35dd041948e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d3c218c9a414be33488f35dd041948e">&#9670;&nbsp;</a></span>insrc_indices</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; coreneuron::nrn_partrans::TransferThreadData::insrc_indices</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="partrans_8hpp_source.html#l00084">84</a> of file <a class="el" href="partrans_8hpp_source.html">partrans.hpp</a>.</p>

</div>
</div>
<a id="a662659f3277cdcefad3fe4e0c90ac230"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a662659f3277cdcefad3fe4e0c90ac230">&#9670;&nbsp;</a></span>outsrc_indices</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; coreneuron::nrn_partrans::TransferThreadData::outsrc_indices</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="partrans_8hpp_source.html#l00082">82</a> of file <a class="el" href="partrans_8hpp_source.html">partrans.hpp</a>.</p>

</div>
</div>
<a id="a7d6bd09068c8d2e6ad0f169a933a22c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d6bd09068c8d2e6ad0f169a933a22c4">&#9670;&nbsp;</a></span>src_gather</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;double&gt; coreneuron::nrn_partrans::TransferThreadData::src_gather</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="partrans_8hpp_source.html#l00080">80</a> of file <a class="el" href="partrans_8hpp_source.html">partrans.hpp</a>.</p>

</div>
</div>
<a id="acaa26919ec0760a970cf0e33bcd45a9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acaa26919ec0760a970cf0e33bcd45a9b">&#9670;&nbsp;</a></span>src_indices</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; coreneuron::nrn_partrans::TransferThreadData::src_indices</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="partrans_8hpp_source.html#l00079">79</a> of file <a class="el" href="partrans_8hpp_source.html">partrans.hpp</a>.</p>

</div>
</div>
<a id="ad91153a69eed3e989ada178947458e4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad91153a69eed3e989ada178947458e4d">&#9670;&nbsp;</a></span>tar_indices</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; coreneuron::nrn_partrans::TransferThreadData::tar_indices</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="partrans_8hpp_source.html#l00085">85</a> of file <a class="el" href="partrans_8hpp_source.html">partrans.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>/home/runner/work/nrn/nrn/src/coreneuron/network/<a class="el" href="partrans_8hpp_source.html">partrans.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<div id="nav-path" class="navpath">
  <ul>
    <li class="navelem"><a class="el" href="namespacecoreneuron.html">coreneuron</a></li><li class="navelem"><a class="el" href="namespacecoreneuron_1_1nrn__partrans.html">nrn_partrans</a></li><li class="navelem"><a class="el" href="structcoreneuron_1_1nrn__partrans_1_1_transfer_thread_data.html">TransferThreadData</a></li>
  </ul>
</div>
<hr class="footer"/>
<address class="footer">
    <small>
    </small>
</address>
<!--END !GENERATE_TREEVIEW-->
</body>
</html>
